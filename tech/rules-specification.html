<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>App Manager: Rules Specification | App Manager Docs</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="A full-featured package manager and viewer for Android">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/AppManager/assets/css/0.styles.4327b704.css" as="style"><link rel="preload" href="/AppManager/assets/js/app.e364caf9.js" as="script"><link rel="preload" href="/AppManager/assets/js/2.322e4bdf.js" as="script"><link rel="preload" href="/AppManager/assets/js/22.aa8abf33.js" as="script"><link rel="prefetch" href="/AppManager/assets/js/10.41fb6ca0.js"><link rel="prefetch" href="/AppManager/assets/js/11.c0ca32e7.js"><link rel="prefetch" href="/AppManager/assets/js/12.89d15305.js"><link rel="prefetch" href="/AppManager/assets/js/13.c98d8209.js"><link rel="prefetch" href="/AppManager/assets/js/14.3c2ac967.js"><link rel="prefetch" href="/AppManager/assets/js/15.adc2fcc6.js"><link rel="prefetch" href="/AppManager/assets/js/16.0763e924.js"><link rel="prefetch" href="/AppManager/assets/js/17.469058b6.js"><link rel="prefetch" href="/AppManager/assets/js/18.3cd57888.js"><link rel="prefetch" href="/AppManager/assets/js/19.85351c5b.js"><link rel="prefetch" href="/AppManager/assets/js/20.da5b2dff.js"><link rel="prefetch" href="/AppManager/assets/js/21.c4784c38.js"><link rel="prefetch" href="/AppManager/assets/js/3.e888d8b1.js"><link rel="prefetch" href="/AppManager/assets/js/4.7935395b.js"><link rel="prefetch" href="/AppManager/assets/js/5.32a33e10.js"><link rel="prefetch" href="/AppManager/assets/js/6.e3221198.js"><link rel="prefetch" href="/AppManager/assets/js/7.aaa20f76.js"><link rel="prefetch" href="/AppManager/assets/js/8.a0cabe84.js"><link rel="prefetch" href="/AppManager/assets/js/9.194d5e4f.js">
    <link rel="stylesheet" href="/AppManager/assets/css/0.styles.4327b704.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AppManager/" class="home-link router-link-active"><img src="/AppManager/icon.png" alt="App Manager Docs" class="logo"> <span class="site-name can-hide">App Manager Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/AppManager/guide/" class="nav-link">
  Instructions
</a></div><div class="nav-item"><a href="/AppManager/changelog.html" class="nav-link">
  Changelog
</a></div><div class="nav-item"><a href="https://f-droid.org/packages/io.github.muntashirakon.AppManager" target="_blank" rel="noopener noreferrer" class="nav-link external">
  F-Droid
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/MuntashirAkon/AppManager" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Source Code
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/AppManager/guide/" class="nav-link">
  Instructions
</a></div><div class="nav-item"><a href="/AppManager/changelog.html" class="nav-link">
  Changelog
</a></div><div class="nav-item"><a href="https://f-droid.org/packages/io.github.muntashirakon.AppManager" target="_blank" rel="noopener noreferrer" class="nav-link external">
  F-Droid
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/MuntashirAkon/AppManager" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Source Code
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Instructions</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AppManager/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/AppManager/guide/" class="sidebar-link">Introduction</a></li><li><a href="/AppManager/guide/adb-over-tcp.html" class="sidebar-link">ADB over TCP</a></li><li><a href="/AppManager/guide/main-page.html" class="sidebar-link">Main Page</a></li><li><a href="/AppManager/guide/app-details-page.html" class="sidebar-link">App Details Page</a></li><li><a href="/AppManager/guide/one-click-ops-page.html" class="sidebar-link">1-Click Ops Page</a></li><li><a href="/AppManager/guide/exodus-page.html" class="sidebar-link">εxodus Page</a></li><li><a href="/AppManager/guide/shared-pref-editor-page.html" class="sidebar-link">Shared Preferences Editor Page</a></li><li><a href="/AppManager/guide/settings-page.html" class="sidebar-link">Settings Page</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/AppManager/faq" class="sidebar-heading clickable"><span>Frequently Asked Questions</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/AppManager/faq/app-components.html" class="sidebar-link">App Components</a></li><li><a href="/AppManager/faq/misc.html" class="sidebar-link">Miscellanea</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/AppManager/tech" class="sidebar-heading clickable router-link-active open"><span>Technical Information</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/AppManager/tech/AppOps.html" class="sidebar-link">App Ops</a></li><li><a href="/AppManager/tech/rules-specification.html" aria-current="page" class="active sidebar-link">App Manager: Rules Specification</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AppManager/tech/rules-specification.html#background" class="sidebar-link">Background</a></li><li class="sidebar-sub-header"><a href="/AppManager/tech/rules-specification.html#rules-file-format" class="sidebar-link">Rules File Format</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AppManager/tech/rules-specification.html#internal" class="sidebar-link">Internal</a></li><li class="sidebar-sub-header"><a href="/AppManager/tech/rules-specification.html#external" class="sidebar-link">External</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="app-manager-rules-specification"><a href="#app-manager-rules-specification" class="header-anchor">#</a> App Manager: Rules Specification</h1> <p><em>Go to the <a href="https://github.com/MuntashirAkon/AppManager/issues/24" target="_blank" rel="noopener noreferrer">related issue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> for discussion.</em></p> <p><strong>App Manager</strong> currently supports blocking activities, broadcast receivers, content providers, services, app ops and permissions, and in future I may add more blocking options. In order to add more portability, it is necessary to import/export all these data.</p> <details class="custom-block details"><summary>Table of Contents</summary> <p></p><div class="table-of-contents"><ul><li><a href="#background">Background</a></li><li><a href="#rules-file-format">Rules File Format</a><ul><li><a href="#internal">Internal</a></li><li><a href="#external">External</a></li></ul></li></ul></div><p></p></details> <h2 id="background"><a href="#background" class="header-anchor">#</a> Background</h2> <p>All configuration files are stored at <tt>/data/data/io.github.muntashirakon.AppManager/Files/conf</tt>, and <tt>/sdcard/Android/data/io.github.muntashirakon.AppManager/Files/ifw</tt> is used as a temporary storage. The latter directory is kept to provide compatibility for App Manager v2.5.5 or older as well. This latter directory will be removed in v2.6 as it is not secured to store sensitive data in the shared storage as any app having access to these directories can create or modify these files.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>From v2.5.6, this latter directory is mostly kept for temporary storage. If you're upgrading from v2.5.5 or older versions, make sure to apply <a href="/AppManager/guide/settings-page.html#global-component-blocking">Global Component Blocking</a> which will import all the rules from this directory automatically (you can later disable this option).</p></div> <p>Maintaining a database should be the best choice when it comes to storing data. But for now, I'll be using several <code>tsv</code> files with each file having the name of the package and a <code>.tsv</code> extension. The file/database will be queried/processed by the <code>RulesStorageManager</code> class. Due to this abstraction, it should be easier to switch to database or encrypted database systems in future without changing the design of the entire project.</p> <h2 id="rules-file-format"><a href="#rules-file-format" class="header-anchor">#</a> Rules File Format</h2> <h3 id="internal"><a href="#internal" class="header-anchor">#</a> Internal</h3> <p>The format below is used internally within App Manager and <em>is not compatible with the external format.</em></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;name&gt; &lt;type&gt; &lt;mode&gt;|&lt;component_status&gt;|&lt;is_granted&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Where:</p> <ul><li><code>&lt;name&gt;</code> - Component/permission/app op name (in case of app op, it could be string or integer)</li> <li><code>&lt;type&gt;</code> - One of the <code>ACTIVITY</code>, <code>RECEIVER</code>, <code>PROVIDER</code>, <code>SERVICE</code>, <code>APP_OP</code>,  <code>PERMISSION</code></li> <li><code>&lt;mode&gt;</code> - (For app ops) The associated <a href="/AppManager/tech/AppOps.html#mode-constants">mode constant</a></li> <li><code>&lt;component_status&gt;</code> - (For components) Component status
<ul><li><code>true</code> - Component has been applied (<code>true</code> value is kept for compatibility)</li> <li><code>false</code> - Component hasn't been applied yet, but will be applied in future (<code>false</code> value is kept for compatibility)</li> <li><code>unblocked</code> - Component is scheduled to be unblocked</li></ul></li> <li><code>&lt;is_granted&gt;</code> - (For permissions) Whether the permission is granted or revoked</li></ul> <h3 id="external"><a href="#external" class="header-anchor">#</a> External</h3> <p>External format is used for importing or exporting rules in App Manager.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;package_name&gt; &lt;component_name&gt; &lt;type&gt; &lt;mode&gt;|&lt;component_status&gt;|&lt;is_granted&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This the format is essentially the same as above except for the first item which is the name of the package.</p> <div class="custom-block danger"><p class="custom-block-title">Caution</p> <p>The exprted rules have a different format than the internal one and should not be copied directly to the <strong>conf</strong> folder.</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/16/2020, 1:01:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/AppManager/tech/AppOps.html" class="prev">
        App Ops
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/AppManager/assets/js/app.e364caf9.js" defer></script><script src="/AppManager/assets/js/2.322e4bdf.js" defer></script><script src="/AppManager/assets/js/22.aa8abf33.js" defer></script>
  </body>
</html>
