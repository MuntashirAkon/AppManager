<!doctype html><html xmlns=http://www.w3.org/1999/xhtml lang=zh-hans xml:lang=zh-Hans><meta charset=utf-8><meta name=generator content="pandoc"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes"><meta name=author content="Muntashir Al-Islam"><title>App Manager</title><style>code{white-space:pre-wrap}span.smallcaps{font-variant:small-caps}span.underline{text-decoration:underline}div.column{display:inline-block;vertical-align:top;width:50%}div.hanging-indent{margin-left:1.5em;text-indent:-1.5em}ul.task-list{list-style:none}pre>code.sourceCode{white-space:pre;position:relative}pre>code.sourceCode>span{display:inline-block;line-height:1.25}pre>code.sourceCode>span:empty{height:1.2em}.sourceCode{overflow:visible}code.sourceCode>span{color:inherit;text-decoration:inherit}div.sourceCode{margin:1em 0}pre.sourceCode{margin:0}@media screen{div.sourceCode{overflow:auto}}@media print{pre>code.sourceCode{white-space:pre-wrap}pre>code.sourceCode>span{text-indent:-5em;padding-left:5em}}pre.numberSource code{counter-reset:source-line 0}pre.numberSource code>span{position:relative;left:-4em;counter-increment:source-line}pre.numberSource code>span>a:first-child::before{content:counter(source-line);position:relative;left:-1em;text-align:right;vertical-align:baseline;border:none;display:inline-block;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 4px;width:4em}pre.numberSource{margin-left:3em;padding-left:4px}div.sourceCode{}@media screen{pre>code.sourceCode>span>a:first-child::before{text-decoration:underline}}code span.al{font-weight:700}code span.an{font-style:italic}code span.cf{font-weight:700}code span.co{font-style:italic}code span.cv{font-style:italic}code span.do{font-style:italic}code span.dt{text-decoration:underline}code span.er{font-weight:700}code span.in{font-style:italic}code span.kw{font-weight:700}code span.pp{font-weight:700}code span.wa{font-style:italic}.display.math{display:block;text-align:center;margin:.5rem auto}</style><link rel=stylesheet href=../css/custom.css><header id=title-block-header><h1 class=title>App Manager</h1><p class=author>Muntashir Al-Islam</header><nav id=TOC role=doc-toc><ul class=incremental><li><span><span class=toc-section-number>1</span> <a href=#ch:introduction id=toc:ch:introduction>简介</a></span><ul class=incremental><li><span><span class=toc-section-number>1.1</span> <a href=#sec:terminologies id=toc:sec:terminologies>术语</a></span><li><span><span class=toc-section-number>1.2</span> <a href=#sec:supported-versions id=toc:sec:supported-versions>受支持的版本</a></span><li><span><span class=toc-section-number>1.3</span> <a href=#sec:official-sources id=toc:sec:official-sources>官方来源</a></span><ul class=incremental><li><span><span class=toc-section-number>1.3.1</span> <a href=#subsec:binary-distribution-sources id=toc:subsec:binary-distribution-sources>二进制(可执行)分发来源</a></span><li><span><span class=toc-section-number>1.3.2</span> <a href=#subsec:links-to-source-code id=toc:subsec:links-to-source-code>源码链接</a></span><li><span><span class=toc-section-number>1.3.3</span> <a href=#subsec:translations id=toc:subsec:translations>翻译</a></span></ul><li><span><span class=toc-section-number>1.4</span> <a href=#sec:contributing id=toc:sec:contributing>贡献</a></span><ul class=incremental><li><span><span class=toc-section-number>1.4.1</span> <a href=#subsec:build-instructions id=toc:subsec:build-instructions>构建说明</a></span><li><span><span class=toc-section-number>1.4.2</span> <a href=#subsec:submitting-patches id=toc:subsec:submitting-patches>提交补丁</a></span></ul><li><span><span class=toc-section-number>1.5</span> <a href=#sec:donation-&-funding id=toc:sec:donation-&-funding>捐赠 & 资助</a></span><li><span><span class=toc-section-number>1.6</span> <a href=#sec:contact id=toc:sec:contact>联系我们</a></span></ul><li><span><span class=toc-section-number>2</span> <a href=#ch:pages id=toc:ch:pages>页面</a></span><ul class=incremental><li><span><span class=toc-section-number>2.1</span> <a href=#sec:main-page id=toc:sec:main-page>主页</a></span><ul class=incremental><li><span><span class=toc-section-number>2.1.1</span> <a href=#subsec:batch-operations id=toc:subsec:batch-operations>批处理</a></span><li><span><span class=toc-section-number>2.1.2</span> <a href=#subsec:main-colour-codes id=toc:subsec:main-colour-codes>颜色代码含义</a></span><li><span><span class=toc-section-number>2.1.3</span> <a href=#subsec:main-page-application-types id=toc:subsec:main-page-application-types>应用类型</a></span><li><span><span class=toc-section-number>2.1.4</span> <a href=#subsec:main-page-version-info id=toc:subsec:main-page-version-info>版本信息</a></span><li><span><span class=toc-section-number>2.1.5</span> <a href=#subsec:main-page-options-menu id=toc:subsec:main-page-options-menu>选项菜单</a></span></ul><li><span><span class=toc-section-number>2.2</span> <a href=#sec:app-details-page id=toc:sec:app-details-page>应用程序详情页</a></span><ul class=incremental><li><span><span class=toc-section-number>2.2.1</span> <a href=#subsec:app-details-colour-codes id=toc:subsec:app-details-colour-codes>颜色代码含义</a></span><li><span><span class=toc-section-number>2.2.2</span> <a href=#subsec:app-info-tab id=toc:subsec:app-info-tab>应用信息</a></span><li><span><span class=toc-section-number>2.2.3</span> <a href=#subsec:component-tabs id=toc:subsec:component-tabs>组件选项卡</a></span><li><span><span class=toc-section-number>2.2.4</span> <a href=#subsec:permission-tabs id=toc:subsec:permission-tabs>权限选项卡</a></span><li><span><span class=toc-section-number>2.2.5</span> <a href=#subsec:signatures-tab id=toc:subsec:signatures-tab>签名选项卡</a></span><li><span><span class=toc-section-number>2.2.6</span> <a href=#subsec:shared-libs-tab id=toc:subsec:shared-libs-tab>共享库选项卡</a></span><li><span><span class=toc-section-number>2.2.7</span> <a href=#subsec:other-tabs id=toc:subsec:other-tabs>其他选项卡</a></span></ul><li><span><span class=toc-section-number>2.3</span> <a href=#sec:1-click-ops-page id=toc:sec:1-click-ops-page>一键操作页</a></span><ul class=incremental><li><span><span class=toc-section-number>2.3.1</span> <a href=#subsec:block-unblock-trackers id=toc:subsec:block-unblock-trackers>Block/Unblock
Trackers</a></span><li><span><span class=toc-section-number>2.3.2</span> <a href=#subsec:block-components-dots id=toc:subsec:block-components-dots>Block Components…</a></span><li><span><span class=toc-section-number>2.3.3</span> <a href=#subsec:set-mode-for-app-ops-dots id=toc:subsec:set-mode-for-app-ops-dots>Set Mode for App
Ops…</a></span><li><span><span class=toc-section-number>2.3.4</span> <a href=#subsec:1-click-back-up id=toc:subsec:1-click-back-up>备份</a></span><li><span><span class=toc-section-number>2.3.5</span> <a href=#subsec:1-click-restore id=toc:subsec:1-click-restore>恢复</a></span></ul><li><span><span class=toc-section-number>2.4</span> <a href=#sec:profiles-page id=toc:sec:profiles-page>配置文件页面</a></span><ul class=incremental><li><span><span class=toc-section-number>2.4.1</span> <a href=#subsec:profiles-options-menu id=toc:subsec:profiles-options-menu>选项菜单</a></span></ul><li><span><span class=toc-section-number>2.5</span> <a href=#sec:profile-page id=toc:sec:profile-page>配置页</a></span><ul class=incremental><li><span><span class=toc-section-number>2.5.1</span> <a href=#subsec:profile-options-menu id=toc:subsec:profile-options-menu>选项菜单</a></span><li><span><span class=toc-section-number>2.5.2</span> <a href=#subsec:profile-apps-tab id=toc:subsec:profile-apps-tab>应用程序选项卡</a></span><li><span><span class=toc-section-number>2.5.3</span> <a href=#subsec:profile-configurations-tab id=toc:subsec:profile-configurations-tab>配置选项卡</a></span></ul><li><span><span class=toc-section-number>2.6</span> <a href=#sec:settings-page id=toc:sec:settings-page>设置页面</a></span><ul class=incremental><li><span><span class=toc-section-number>2.6.1</span> <a href=#subsec:language id=toc:subsec:language>界面语言</a></span><li><span><span class=toc-section-number>2.6.2</span> <a href=#subsec:app-theme id=toc:subsec:app-theme>应用主题</a></span><li><span><span class=toc-section-number>2.6.3</span> <a href=#subsec:screen-lock id=toc:subsec:screen-lock>屏幕锁定</a></span><li><span><span class=toc-section-number>2.6.4</span> <a href=#subsec:mode-of-operation id=toc:subsec:mode-of-operation>操作模式</a></span><li><span><span class=toc-section-number>2.6.5</span> <a href=#subsec:enable/disable-features id=toc:subsec:enable/disable-features>启用/禁用功能</a></span><li><span><span class=toc-section-number>2.6.6</span> <a href=#subsec:apk-signing id=toc:subsec:apk-signing>APK
签名</a></span><li><span><span class=toc-section-number>2.6.7</span> <a href=#subsec:installer id=toc:subsec:installer>安装器</a></span><li><span><span class=toc-section-number>2.6.8</span> <a href=#subsec:backup/restore id=toc:subsec:backup/restore>备份/恢复</a></span><li><span><span class=toc-section-number>2.6.9</span> <a href=#subsec:rules id=toc:subsec:rules>规则</a></span><li><span><span class=toc-section-number>2.6.10</span> <a href=#subsec:import/export-keystore id=toc:subsec:import/export-keystore>导入/导出密钥库</a></span><li><span><span class=toc-section-number>2.6.11</span> <a href=#subsec:device-info id=toc:subsec:device-info>关于设备</a></span></ul><li><span><span class=toc-section-number>2.7</span> <a href=#sec:scanner-page id=toc:sec:scanner-page>扫描器页面</a></span><ul class=incremental><li><span><span class=toc-section-number>2.7.1</span> <a href=#subsec:missing-signatures id=toc:subsec:missing-signatures>缺少签名</a></span></ul><li><span><span class=toc-section-number>2.8</span> <a href=#sec:interceptor-page id=toc:sec:interceptor-page>拦截器页面</a></span><ul class=incremental><li><span><span class=toc-section-number>2.8.1</span> <a href=#subsec:intent-filters id=toc:subsec:intent-filters>意图(Intent)过滤器</a></span><li><span><span class=toc-section-number>2.8.2</span> <a href=#subsec:matching-activities id=toc:subsec:matching-activities>匹配的活动(Activity)</a></span><li><span><span class=toc-section-number>2.8.3</span> <a href=#subsec:interceptor-reset-to-default id=toc:subsec:interceptor-reset-to-default>重置为默认</a></span><li><span><span class=toc-section-number>2.8.4</span> <a href=#subsec:interceptor-send-edited-intent id=toc:subsec:interceptor-send-edited-intent>发送编辑过的意图(Intent)</a></span></ul><li><span><span class=toc-section-number>2.9</span> <a href=#sec:shared-preferences-editor-page id=toc:sec:shared-preferences-editor-page>共享首选项(Shared
Preferences)编辑页</a></span></ul><li><span><span class=toc-section-number>3</span> <a href=#ch:guides id=toc:ch:guides>指南</a></span><ul class=incremental><li><span><span class=toc-section-number>3.1</span> <a href=#sec:adb-over-tcp id=toc:sec:adb-over-tcp>经由TCP的ADB</a></span><ul class=incremental><li><span><span class=toc-section-number>3.1.1</span> <a href=#subsec:enable-developer-options id=toc:subsec:enable-developer-options>启用开发者选项</a></span><li><span><span class=toc-section-number>3.1.2</span> <a href=#subsec:enable-usb-debugging id=toc:subsec:enable-usb-debugging>启用USB调试</a></span><li><span><span class=toc-section-number>3.1.3</span> <a href=#subsec:setup-adb-on-pc-or-mac id=toc:subsec:setup-adb-on-pc-or-mac>在PC或Mac上配置ADB</a></span><li><span><span class=toc-section-number>3.1.4</span> <a href=#subsec:configure-adb-over-tcp id=toc:subsec:configure-adb-over-tcp>配置经由TCP的ADB</a></span><li><span><span class=toc-section-number>3.1.5</span> <a href=#subsec:references id=toc:subsec:references>参考</a></span></ul><li><span><span class=toc-section-number>3.2</span> <a href=#sec:backup-restore id=toc:sec:backup-restore>备份/恢复</a></span><ul class=incremental><li><span><span class=toc-section-number>3.2.1</span> <a href=#subsec:backup-location id=toc:subsec:backup-location>位置</a></span><li><span><span class=toc-section-number>3.2.2</span> <a href=#subsec:backup-restore-backup-options id=toc:subsec:backup-restore-backup-options>备份选项</a></span><li><span><span class=toc-section-number>3.2.3</span> <a href=#subsec:backup-restore-backup id=toc:subsec:backup-restore-backup>备份</a></span><li><span><span class=toc-section-number>3.2.4</span> <a href=#subsec:backup-restore-restore id=toc:subsec:backup-restore-restore>恢复</a></span><li><span><span class=toc-section-number>3.2.5</span> <a href=#subsec:backup-restore-delete-backup id=toc:subsec:backup-restore-delete-backup>删除备份</a></span></ul><li><span><span class=toc-section-number>3.3</span> <a href=#sec:net-policy id=toc:sec:net-policy>连网策略</a></span></ul><li><span><span class=toc-section-number>4</span> <a href=#ch:faq id=toc:ch:faq>常见问题</a></span><ul class=incremental><li><span><span class=toc-section-number>4.1</span> <a href=#sec:faq:app-components id=toc:sec:faq:app-components>应用组件</a></span><ul class=incremental><li><span><span class=toc-section-number>4.1.1</span> <a href=#subsec:faq:what-are-app-components id=toc:subsec:faq:what-are-app-components>什么是应用组件？</a></span><li><span><span class=toc-section-number>4.1.2</span> <a href=#追踪器或其他组件在app-manager中是如何被禁用的其局限性是什么 id=toc:追踪器或其他组件在app-manager中是如何被禁用的其局限性是什么>追踪器或其他组件在App
Manager中是如何被禁用的？其局限性是什么？</a></span><li><span><span class=toc-section-number>4.1.3</span> <a href=#为什么被app-manager禁用的组件没有被其他相关应用程序检测到 id=toc:为什么被app-manager禁用的组件没有被其他相关应用程序检测到>为什么被App
Manager禁用的组件没有被其他相关应用程序检测到？</a></span><li><span><span class=toc-section-number>4.1.4</span> <a href=#被其他工具禁用的应用程序组件是否保留在app-manager中 id=toc:被其他工具禁用的应用程序组件是否保留在app-manager中>被其他工具禁用的应用程序组件是否保留在App
Manager中？</a></span><li><span><span class=toc-section-number>4.1.5</span> <a href=#被-app-manager-禁用但同时也被其他工具禁用的组件会发生什么 id=toc:被-app-manager-禁用但同时也被其他工具禁用的组件会发生什么>被
App Manager 禁用但同时也被其他工具禁用的组件会发生什么？</a></span><li><span><span class=toc-section-number>4.1.6</span> <a href=#subsec:faq:what-is-instant-component-blocking id=toc:subsec:faq:what-is-instant-component-blocking>什么是即时组件禁用？</a></span><li><span><span class=toc-section-number>4.1.7</span> <a href=#subsec:tracker-classes-versus-tracker-components id=toc:subsec:tracker-classes-versus-tracker-components>跟踪器类与跟踪器组件</a></span><li><span><span class=toc-section-number>4.1.8</span> <a href=#subsec:faq:how-to-unblock-tracker-components id=toc:subsec:faq:how-to-unblock-tracker-components>如何使用 "一键操作
"或 "批量操作 "解禁的追踪器组件？</a></span></ul><li><span><span class=toc-section-number>4.2</span> <a href=#sec:faq:adb-over-tcp id=toc:sec:faq:adb-over-tcp>ADB over TCP
(经由TCP的ADB)</a></span><ul class=incremental><li><span><span class=toc-section-number>4.2.1</span> <a href=#我必须在每次重启后启用adb-over-tcp吗 id=toc:我必须在每次重启后启用adb-over-tcp吗>我必须在每次重启后启用ADB
over TCP吗？</a></span><li><span><span class=toc-section-number>4.2.2</span> <a href=#无法启用-usb-调试怎么办 id=toc:无法启用-usb-调试怎么办>无法启用 USB
调试，怎么办？</a></span><li><span><span class=toc-section-number>4.2.3</span> <a href=#我可以使用-adb-over-tcp-来禁用跟踪器或任何其他应用程序组件吗 id=toc:我可以使用-adb-over-tcp-来禁用跟踪器或任何其他应用程序组件吗>我可以使用
ADB over TCP 来禁用跟踪器或任何其他应用程序组件吗？</a></span><li><span><span class=toc-section-number>4.2.4</span> <a href=#哪些功能可以在adb模式下使用 id=toc:哪些功能可以在adb模式下使用>哪些功能可以在ADB模式下使用？</a></span></ul><li><span><span class=toc-section-number>4.3</span> <a href=#sec:faq:miscellanea id=toc:sec:faq:miscellanea>杂项</a></span><ul class=incremental><li><span><span class=toc-section-number>4.3.1</span> <a href=#我不使用rootadb是否完全安全 id=toc:我不使用rootadb是否完全安全>我不使用root/ADB，是否完全安全？</a></span><li><span><span class=toc-section-number>4.3.2</span> <a href=#为什么-app-manager-有联网的权限而它却没有连接到互联网 id=toc:为什么-app-manager-有联网的权限而它却没有连接到互联网>为什么
App Manager 有联网的权限，而它却没有连接到互联网？</a></span><li><span><span class=toc-section-number>4.3.3</span> <a href=#跟踪器和库是如何更新的 id=toc:跟踪器和库是如何更新的>跟踪器和库是如何更新的？</a></span><li><span><span class=toc-section-number>4.3.4</span> <a href=#对于-shizuku-有何计划 id=toc:对于-shizuku-有何计划>对于
Shizuku 有何计划？</a></span><li><span><span class=toc-section-number>4.3.5</span> <a href=#subsec:faq:what-are-bloatware id=toc:subsec:faq:what-are-bloatware>什么是预装(bloatware)软件以及如何删除？</a></span></ul></ul><li><span><span class=toc-section-number>5</span> <a href=#ch:specifications id=toc:ch:specifications>语法</a></span><ul class=incremental><li><span><span class=toc-section-number>5.1</span> <a href=#sec:rules-specification id=toc:sec:rules-specification>规则语法</a></span><ul class=incremental><li><span><span class=toc-section-number>5.1.1</span> <a href=#背景介绍 id=toc:背景介绍>背景介绍</a></span><li><span><span class=toc-section-number>5.1.2</span> <a href=#规则文件格式 id=toc:规则文件格式>规则文件格式</a></span></ul></ul><li><span><span class=toc-section-number>6</span> <a href=#ch:changelogs id=toc:ch:changelogs>更新日志</a></span><ul class=incremental><li><span><span class=toc-section-number>6.1</span> <a href=#sec:v2.6.0-(385) id=toc:sec:v2.6.0-(385)>v2.6.0
(385)</a></span><ul class=incremental><li><span><span class=toc-section-number>6.1.1</span> <a href=#introducing-backups id=toc:introducing-backups>Introducing
Backups</a></span><li><span><span class=toc-section-number>6.1.2</span> <a href=#introducing-log-viewer id=toc:introducing-log-viewer>Introducing Log Viewer</a></span><li><span><span class=toc-section-number>6.1.3</span> <a href=#lock-app-manager id=toc:lock-app-manager>Lock App
Manager</a></span><li><span><span class=toc-section-number>6.1.4</span> <a href=#extended-modes-for-app-ops id=toc:extended-modes-for-app-ops>Extended Modes for App
Ops</a></span><li><span><span class=toc-section-number>6.1.5</span> <a href=#new-batch-ops-add-to-profile id=toc:new-batch-ops-add-to-profile>New Batch Ops: Add to
Profile</a></span><li><span><span class=toc-section-number>6.1.6</span> <a href=#app-info-improved id=toc:app-info-improved>App Info:
Improved</a></span><li><span><span class=toc-section-number>6.1.7</span> <a href=#advanced-sort-and-filtering-options-in-the-main-page id=toc:advanced-sort-and-filtering-options-in-the-main-page>Advanced
Sort and Filtering Options in the Main Page</a></span><li><span><span class=toc-section-number>6.1.8</span> <a href=#about-this-device id=toc:about-this-device>About This
Device</a></span><li><span><span class=toc-section-number>6.1.9</span> <a href=#enabledisable-features id=toc:enabledisable-features>Enable/disable Features</a></span><li><span><span class=toc-section-number>6.1.10</span> <a href=#new-languages id=toc:new-languages>New
Languages</a></span><li><span><span class=toc-section-number>6.1.11</span> <a href=#signing-the-apk-files id=toc:signing-the-apk-files>Signing the
APK Files</a></span><li><span><span class=toc-section-number>6.1.12</span> <a href=#new-extension-unapkm id=toc:new-extension-unapkm>New
Extension: UnAPKM</a></span></ul><li><span><span class=toc-section-number>6.2</span> <a href=#sec:v2.5.20-(375) id=toc:sec:v2.5.20-(375)>v2.5.20
(375)</a></span><ul class=incremental><li><span><span class=toc-section-number>6.2.1</span> <a href=#subsec:introducing-profiles id=toc:subsec:introducing-profiles>Introducing
Profiles</a></span><li><span><span class=toc-section-number>6.2.2</span> <a href=#subsec:the-interceptor id=toc:subsec:the-interceptor>The
Interceptor</a></span><li><span><span class=toc-section-number>6.2.3</span> <a href=#subsec:unapkm:-dedrm-the-apkm-files id=toc:subsec:unapkm:-dedrm-the-apkm-files>UnAPKM: DeDRM the APKM
files</a></span><li><span><span class=toc-section-number>6.2.4</span> <a href=#subsec:multiple-user id=toc:subsec:multiple-user>Multiple
user</a></span><li><span><span class=toc-section-number>6.2.5</span> <a href=#vive-la-france id=toc:vive-la-france>Vive la
France!</a></span><li><span><span class=toc-section-number>6.2.6</span> <a href=#report-crashes id=toc:report-crashes>Report
crashes</a></span><li><span><span class=toc-section-number>6.2.7</span> <a href=#android-11 id=toc:android-11>Android 11</a></span><li><span><span class=toc-section-number>6.2.8</span> <a href=#app-installer-improvements id=toc:app-installer-improvements>App Installer
Improvements</a></span></ul><li><span><span class=toc-section-number>6.3</span> <a href=#v2.5.17-368 id=toc:v2.5.17-368>v2.5.17 (368)</a></span><ul class=incremental><li><span><span class=toc-section-number>6.3.1</span> <a href=#app-installer id=toc:app-installer>App
Installer</a></span><li><span><span class=toc-section-number>6.3.2</span> <a href=#scanner-replacement-for-exodus-page id=toc:scanner-replacement-for-exodus-page>Scanner: Replacement for
Exodus Page</a></span><li><span><span class=toc-section-number>6.3.3</span> <a href=#introducing-system-config id=toc:introducing-system-config>Introducing System
Config</a></span><li><span><span class=toc-section-number>6.3.4</span> <a href=#more-languages id=toc:more-languages>More
Languages</a></span><li><span><span class=toc-section-number>6.3.5</span> <a href=#app-info-tab id=toc:app-info-tab>App Info Tab</a></span><li><span><span class=toc-section-number>6.3.6</span> <a href=#navigation-improvements id=toc:navigation-improvements>Navigation Improvements</a></span><li><span><span class=toc-section-number>6.3.7</span> <a href=#running-apps-page id=toc:running-apps-page>Running Apps
Page</a></span><li><span><span class=toc-section-number>6.3.8</span> <a href=#built-in-toybox id=toc:built-in-toybox>Built-in
Toybox</a></span><li><span><span class=toc-section-number>6.3.9</span> <a href=#component-blocker-improvements id=toc:component-blocker-improvements>Component Blocker
Improvements</a></span><li><span><span class=toc-section-number>6.3.10</span> <a href=#improvements-in-the-app-details-page id=toc:improvements-in-the-app-details-page>Improvements in the App
Details Page</a></span><li><span><span class=toc-section-number>6.3.11</span> <a href=#app-manifest id=toc:app-manifest>App Manifest</a></span></ul><li><span><span class=toc-section-number>6.4</span> <a href=#v2.5.13-348 id=toc:v2.5.13-348>v2.5.13 (348)</a></span><ul class=incremental><li><span><span class=toc-section-number>6.4.1</span> <a href=#bundled-app-split-apk id=toc:bundled-app-split-apk>Bundled App
(Split APK)</a></span><li><span><span class=toc-section-number>6.4.2</span> <a href=#direct-install-support id=toc:direct-install-support>Direct
Install Support</a></span><li><span><span class=toc-section-number>6.4.3</span> <a href=#remove-all-blocking-rules id=toc:remove-all-blocking-rules>Remove All Blocking
Rules</a></span><li><span><span class=toc-section-number>6.4.4</span> <a href=#app-ops id=toc:app-ops>App Ops</a></span><li><span><span class=toc-section-number>6.4.5</span> <a href=#enhanced-adb-support id=toc:enhanced-adb-support>Enhanced ADB
Support</a></span><li><span><span class=toc-section-number>6.4.6</span> <a href=#filtering-in-main-page id=toc:filtering-in-main-page>Filtering
in Main Page</a></span><li><span><span class=toc-section-number>6.4.7</span> <a href=#apk-backupsharing id=toc:apk-backupsharing>Apk
Backup/Sharing</a></span><li><span><span class=toc-section-number>6.4.8</span> <a href=#batch-ops id=toc:batch-ops>Batch Ops</a></span><li><span><span class=toc-section-number>6.4.9</span> <a href=#translations id=toc:translations>Translations</a></span><li><span><span class=toc-section-number>6.4.10</span> <a href=#app-data-backup id=toc:app-data-backup>App Data
Backup</a></span></ul></ul><li><span><span class=toc-section-number>7</span> <a href=#ch:app-ops id=toc:ch:app-ops>App Ops</a></span><ul class=incremental><li><span><span class=toc-section-number>7.1</span> <a href=#sec:app-ops-background id=toc:sec:app-ops-background>Background</a></span><li><span><span class=toc-section-number>7.2</span> <a href=#sec:introduction-to-app-ops id=toc:sec:introduction-to-app-ops>Introduction to App
Ops</a></span><li><span><span class=toc-section-number>7.3</span> <a href=#sec:appopsmanager id=toc:sec:appopsmanager>AppOpsManager</a></span><ul class=incremental><li><span><span class=toc-section-number>7.3.1</span> <a href=#subsec:op-constants id=toc:subsec:op-constants><code>OP_*</code> Constants</a></span><li><span><span class=toc-section-number>7.3.2</span> <a href=#subsec:mode-constants id=toc:subsec:mode-constants><code>MODE_*</code>
Constants</a></span><li><span><span class=toc-section-number>7.3.3</span> <a href=#subsec:package-ops id=toc:subsec:package-ops>PackageOps</a></span><li><span><span class=toc-section-number>7.3.4</span> <a href=#subsec:opentry id=toc:subsec:opentry>OpEntry</a></span><li><span><span class=toc-section-number>7.3.5</span> <a href=#subsec:usage id=toc:subsec:usage>Usage</a></span></ul><li><span><span class=toc-section-number>7.4</span> <a href=#sec:appopsservice id=toc:sec:appopsservice>AppOpsService</a></span><li><span><span class=toc-section-number>7.5</span> <a href=#sec:appops-xml id=toc:sec:appops-xml>appops.xml</a></span><li><span><span class=toc-section-number>7.6</span> <a href=#sec:appops-cli id=toc:sec:appops-cli>Command Line
Interface</a></span></ul></ul></nav><div class=titlingpage><div class=center><p><img src=../images/icon.png style=width:1in alt=image><p><strong><span class=smallcaps>App Manager</span></strong><p><strong>用户手册</strong><p><em>v3.0.0-alpha03</em><p>5 五月 2022<p>Copyright © 2020–2022 Muntashir Al-Islam<blockquote><p>“Wisely and slow. They stumble that run fast.” <span>— Friar
Laurence, <em>Romeo and Juliet</em></span></blockquote></div></div><section id=ch:introduction class=level1 data-number=1><h1 data-number=1><span class=header-section-number>1</span> <a href=#toc:ch:introduction>简介</a><a href=#ch:introduction class=anchor aria-hidden=true></a></h1><p>App Manager 是一个提供大量功能的高级的 Android
软件包管理器，因此，需要用户手册来帮助用户正确使用。本文作为 App Manager
的用户手册，旨在描述 App Manager 所提供的每一个功能。 本文也可以被认为是
App Manager 的 “官方” 指南，并指明 App Manager 的预期行为。翻译可能有误
(原文为英文)。因此，每个有能力的用户应该阅读该文件的英文版本，以获得最佳的体验。
此外还可能有其他非官方的或第三方的资源，如博客文章、视频、聊天群组等。虽然这些资源可能对许多人有用，但它们可能不是针对最新版本。
如果在App Manager中发现任何偏离本文档的情况，应在 <a href=https://github.com/MuntashirAkon/AppManager/issues>App Manager
问题追踪</a>内反映。<section id=sec:terminologies class=level2 data-number=1.1><h2 data-number=1.1><span class=header-section-number>1.1</span> <a href=#toc:sec:terminologies>术语</a><a href=#sec:terminologies class=anchor aria-hidden=true></a></h2><ul class=incremental><li><p><strong>AM</strong> — App Manager<li><p><strong>Block/Unblock</strong> — Used for component blocking or
unblocking. How components are blocked depends on the user
preferences.<li><p><strong>IFW</strong> — Intent Firewall (意图防火墙)<li><p><strong>Ops</strong> — operations (操作), e.g. app ops, batch
ops, 1-click ops<li><p><strong>SSAID</strong> — <code>Settings.Secure.ANDROID_ID</code>
- 分配给每个应用的设备标识符 (Android
Oreo及以上版本)，由应用签名与包<code>android</code>的SSAID组合生成的。因此，除非用户选择格式化设备，否则它保证对每个应用来说都是独一无二的。它被广泛用于跟踪用户。<li><p><strong>Tracker</strong> — Denotes tracker components throughout
the document and in App Manager except in the <a href=#sec:scanner-page>scanner page</a>. Trackers include libraries
such as crash reporters, analytics, profiling, identification, ad,
location, etc. Thus, they are not equal in functions. There is no
distinction or bias between open source and closed source libraries that
promote tracking.</ul></section><section id=sec:supported-versions class=level2 data-number=1.2><h2 data-number=1.2><span class=header-section-number>1.2</span> <a href=#toc:sec:supported-versions>受支持的版本</a><a href=#sec:supported-versions class=anchor aria-hidden=true></a></h2><p>当前，支持的版本是v2.6.0（稳定版），v3.0.0（alpha和debug版）。先前版本的
App Manager 可能包含安全漏洞，不应继续使用。</section><section id=sec:official-sources class=level2 data-number=1.3><h2 data-number=1.3><span class=header-section-number>1.3</span> <a href=#toc:sec:official-sources>官方来源</a><a href=#sec:official-sources class=anchor aria-hidden=true></a></h2><section id=subsec:binary-distribution-sources class=level3 data-number=1.3.1><h3 data-number=1.3.1><span class=header-section-number>1.3.1</span>
<a href=#toc:subsec:binary-distribution-sources>二进制(可执行)分发来源</a><a href=#subsec:binary-distribution-sources class=anchor aria-hidden=true></a></h3><p>App Manager 通过以下渠道发布。 非官方来源可能分发 App Manager
的修改版本，后果自负。<ol class=incremental><li><p>F-Droid <a href=#fn1 class=footnote-ref id=fnref1 role=doc-noteref><sup>1</sup></a><br><em>Link:</em> <a href=https://f-droid.org/packages/io.github.muntashirakon.AppManager class=uri>https://f-droid.org/packages/io.github.muntashirakon.AppManager</a><li><p>GitHub repository.<br><em>Normal releases:</em> <a href=https://github.com/MuntashirAkon/AppManager/releases class=uri>https://github.com/MuntashirAkon/AppManager/releases</a><br><em>Debug releases:</em> <a href=https://github.com/MuntashirAkon/AppManager/actions class=uri>https://github.com/MuntashirAkon/AppManager/actions</a><li><p>Telegram.<br><em>Normal releases:</em> <a href=https://t.me/AppManagerChannel class=uri>https://t.me/AppManagerChannel</a><br><em>Debug releases:</em> <a href=https://t.me/AppManagerDebug class=uri>https://t.me/AppManagerDebug</a></ol></section><section id=subsec:links-to-source-code class=level3 data-number=1.3.2><h3 data-number=1.3.2><span class=header-section-number>1.3.2</span>
<a href=#toc:subsec:links-to-source-code>源码链接</a><a href=#subsec:links-to-source-code class=anchor aria-hidden=true></a></h3><p>除了GitHub外其他都是镜像链接。tags 应当始终是最新的，但 master
分支不保证是 最新的。如果计划 clone master 分支，请使用 GitHub
链接而不是其他链接。<ol class=incremental><li><p>GitHub: <a href=https://github.com/MuntashirAkon/AppManager class=uri>https://github.com/MuntashirAkon/AppManager</a><li><p>GitLab: <a href=https://gitlab.com/muntashir/AppManager class=uri>https://gitlab.com/muntashir/AppManager</a><li><p>Codeberg: <a href=https://codeberg.org/muntashir/AppManager class=uri>https://codeberg.org/muntashir/AppManager</a><li><p>Riseup: <a href=https://0xacab.org/muntashir/AppManager class=uri>https://0xacab.org/muntashir/AppManager</a></ol></section><section id=subsec:translations class=level3 data-number=1.3.3><h3 data-number=1.3.3><span class=header-section-number>1.3.3</span>
<a href=#toc:subsec:translations>翻译</a><a href=#subsec:translations class=anchor aria-hidden=true></a></h3><p>App Manager 不接受直接通过PR/MR进行的翻译。翻译仅通过 Weblate
进行自动化管理。 要加入翻译团队，请访问 <a href=https://hosted.weblate.org/engage/app-manager/ class=uri>https://hosted.weblate.org/engage/app-manager/</a>。</section></section><section id=sec:contributing class=level2 data-number=1.4><h2 data-number=1.4><span class=header-section-number>1.4</span> <a href=#toc:sec:contributing>贡献</a><a href=#sec:contributing class=anchor aria-hidden=true></a></h2><p>用户可有通过多种方式做出贡献，如创建有用 issues 、参加讨论、
改进文档和翻译，添加未被认可的库或跟踪器，
审查源代码以及报告安全漏洞。<section id=subsec:build-instructions class=level3 data-number=1.4.1><h3 data-number=1.4.1><span class=header-section-number>1.4.1</span>
<a href=#toc:subsec:build-instructions>构建说明</a><a href=#subsec:build-instructions class=anchor aria-hidden=true></a></h3><p>在位于源码根目录下的BUILDING文件中可以获得编译指导。</section><section id=subsec:submitting-patches class=level3 data-number=1.4.2><h3 data-number=1.4.2><span class=header-section-number>1.4.2</span>
<a href=#toc:subsec:submitting-patches>提交补丁</a><a href=#subsec:submitting-patches class=anchor aria-hidden=true></a></h3><p>除GitHub之外的仓库目前被视为镜像，在这些网站提交的 PR/MR 将不被接受.
<a href=#fn2 class=footnote-ref id=fnref2 role=doc-noteref><sup>2</sup></a> 相反，patches (<code>.patch</code>
文件)
可以通过电子邮件附件提交。<em>请务必对Commits签名(Signing-off)</em>
更多信息请参见位于源码根目录下的CONTRIBUTING文件.<div class="amalert warning"><p><strong><em>注意.</em></strong><p>在通过电子邮件提交补丁是，整个邮件对话在将来可能会被公开访问.
所以，请不要除了您的姓名和电子邮件地址之外，不要包含任何个人身份信息（PII）.</div></section></section><section id=sec:donation-&-funding class=level2 data-number=1.5><h2 data-number=1.5><span class=header-section-number>1.5</span> <a href=#toc:sec:donation-&-funding>捐赠 & 资助</a><a href=#sec:donation-&-funding class=anchor aria-hidden=true></a></h2><p><em>捐赠或购买并不是使用App Manager的必要条件.</em> 虽然 App Manager
不支持任何任何内购, 但可以通过 Open Source Collective 向 App Manager
的所有者发送捐赠.<p>Open Source Collective 是 Open Collective
平台上的一个财政托管机构，以帮助开源项目管理他们的财务状况。
目前，它支持通过银行账户、PayPal、信用卡或借记卡和加密货币发起捐赠.<p><em>Link:</em> <a href=https://opencollective.com/muntashir class=uri>https://opencollective.com/muntashir</a>.<p>通过发送捐款，发送者同意他们不应使用捐款作为筹码来使作者优先考虑其所请求的功能.
请求新功能不需要任何捐赠，且它们的优先级是按作者倾向排序.<p><em>App Manager 接受任何资助的提议</em>
有兴趣的组织的代表可以通过以下方式直接联系联系所有者: §<a href=#sec:contact data-reference-type=ref data-reference=sec:contact>1.6</a>.</section><section id=sec:contact class=level2 data-number=1.6><h2 data-number=1.6><span class=header-section-number>1.6</span> <a href=#toc:sec:contact>联系我们</a><a href=#sec:contact class=anchor aria-hidden=true></a></h2><p>Muntashir Al-Islam<a href=#fn3 class=footnote-ref id=fnref3 role=doc-noteref><sup>3</sup></a><br>邮箱: <a href=mailto:muntashirakon@riseup.net>muntashirakon [at]
riseup [dot] net</a><br>Key Fingerprint:
<code>7bad37c2981e41f8f6abea7f58f0b4f26c346fce</code><br>GitHub: <a href=https://github.com/MuntashirAkon class=uri>https://github.com/MuntashirAkon</a><br>Twitter: <a href=https://twitter.com/Muntashir class=uri>https://twitter.com/Muntashir</a></section></section><section id=ch:pages class=level1 data-number=2><h1 data-number=2><span class=header-section-number>2</span> <a href=#toc:ch:pages>页面</a><a href=#ch:pages class=anchor aria-hidden=true></a></h1><section id=sec:main-page class=level2 data-number=2.1><h2 data-number=2.1><span class=header-section-number>2.1</span> <a href=#toc:sec:main-page>主页</a><a href=#sec:main-page class=anchor aria-hidden=true></a></h2><p>主页面列出所有已安装、已卸载和已备份的应用。
单独点击任何已安装的应用项目可打开相应的 <a href=#sec:app-details-page>应用详情页</a>。
对于未安装的系统应用，它会显示一个 对话框提示，可以用来重新安装该应用。
使用列表选项中的 <a href=#par:main-page-sort>排序</a>
，可以选择应用列表的排序方式，退出应用后仍会保留排序方式。
使用列表选项中的 <a href=#par:main-page-filter>过滤</a>，可以过滤列表选项。
筛选也可以通过搜索栏进行过滤，并支持正则表达式。<p><figure><object data=../images/main_page_entry_info_labeled.svg type=image/svg+xml id=fig:main_page_entry_info_labeled></object></figure><section id=subsec:batch-operations class=level3 data-number=2.1.1><h3 data-number=2.1.1><span class=header-section-number>2.1.1</span>
<a href=#toc:subsec:batch-operations>批处理</a><a href=#subsec:batch-operations class=anchor aria-hidden=true></a></h3><p>批处理也可以在这个页面内进行。
多选模式可以由点击任何应用图标或长按列表中的任何一项进入。
进入后，仅需单击列表中的任何一项便可选中，而不是打开应用程序详情页。
该模式下，批处理操作位于位于页面底部的多选菜单，包括包括：<ul class=incremental><li><p>将选中应用添加到 <a href=#sec:profiles-page>配置</a><li><p><a href=#sec:backup-restore>备份、恢复或删除</a>应用程序<li><p>阻止应用中的追踪器<li><p>清除应用数据或缓存<li><p>启用/停用/强制停止/卸载应用程序<li><p>导出屏蔽规则<li><p>阻止应用的后台操作 (Android 7 及更高版本)<li><p>导出APK文件到 <code>AppManager/apks</code><li><p>设置<a href=#sec:net-policy>联网规则</a></ul><div class="amalert tip"><p><strong><em>无障碍.</em></strong><p>进入多选模式后，键盘或遥控器的左右键呼出多选菜单。</div></section><section id=subsec:main-colour-codes class=level3 data-number=2.1.2><h3 data-number=2.1.2><span class=header-section-number>2.1.2</span>
<a href=#toc:subsec:main-colour-codes>颜色代码含义</a><a href=#subsec:main-colour-codes class=anchor aria-hidden=true></a></h3><ul class=incremental><li><p><span class=colorbox style=background-color:#fceed1><span style=color:#000>浅灰橙(日间模式下)</span></span> / <span class=colorbox style=background-color:#091f36><span style=color:#fff>深蓝(夜间模式下)</span></span> –
多选模式下被选中的应用<li><p><span class=colorbox style=background-color:#ff8a80><span style=color:#000>浅红(日间模式下)</span></span> / <span class=colorbox style=background-color:#4f1c14><span style=color:#fff>深红
(夜间模式下)</span></span> – 停用的应用<li><p><span class=colorbox style=background-color:#ff0><span style=color:#000>黄色星标</span></span> – 可调试的应用<li><p><span style=color:#e05915>橙色 <em>日期</em></span> –
应用可读取日志<li><p><span style=color:#e05915>橙色 <em>UID</em></span> – 用户 ID
在应用间被共享<li><p><span style=color:#e05915>橙色 <em>SDK</em></span> –
使用明文网络通信(如 HTTP)<li><p><span style=color:red>红色 <em>包名</em></span> –
应用禁止清除数据<li><p><span style=color:red>红色<em>备份标识</em></span> –
已卸载的应用存在一个或多个备份<li><p><span style=color:#e05915>橙色<em>备份标识</em></span> –
备份过期, 如基本备份中包含已安装的应用的旧版本<li><p><span style=color:#09868b>深蓝绿色 <em>备份标识</em></span>
– 备份在期, 如基本备份中包含已安装应用的相同或更高版本<li><p><span style=color:#09868b>深蓝绿色 <em>包名</em></span> –
已强行停止运行的应用<li><p><span style=color:#09868b>深蓝绿色 <em>版本</em></span> –
不活跃的应用<li><p><span style=color:#f0f>紫红</span> –
常驻应用(一直运行的应用)</ul></section><section id=subsec:main-page-application-types class=level3 data-number=2.1.3><h3 data-number=2.1.3><span class=header-section-number>2.1.3</span>
<a href=#toc:subsec:main-page-application-types>应用类型</a><a href=#subsec:main-page-application-types class=anchor aria-hidden=true></a></h3><p>一个应用程序可以是 <strong>用户</strong> 或 <strong>系统</strong>
应用，同时存在以下后缀:<ul class=incremental><li><p><code>X</code> – 支持多种架构<li><p><code>0</code> – 不含dex文件<li><p><code>°</code> – 已暂停应用<li><p><code>#</code> –
应用程序请求系统分配一个大堆，即 大运行时内存<li><p><code>?</code> – 应用程序请求虚拟机处于安全模式。</ul></section><section id=subsec:main-page-version-info class=level3 data-number=2.1.4><h3 data-number=2.1.4><span class=header-section-number>2.1.4</span>
<a href=#toc:subsec:main-page-version-info>版本信息</a><a href=#subsec:main-page-version-info class=anchor aria-hidden=true></a></h3><p>版本名称有以下前缀:<ul class=incremental><li><p><code>_</code> – 没有硬件加速（减慢应用中的过渡动画）<li><p><code>~</code> – 仅测试模式<li><p><code>debug</code> – 可调试应用</ul></section><section id=subsec:main-page-options-menu class=level3 data-number=2.1.5><h3 data-number=2.1.5><span class=header-section-number>2.1.5</span>
<a href=#toc:subsec:main-page-options-menu>选项菜单</a><a href=#subsec:main-page-options-menu class=anchor aria-hidden=true></a></h3><p>选项菜单提供了几个选项，可用以对列出的应用程序进行排序和过滤，
以及转到 App Manager 内或外的不同页面。<section id=说明 class=level4 data-number=2.1.5.1><h4 data-number=2.1.5.1><span class=header-section-number>2.1.5.1</span> 说明<a href=#说明 class=anchor aria-hidden=true></a></h4><p>点击 <strong>指南</strong> 打开离线版的App Manager用户手册.
它也可能打开在线版本如果如果相应的功能拆分<code>feat_docs</code>未安装,
或系统 WebView不存在.</section><section id=subsubsec:main-list-options class=level4 data-number=2.1.5.2><h4 data-number=2.1.5.2><span class=header-section-number>2.1.5.2</span> 列表选项<a href=#subsubsec:main-list-options class=anchor aria-hidden=true></a></h4><p><strong>列表选项</strong>
包含了对主页面中的列表进行排序和过滤的选项。<section id=排序 class=level5 data-number=2.1.5.2.1><h5 data-number=2.1.5.2.1><span class=header-section-number>2.1.5.2.1</span> 排序<a href=#排序 class=anchor aria-hidden=true></a></h5><div id=par:main-page-sort></div><p>主页面中列出的应用程序可以按照以下方式进行排序:<ul class=incremental><li><p><strong>用户应用优先</strong> 用户应用将优先展示<li><p><strong>应用标签</strong> 根据应用标签（也称为
<em>应用程序名称</em>）升序排序。(默认选项)<li><p><strong>包名</strong> 根据包名升序排序<li><p><strong>最后更新</strong> 根据更新时间降序排序<li><p><strong>共享 user ID</strong> 根据共享 user ID升序排序<li><p><strong>目标 SDK</strong> 根据目标SDK升序排序<li><p><strong>签名</strong> 根据签名信息升序排序<li><p><strong>已停用优先</strong> 已停用将优先展示<li><p><strong>已阻止优先</strong>
根据已阻止的应用组件数目降序排序<li><p><strong>已备份优先</strong> 已备份将优先展示<li><p><strong>追踪器</strong> 根据追踪器数目降序排序S<li><p><strong>最后操作</strong> 根据被App
Manager操作的应用时间降序排序</ul><p>此外，还有 <em>反转</em> 选项，可以用来对列表进行反向排序。
无论怎样排序偏好，应用程序都是先按字母顺序排序，以防止产生任何随机排序结果.</section><section id=筛选 class=level5 data-number=2.1.5.2.2><h5 data-number=2.1.5.2.2><span class=header-section-number>2.1.5.2.2</span> 筛选<a href=#筛选 class=anchor aria-hidden=true></a></h5><div id=par:main-page-filter></div><p>主页面中列出的应用可以通过以下方式进行过滤:<ul class=incremental><li><p><strong>用户</strong> 仅用户应用<li><p><strong>系统</strong> 仅系统应用<li><p><strong>停用</strong> 仅停用应用<li><p><strong>被阻止</strong> 仅被阻止组件的应用<li><p><strong>可打开</strong> 仅至少有一个Aactivity的应用<li><p><strong>有备份</strong> 仅有备份的应用<li><p><strong>无备份</strong> 仅没有备份的应用<li><p><strong>运行中</strong> 仅正在运行的应用<li><p><strong>有分包</strong> 仅有分包(多Apk)应用<li><p><strong>已安装</strong> 仅已安装应用<li><p><strong>已卸载</strong> 仅已卸载应用</ul><p>与排序不同，它可以同时应用多个过滤选项，
如，停用的用户应用可以通过选择 <em>用户</em>和 <em>停用</em>列出，这对<a href=#subsec:batch-operations>批处理</a>特别有用，在这种情况下过滤用户应用可能是必要的，以便安全地进行某些操作。
Unlike sorting, it is possible to apply more than one filtering options
at the same time. For example, the disabled user applications can be
listed by selecting both <em>User apps</em> and <em>Disabled apps</em>.
This can be particularly useful for <a href=#subsec:batch-operations>batch operations</a> where filtering the
user applications may be necessary to carry out certain operations
safely.</section><section id=配置文件名称 class=level5 data-number=2.1.5.2.3><h5 data-number=2.1.5.2.3><span class=header-section-number>2.1.5.2.3</span> 配置文件名称<a href=#配置文件名称 class=anchor aria-hidden=true></a></h5><p>It is also possible to list the applications that are only present in
a <a href=#sec:profiles-page>profile</a>. This can be useful for
carrying out certain operations on a profile (e.g., uninstalling all the
applications in a profile) that cannot be done via the <a href=#sec:profiles-page>Profiles page</a>.</section></section><section id=subsubsec:main:1-click-ops class=level4 data-number=2.1.5.3><h4 data-number=2.1.5.3><span class=header-section-number>2.1.5.3</span> 一键操作<a href=#subsubsec:main:1-click-ops class=anchor aria-hidden=true></a></h4><p><strong>1-Click Ops</strong> stands for the single-click operations.
It opens the <a href=#sec:1-click-ops-page>corresponding page</a> in a
new activity.</section><section id=应用使用情况 class=level4 data-number=2.1.5.4><h4 data-number=2.1.5.4><span class=header-section-number>2.1.5.4</span> 应用使用情况<a href=#应用使用情况 class=anchor aria-hidden=true></a></h4><p>App usage statistics such as <em>screen time</em>, <em>data
usage</em> (both mobile and Wi-Fi), <em>the number of times an app was
opened</em> can be accessed by clicking on the <strong>App
Usage</strong> option in the menu. However, it requires the <em>Usage
Access</em> permission. This menu item will not be listed if the usage
access feature is disabled in <a href=#subsec:enable/disable-features>settings</a>.</section><section id=系统配置 class=level4 data-number=2.1.5.5><h4 data-number=2.1.5.5><span class=header-section-number>2.1.5.5</span> 系统配置<a href=#系统配置 class=anchor aria-hidden=true></a></h4><p>This menu item opens a new page where various system configurations,
blacklists/whitelists included in Android by the OEM, the vendor, the
AOSP or the Magisk modules are displayed. It requires root. Therefore,
this menu item will not be listed if root permission is unavailable to
App Manager.</section><section id=subsubsec:main:running-apps class=level4 data-number=2.1.5.6><h4 data-number=2.1.5.6><span class=header-section-number>2.1.5.6</span> 正在运行的应用<a href=#subsubsec:main:running-apps class=anchor aria-hidden=true></a></h4><p>This menu item opens a new page where a list of running applications
or processes are displayed. It also displays the current memory and
cache (if available) usage. If root or ADB is not available to App
Manager, it only displays itself in the recent versions of Android. The
running applications or processes can also be force-stopped or killed
within the resultant page. Logs for each process ID (PID) can also be
viewed in the <a href=#subsubsec:log-viewer>log viewer</a>. In
addition, it is also possible to carry out batch operations either by
clicking on the icon or by long-clicking on an item. Normal click on any
items opens a dialog where a more detailed information is displayed.</section><section id=配置文件 class=level4 data-number=2.1.5.7><h4 data-number=2.1.5.7><span class=header-section-number>2.1.5.7</span> 配置文件<a href=#配置文件 class=anchor aria-hidden=true></a></h4><p>This menu item opens the <a href=#sec:profiles-page>profiles
page</a>. Profiles are a way to configure regularly used tasks. They can
also be invoked via shortcuts.</section><section id=subsubsec:log-viewer class=level4 data-number=2.1.5.8><h4 data-number=2.1.5.8><span class=header-section-number>2.1.5.8</span> 日志查看器<a href=#subsubsec:log-viewer class=anchor aria-hidden=true></a></h4><p>此菜单项可打开日志查看器页面，其使用 <code>logcat</code>
命令显示并管理日志. 此页面默认只能显示 App Manager
自身进程的日志记录，但是，
若授予<code>android.permission.READ_LOGS</code>
权限后，则可显示来自所有进程的日志. 若当前<a href=#subsec:mode-of-operation>运行模式</a> 为 root 或
ADB，此权限将自动授予.</section><section id=apk更新器 class=level4 data-number=2.1.5.9><h4 data-number=2.1.5.9><span class=header-section-number>2.1.5.9</span> APK更新器<a href=#apk更新器 class=anchor aria-hidden=true></a></h4><p>若系统中已安装<a href=https://github.com/rumboalla/apkupdater>APK
Updater</a> ，则可通过此菜单项直接打开.
若系统中不存在该应用，则该选项将被隐藏.</section><section id=termux-终端模拟器 class=level4 data-number=2.1.5.10><h4 data-number=2.1.5.10><span class=header-section-number>2.1.5.10</span> Termux 终端模拟器<a href=#termux-终端模拟器 class=anchor aria-hidden=true></a></h4><p>如果系统中已安装<a href=https://github.com/termux/termux-app>Termux</a>
，则可直接从此菜单项运行会话（或 新会话）.
如果应用不存在，则此选项将被隐藏.</section><section id=设置 class=level4 data-number=2.1.5.11><h4 data-number=2.1.5.11><span class=header-section-number>2.1.5.11</span> 设置<a href=#设置 class=anchor aria-hidden=true></a></h4><p>此菜单项将打开本应用的 <a href=#sec:settings-page>设置</a>.</section></section></section><section id=sec:app-details-page class=level2 data-number=2.2><h2 data-number=2.2><span class=header-section-number>2.2</span> <a href=#toc:sec:app-details-page>应用程序详情页</a><a href=#sec:app-details-page class=anchor aria-hidden=true></a></h2><p><strong>应用详情页</strong>由11个标签页组成.几乎描述了一个应用程序的所有信息,
包括清单中的所有属性, <a href=#ch:app-ops>AppOps</a>,签名,原生库等<section id=subsec:app-details-colour-codes class=level3 data-number=2.2.1><h3 data-number=2.2.1><span class=header-section-number>2.2.1</span>
<a href=#toc:subsec:app-details-colour-codes>颜色代码含义</a><a href=#subsec:app-details-colour-codes class=anchor aria-hidden=true></a></h3><p>本页中使用的颜色列表及它们的含义：<ul class=incremental><li><p><span class=colorbox style=background-color:red><span style=color:#000>正红 (日间)</span></span> / <span class=colorbox style=background-color:#790d0d><span style=color:#fff>深红
(夜间)</span></span> – 危险权限或, 被阻止的组件(使用App
Manager操作)<li><p><span class=colorbox style=background-color:#ff8a80><span style=color:#000>亮红 (日间)</span></span> / <span class=colorbox style=background-color:#4f1c14><span style=color:#fff>绯红
(夜间)</span></span> – 被阻止的组件(其他应用操作)<div class="amalert tip"><p><strong><em>注意.</em></strong><p>表示在 App Manager 之外禁用(阻止)的组件,
标记为禁用(阻止)的组件并不意味着它被用户禁用,它也可能是被系统禁用的,
或者在其清单(Android-Manifest.xml)中被标记为禁用(阻止)。被停用的应用程序也会被系统（和App
Manager）视为禁用(阻止)。</div><li><p><span class=colorbox style=background-color:#ff8017><span style=color:#000>鲜橙 (日间)</span></span> / <span class=colorbox style=background-color:#ff801780><span style=color:#fff>深橙 (夜间)</span></span> – 追踪器组件<li><p><span class=colorbox style=background-color:#ea80fc><span style=color:#000>亮紫 (日间)</span></span> / <span class=colorbox style=background-color:#431c5d><span style=color:#fff>深紫 (夜间)</span></span> – 正在运行的组件</ul></section><section id=subsec:app-info-tab class=level3 data-number=2.2.2><h3 data-number=2.2.2><span class=header-section-number>2.2.2</span>
<a href=#toc:subsec:app-info-tab>应用信息</a><a href=#subsec:app-info-tab class=anchor aria-hidden=true></a></h3><p><strong>应用信息</strong> 选项卡包含关于一个应用程序的基本信息,
许多操作可以在此标签中执行.<section id=subsubsec:app-info-general-information class=level4 data-number=2.2.2.1><h4 data-number=2.2.2.1><span class=header-section-number>2.2.2.1</span> 基本信息<a href=#subsubsec:app-info-general-information class=anchor aria-hidden=true></a></h4><p>以下的列表与“应用信息”选项卡中列出的顺序相同.<ul class=incremental><li><p><strong>应用图标</strong>:
应用图标，若应用没有图标，则显示系统默认图标.
可以点击图标，进行与剪贴板中的 SHA 或 MD5 进行 APK 签名验证.<li><p><strong>应用标签</strong>: 应用程序名.<li><p><strong>包名</strong>: 应用程序包名，点击复制.<li><p><strong>版本</strong>: 版本分为两部分: 第一部分称
<em>版本名(Version Name)</em>.
格式各不相同，但常由多个以点分隔的整数组成. 第二部分称 <em>版本号</em>.
其被第一个括号括起来. 版本代码是一个整数，用于 区分应用程序版本
(因为机器无法读取版本名). 简言之,
新版本的应用程序具有比旧版本更高的版本代码. 如，如果 <code>123</code> 和
<code>125</code>
是一个应用程序的两个版本代码，我们可以说后者比前者更新(后者的版本代码更高).
在不同平台（移动、平板、桌面等）或架构（32/64 位、ARM 或
Intel）上为同一版本提供不同 APK
文件的应用程序，版本号可能会产生误导，因为它们通常会为每个平台添加前缀
.<li><p><strong>标签</strong>: (也称标签云)
标签包括应用程序最基本、最简洁、有用的信息，如—<ul class=incremental><li><p><em>追踪器信息</em> 应用程序中跟踪器组件的数量 (如, <em>5
个追踪器</em>).
如果跟踪器未被阻止，则标记颜色显示为橙色，如果跟踪器在App
Manager中被阻止，则标记颜色显示为深青色.
单击标签会打开一个对话框，其包含跟踪器组件列表，如果 App Manager
具有足够的权限，可以阻止或取消阻止这些组件.<li><p><em>应用类型</em>
用户应用或系统应用。系统应用程序的更新版本和通过 Magisk
无系统安装的应用也被认为是系统应用.<li><p><em>Split APK 信息</em> APK 中的拆分包数量，不包括基本 APK (e.g.,
<em>5 分包</em>). 单击标签会打开一个对话框，其中包含分包 APK
信息，例如类型和大小.<li><p><em>可调试</em> 应用可以通过
ADB调试.可调试应用可以享受常规应用无法使用的某些功能. 应用的数据可以通过
ADB 访问 (如使用<code>run-as</code> 命令无需任何额外权限).<li><p><em>仅测试</em> 应用是仅测试应用程序.
仅测试应用可以享受常规应用无法使用的某些功能. 应用的数据可以通过 ADB
访问 (如使用<code>run-as</code> 命令无需任何额外权限).<li><p><em>大(堆/Heap)内存</em> 应用将请求较大的堆内存, 即需要更多内存
(RAM) 空间用于动态分配. 是否为应用程序分配大空间仍由操作系统决定.
如，App Manager 请求较大的堆大小，因为它在 Android 8 之前需要在扫描的
APK 时将整个 APK 加载到内存中App.<li><p><em>无代码</em> 该应用无任何相关代码,如不含Dex文件.
在某些系统应用中，实际代码可能位于其他位置.<li><p><em>运行中</em> 应用的一项或多项服务正在后台运行.
单击标签将打开一个对话框，其中包含正在运行的服务列表.
如果启用了日志查看器功能，单击任何服务会将在日志查看器中它.<li><p><em>已停止</em> 应用被强制停止.
这可能不会阻止它以后自动启动.<li><p><em>已禁用</em> 应用被禁用 (在启动器无图标).<li><p><em>已挂起</em> 表示应用程序已挂起
(在启动器中显示为灰色).<li><p><em>被隐藏</em> 示应用程序是隐藏的 (在启动器无图标).<li><p><em>MagiskHide</em> MagiskHide 已启用.
单击该标签会打开一个对话框，其中包含应用程序中可以从 MagiskHide
添加或删除的进程列表.<li><p><em>MagiskDenyList</em> 该应用程序存在于 MagiskDenyList 中.
单击标签会打开一个对话框，其中包含应用程序中可以从 MagiskDenyList
列表中添加或删除的进程列表.<li><p><em>密匙库</em> 应用在 Android KeyStore 中存有项目.
单击将打开一个对话框，其中包含属于该应用程序的所有 KeyStore
文件.<li><p><em>备份</em> 应用至少使用 App Manager 备份过一次.
单击标签会打开一个对话框，其包含所有可用的备份以及元数据.<li><p><em>不进行电池优化</em> 电池优化对应用不生效.
可以通过单击标签重新启用电池优化.<li><p><a href=#sec:net-policy><em>联网策略</em></a>
为应用配置联网策略（如，后台数据使用）.
单击标签会显示一个对话框，其中包含系统支持的策略.<li><p><a href=#sec:terminologies><em>SSAID</em></a>
点击打开一个对话框，其中包含分配给应用程序的当前
SSAID。若需要可以重置/重新生成 SSAID.<li><p><em>SAF</em>
表示应用已被授权访问一个或多个存储位置或文件，即获得由存储访问框架 (SAF)
的 URI. 单击打开一个对话框，其中包含授予的 URI.<li><p><em>被 Google Play 签名</em> 表示应用程序可能由 Google
签名.</ul><li><p><strong>水平滚动操作面板</strong>
一个操作面板，由可以对应用执行的各种操作组成,
有关可用操作的完整列表，请参阅§<a href=#subsubsec:horizontal-action-panel data-reference-type=ref data-reference=subsubsec:horizontal-action-panel>2.2.2.2</a>.<li><p><strong>路径与目录</strong>: 应用有关路径的各种信息，包括
<em>应用目录</em> (where the APK files reside), <em>数据目录</em>
(internal, device protected and externals), <em>应用分包目录</em> (along
with the split names), and <em>本机原生 JNI 库</em> (如果有). JNI
库用于调用通常用 C/C++ 编写的本机原生代码,
使用本机原生库可以使应用程序运行得更快或帮助应用程序使用使用非 Java
语言编写的第三方库，同大多数游戏中一样.
通过单击每个目录项右侧的启动图标,
可以通过第三方文件管理器打开目录，前提是它们支持并获得必要的权限.<li><p><strong>数据使用</strong>: 操作系统报告的应用程序使用的数据量.
根据 Android 版本，这可能需要广泛的权限，包括 <em>访问应用使用情况</em>
和 <em>电话</em> 权限.<li><p><strong>存储与缓存</strong>: 显示有关应用程序大小（APK
文件、优化文件）、数据和缓存的信息。
在旧设备中，还会显示外部数据、缓存、媒体和 OBB 文件夹的大小.
如果在较新的设备中未授予 <em>访问应用使用情况s</em>
权限，此部分将隐藏.<li><p><strong>更多信息</strong> 例如–<ul class=incremental><li><p><strong>SDK</strong> 显示与 Android SDK 相关的信息.
存在两个（旧设备只有一个）值: <em>最高</em> 目标 SDK 与<em>最低</em>
最低SDK (后者不适用于旧设备). 最佳实践是使用平台当前支持的最大 SDK
的应用程序，以确保应用程序未在兼容模式下运行(以便使用隐私规避功能). SDK
已称为 <strong>等级(API Level)</strong>.<div class=seealso-inline><p><em>See also: <span><a href=https://en.wikipedia.org/wiki/Android_version_history#Overview>Android
Version History</a></span></em></div><li><p><strong>标志位(Flags)</strong>: 构建应用程序时使用的应用标志,
有关标志的完整列表及其作用, 请见<a href=https://developer.android.com/reference/android/content/pm/ApplicationInfo#flags>official
documentation</a>.<li><p><strong>安装日期</strong>: 首次安装应用的日期.<li><p><strong>更新日期</strong>: 上次更新应用程序的日期.
如果应用程序尚未更新，这与 <em>安装日期</em> 相同.<li><p><strong>安装器</strong>: 安装此应用的应用.
并非所有应用程序都提供包管理器用来注册安装程序应用程序的信息.
因此，这个值不应被视为理所当然。<li><p><strong>User ID</strong>: Android系统给应用设置的唯一用户ID.
对于共享应用，相同的用户 ID 被分配给具有相同 <em>Shared User ID</em>
的多个应用程序.<li><p><strong>Shared User ID</strong>: 适用于一起共享ID的应用.
共享应用必须具有相同的 <a href=#subsec:signatures-tab>签名</a>.<li><p><strong>首选ABI</strong>: 此平台为此应用程序支持的架构。<li><p><strong>Zygote preload name</strong>:
负责预加载应用程序代码和在所有使用应用程序 zygote
的隔离服务之间共享的数据.<li><p><strong>隐藏 API 使用策略</strong>: 从 Android 9 开始，Android
Framework 中的许多方法和类第三方应用程序无法通过隐藏 API 强制访问.
存在以下选项:<ul class=incremental><li><p><em>默认(Default</em>: 基于应用的类型。
对于系统应用程序，它应该被禁用，而对于其他应用，它应该被强制执行.<li><p><em>无或关闭(None/disabled)</em>: 该应用可以完全访问隐藏的
API，就像在 Android 9 之前一样.<li><p><em>警告(Warn)</em>: 与上面相同，除了每次应用程序访问隐藏 API
时都会记录警告. 这一般未使用的.<li><p><em>强制(Enforce)</em>: 应用无法访问隐藏的
API，无论是深灰名单还是黑名单，或者两者都无法访问. 这是 Android 9
及更高版本中第三方应用程序的默认选项，除非该应用程序被 OEM
或供应商列入白名单.<div class="amalert warning"><p><strong><em>Warning.</em></strong><p>隐藏 API 访问限制策略在 Android 中没有正确实现，应用程序可以绕过它.
因此，不应信任此值.</div></ul><li><p><strong>SELinux</strong>: 操作系统通过 SELinux 设置的强制访问控制
(MAC) 策略.<li><p><strong>主活动</strong>: 应用的主要入口点. 这仅在应用程序具有 <a href=#subsubsec:activities>活动</a>
并且其中任何一个都可以从启动器中打开时显示.
右侧还有一个启动按钮，可用于启动此活动.</ul></ul></section><section id=subsubsec:horizontal-action-panel class=level4 data-number=2.2.2.2><h4 data-number=2.2.2.2><span class=header-section-number>2.2.2.2</span> 水平操作面板<a href=#subsubsec:horizontal-action-panel class=anchor aria-hidden=true></a></h4><p>如上节所述,水平滚动操作面板由各种与应用相关的操作组成, 如 -<ul class=incremental><li><p><strong>启动</strong>: 启动应用. 前提是要有一个可启动<a href=#subsubsec:activities>活动</a>.<li><p><strong>禁用</strong>: 停用应用.
若应用已被禁用或用户没有足够的权限，则不会显示该按钮.
禁用应用后，将从应用程序列表中隐藏，应用的快捷方式也可能被删除.
只能通过App Manager或任何其他支工具重新启用该应用.
Android设置中没有任何选项可以启用禁用的用户应用.<li><p><strong>卸载</strong>: 卸载应用<li><p><strong>启用</strong>: 启用应用.
若应用已启用或用户没有足够的权限，则不会显示该按钮.<li><p><strong>强制停止</strong>: 强制停止应用.<li><p><strong>清除数据</strong>: 清除应用数据.
清除包括存储在应用内部和（仅Android 10
以上）外部目录中的任何应用数据，包括帐户（如果由应用设置）、缓存等.
例如，清除 App Manager
数据将会删除所有保存的规则（但不会清除已阻止组件），因此你应该检查备份你的规则文件。若用户没有足够的权限，则不会显示此按钮.<li><p><strong>清除缓存</strong>: 清除应用缓存.
没有任何原生方法可以清除特定应用程序的缓存，因此，需要root权限才能清除应用程序内部存储中的缓存.<li><p><strong>安装</strong>: 通过第三方应用安装应用.
此按钮仅在应用尚未安装时显示.<li><p><strong>What’s New</strong>: 若外部应用已安装，则会显示此按钮.
单击此按钮将显示一个对话框，将以版本控制方式，显示打开的版本和安装的版本之间的差异.
包括: <em>版本</em>, <em>追踪器</em>, <em>权限</em>, <em>组件</em>,
<em>签名</em> (校验值改变 ), <em>特性</em>, <em>共享库</em> 与
<em>SDK</em>.<li><p><strong>更新</strong>:
若应用的版本号高于已安装的应用，则会显示.<li><p><strong>重装</strong>:
若应用与已安装的应用具有相同的版本号，则会显示.<li><p><strong>降级</strong>:
若应用的版本号低于已安装的应用，则会显示.<li><p><strong>应用清单(Manifest)</strong>:
单击将在单独的页面中显示应用清单文件.
可以使用对应切换按钮（位于右上方）开启自动换行，也可以使用保存按钮保存到存储器.<li><p><strong>扫描器</strong>: 扫描应用以列出潜在的跟踪器和库.
若可用，它还会使用VirusTotal扫描文件.<br><div class=seealso-inline><p><em>See also: <span><a href=#sec:scanner-page>扫描器页面</a></span></em></div><li><p><strong>共享首选项</strong>:
显示应用程序使用的共享首选项(Shared-Preferences)列表.
单击列表中的首选项将打开<a href=#sec:shared-preferences-editor-page>共享首选项编辑器</a>.
若用户没有足够的权限，则不会显示此按钮.<li><p><strong>数据库</strong>: 将显示应用程序使用的数据库列表.
若用户没有足够的权限，则不会显示此按钮.<li><p><strong>F-Droid</strong>: 在你常用的<em>F-Droid</em>
客户端中打开该应用.<li><p><strong>Store</strong>: 在 <em>Aurora Store</em>打开该应用.
仅在<em>Aurora Store</em>后显示.</ul></section><section id=subsubsec:app-info-options-menu class=level4 data-number=2.2.2.3><h4 data-number=2.2.2.3><span class=header-section-number>2.2.2.3</span> 选项菜单<a href=#subsubsec:app-info-options-menu class=anchor aria-hidden=true></a></h4><p>选项菜单位于页面的右上角, 下面给出了对现有选项的完整描述:<ul class=incremental><li><p><strong>分享</strong>: 共享按钮可用于共享 APK
或(如果应用程序有多个拆分) <em>APKS</em>.<li><p><strong>刷新</strong>: 刷新应用信息选项卡.<li><p><strong>在设置中查看</strong>: 在 Android
设置中打开应用.<li><p><strong>备份/恢复</strong>: 打开备份/恢复对话框.<li><p><strong>导出屏蔽规则</strong>: 导出应用配置规则.<li><p><strong>在 Termux 中打开</strong>: 在 Termux 中打开应用. 实际以
<code>su - user_id</code> 命令运行且该 <code>用户ID</code>
为应用的(内核)用户 ID (参见§<a href=#subsubsec:app-info-general-information data-reference-type=ref data-reference=subsubsec:app-info-general-information>2.2.2.1</a>).
此选项仅适用于 Root 用户. 请参阅 §<a href=#subsubsec:config-termux data-reference-type=ref data-reference=subsubsec:config-termux>2.2.2.4</a> 以了解如何配置
Termux 以运行来自第三方应用的命令.<li><p><strong>在 Termux 中运行</strong>: 在Termux中通过
<code>run-as package_name</code> 打开应用.
此选项仅对可调式应用有效并适用于 Root 与 Adb 用户. 请参阅 §<a href=#subsubsec:config-termux data-reference-type=ref data-reference=subsubsec:config-termux>2.2.2.4</a> 以了解如何配置
Termux 以运行来自第三方应用的命令.<li><p><strong>MagiskHide</strong>:
打开一个对话框，其中包含应用程序中可以从 MagiskHide
列表中添加或删除的进程列表.<li><p><strong>MagiskDenyList</strong>:
打开一个对话框，其中包含应用程序中可以从 MagiskDenyList
添加或删除的进程列表.<li><p><strong>电池优化</strong>: 启用/禁用电池优化.<li><p><a href=#sec:net-policy><strong>联网策略</strong></a>:
配置应用的联网策略（如后台数据使用） .<li><p><strong>导出图标</strong>:
提取应用图标并将其保存至共享存储.<li><p><strong>添加配置</strong>: 应用程序添加到已配置的 <a href=#sec:profile-page>配置文件</a>.</ul></section><section id=subsubsec:config-termux class=level4 data-number=2.2.2.4><h4 data-number=2.2.2.4><span class=header-section-number>2.2.2.4</span> 配置 Termux<a href=#subsubsec:config-termux class=anchor aria-hidden=true></a></h4><p>默认情况下，Termux
不允许运行来自第三方应用的命令。要使用此选项，请使用 Termux v0.96
以上版本，并且必须在 <code>~/.termux/termux.properties</code> 中添加
<code>allow-external-apps=true</code>。<div class="amalert tip"><p><strong><em>Info.</em></strong><p>启用此选项不会削弱Termux的安全性。第三方应用仍然需要取得用户允许才能在Termux中运行任意命令。</div></section></section><section id=subsec:component-tabs class=level3 data-number=2.2.3><h3 data-number=2.2.3><span class=header-section-number>2.2.3</span>
<a href=#toc:subsec:component-tabs>组件选项卡</a><a href=#subsec:component-tabs class=anchor aria-hidden=true></a></h3><p><strong>活动(Activities)</strong>、<strong>服务(Services)</strong>、<strong>广播接收器(Receivers)</strong>和
<strong>内容提供者(Providers)</strong> 统称为应用程序组件.
它们共享在许多相似特征，如，它们都有一个 <em>名称</em>、一个
<em>标签</em>、一个 <em>图标</em> 并且通过 <em>意图(Intent)</em> 执行.
应用程序组件是应用的本构造，必须在应用程序清单中声明.
应用程序清单是存储应用程序特定元数据的文件，Android
通过读取元数据来处理应用。<p>这些选项卡中使用的颜色在 §<a href=#subsec:app-details-colour-codes data-reference-type=ref data-reference=subsec:app-details-colour-codes>2.2.1</a>
中进行了解释。也可以在弹出菜单对列表进行排序.<section id=subsubsec:activities class=level4 data-number=2.2.3.1><h4 data-number=2.2.3.1><span class=header-section-number>2.2.3.1</span> 活动 (Activity)<a href=#subsubsec:activities class=anchor aria-hidden=true></a></h4><p><strong>Activity</strong> 是可以由 Android
唯一标识的窗口或页面(如<em>主页</em> 和 <em>应用详情页</em> 是两个活动).
每个活动可以有多个 UI 组件，称为 <em>部件(widgets)</em> 或
<em>碎片(fragments)</em>，每个组件都可以嵌套或放置在彼此之上.
开发人员还可以选择使用名为<em>意图过滤器(intent
filters)</em>选择打开外部文件、链接等.
如当使用文件管理器打开文件时，文件管理器或操作系统通过 PackageManager
扫描意图过滤器以查找能够打开文件的活动，并用其打开文件.<p>标记<em>exportable</em> 的活动通常可以由任何第三方应用程序打开.
有些活动需要权限，如果是这种情况，只有具有这些权限的应用程序才能打开. 在
<em>活动</em> 选项卡中，可以通过 <strong>启动</strong> 按钮启动，
若有必要可提供额外信息，如意图(Intent)的 extras、data或Action. 长按
<strong>启动</strong> 按钮会打开提供此类功能的 <a href=#sec:interceptor-page>Activity Interceptor</a> 页面.<div class="amalert tip"><p><strong><em>Notice.</em></strong><p>如果您无法打开任何活动，则很可能它具有某些未满足的依赖项目，例如<em>应用详情页</em>
，由于其至少需要提供一包名.
由于无法机械式推断这些依赖关系，因此默认情况下可能无法通过 App Manager
打开这些活动.</div><p>也可以通过 <strong>创建快捷方式</strong> 按钮来创建活动的快捷方式<div class="amalert danger"><p><strong><em>Caution.</em></strong><p>如果您卸载App Manager，应用管理器创建的所有快捷方式都将丢失.</div></section><section id=subsubsec:details:servcies class=level4 data-number=2.2.3.2><h4 data-number=2.2.3.2><span class=header-section-number>2.2.3.2</span> 服务 (Services)<a href=#subsubsec:details:servcies class=anchor aria-hidden=true></a></h4><p>Unlike <a href=#subsubsec:activities>activities</a> that users can
see, <strong>Services</strong> handle background tasks. For example, if
you’re downloading a video from the internet using your phone’s Internet
browser, the Internet browser is using a <em>foreground service</em> to
download the content.<p>When an activity is closed or removed from the <em>Recents</em>
section, it may be destroyed immediately depending on many factors such
as how much free memory the phone has. But services can be run
indefinitely if desired. If more services are run in background, the
phone may become slower due to the shortage of memory and/or processing
power, and the phone’s battery will be drained more quickly. Newer
Android versions have a battery optimisation feature enabled by default
for all applications. With this feature enabled, the system can randomly
terminate any service. However, foreground services (i.e. services that
runs with a fixed notification such as music player) are not typically
terminated unless the system is low on resources (memory, battery,
etc.). Vendor-specific stock ROMs can offer more aggressive
optimisation. MIUI, for example, has a very aggressive optimisation
feature known as <em>MIUI optimisation</em>.<p>Both activities and services are run in the same <a href=https://stackoverflow.com/questions/7597742>looper</a> called the
main looper, which means the services are not really run in the
background. It is the task of the developer to ensure this. How do the
application communicate with the service? It uses <a href=#subsubsec:app-details-receivers>broadcast receiver</a> or
Binder.</section><section id=subsubsec:app-details-receivers class=level4 data-number=2.2.3.3><h4 data-number=2.2.3.3><span class=header-section-number>2.2.3.3</span> (广播)接收器
((Broadcast)Receiver)<a href=#subsubsec:app-details-receivers class=anchor aria-hidden=true></a></h4><p><strong>Receivers</strong> (also called <em>broadcast receivers</em>)
can be used to trigger execution of certain tasks when certain events
occur. These components are called broadcast receivers because they are
executed as soon as a broadcast message is received. These broadcast
messages are sent using a method called <em>Intent</em>. Intent is a
special feature in Android that can be used to open applications
(i.e. activities), run services and send broadcast messages. Therefore,
like <a href=#subsubsec:activities>activities</a>, broadcast receivers
use <em>intent filters</em> to receive the desired broadcast messages.
Broadcast messages can be sent by the system or the application itself.
When a broadcast message is sent, the corresponding receivers are
activated by the system so that they can execute tasks. For example, if
your phone is low on resources, it may freeze or experience lags for a
moment after you enable mobile data or connect it to the Wi-Fi. This is
because broadcast receivers that can receive
<code>android.net.conn.CONNECTIVITY_CHANGE</code> are activated by the
system as soon as the data connection is enabled. Since many
applications typically use this intent filter, they are all activated
almost immediately by the system which causes the freezing or lags.<p>Receivers can also be used for inter-process communication (IPC),
i.e. it can be used to communicate acrosss multiple applications or even
different components of a single application.</section><section id=subsubsec:providers class=level4 data-number=2.2.3.4><h4 data-number=2.2.3.4><span class=header-section-number>2.2.3.4</span> (内容)提供者
((Content)Providers)<a href=#subsubsec:providers class=anchor aria-hidden=true></a></h4><p><strong>Providers</strong> (also called <em>content providers</em>)
are used for data management. For example, when you save an APK file or
export rules in App Manager, it uses a content provider called
<code>.fm.FmProvider</code> to save the APK or export the rules. There
are many content providers, including the ones provided by the system,
to manage various content-related tasks such as database management,
tracking, searching, etc. Each content provider has a field called
<em>Authority</em> which is unique to the application in the entire
Android ecosystem just as the package name.</section><section id=针对已root的手机的额外功能 class=level4 data-number=2.2.3.5><h4 data-number=2.2.3.5><span class=header-section-number>2.2.3.5</span>
针对已root的手机的额外功能<a href=#针对已root的手机的额外功能 class=anchor aria-hidden=true></a></h4><p>Unlike the no-root users who are mostly spectators in these tabs,
root users can perform various operations.<section id=阻止组件 class=level5 data-number=2.2.3.5.1><h5 data-number=2.2.3.5.1><span class=header-section-number>2.2.3.5.1</span> 阻止组件<a href=#阻止组件 class=anchor aria-hidden=true></a></h5><p>On the right-most side of each component item, there is a “block”
icon (which becomes a “unblock/restore” icon when the component is being
blocked). This icon (actually, a button) can be used to toggle the
blocking status of that particular component. If <a href=#subsubsec:instant-component-blocking>Instant Component
Blocking</a> is not enabled or blocking is never applied to the
application before, it is required to apply the changes using the
<strong>Apply rules</strong> option in three-dots menu. It is also
possible to remove the already-applied rules using the same option
(which would be read as <strong>Remove rules</strong> this time).<p>It is also possible to block the component using one of the several
method by long clicking on the icon.<div class=seealso-inline><p><em>See also: <span><a href=#sec:faq:app-components>FAQ: App
Components</a></span></em></div></section><section id=par:appdetails:blocking-trackers class=level5 data-number=2.2.3.5.2><h5 data-number=2.2.3.5.2><span class=header-section-number>2.2.3.5.2</span> 阻止跟踪器<a href=#par:appdetails:blocking-trackers class=anchor aria-hidden=true></a></h5><p>It is possible to disable tracker components using the <strong>Block
tracker</strong> option in the three-dots menu. All tracker components
will be blocked regardless of the tab you’re currently in.<div class="amalert tip"><p><strong><em>Info.</em></strong><p>Tracker components are a subset of application components. Therefore,
they are blocked using the same method used for blocking any other
components.</div><div class=seealso><p><em>See also:</em><ul class=incremental><li><p><a href=#subsec:tracker-classes-versus-tracker-components>FAQ:
Tracker classes versus tracker components</a><li><p><a href=#sec:scanner-page>Scanner Page</a><li><p><a href=#subsec:block-unblock-trackers>1-Click Ops Page:
Block/Unblock Trackers</a></ul></div></section></section></section><section id=subsec:permission-tabs class=level3 data-number=2.2.4><h3 data-number=2.2.4><span class=header-section-number>2.2.4</span>
<a href=#toc:subsec:permission-tabs>权限选项卡</a><a href=#subsec:permission-tabs class=anchor aria-hidden=true></a></h3><p><strong>App Ops</strong>, <strong>Uses Permissions</strong> and
<strong>Permissions</strong> tabs are related to permissions. In Android
communication across applications or processes which do not have the
same identity (known as <em>shared ID</em>) often require permissions.
These permissions are managed by the permission controller. Some
permissions are considered <em>normal</em> permissions which are granted
automatically if they appear in the application manifest, but
<em>dangerous</em> and <em>development</em> permissions require
confirmation from the user. Colours used in these tabs are explained in
§<a href=#subsec:app-details-colour-codes data-reference-type=ref data-reference=subsec:app-details-colour-codes>2.2.1</a>.<section id=subsubsec:app-ops class=level4 data-number=2.2.4.1><h4 data-number=2.2.4.1><span class=header-section-number>2.2.4.1</span> App Ops<a href=#subsubsec:app-ops class=anchor aria-hidden=true></a></h4><p><strong>App Ops</strong> stands for <strong>Application
Operations</strong>. Since Android 4.3, <em>App Ops</em> are used by
Android to control many system permissions. Each app op has a unique
number associated with it which is displayed along with the private name
of the operation in the App Ops tab. Some app ops also have a public
name. A large number of app ops are also associated with
<em>permissions</em>. In this tab, an app op is considered dangerous if
its associated permission is marked as dangerous. Other information such
as <em>flags</em>, <em>permission name</em>, <em>permission
description</em>, <em>package name</em>, <em>group</em> are also taken
from the associated <a href=#subsubsec:permissions>permission</a>.
Others may include the following:<ul class=incremental><li><p><strong>Mode.</strong> It describes the current authorisation
status which can be <em>allow</em>, <em>deny</em> (a rather misnomer, it
simply means error), <em>ignore</em> (it actually means deny),
<em>default</em> (inferred from a list of defaults set internally by the
vendor or the AOSP), <em>foreground</em> (in newer Android versions, it
means the app op can only be used when the application is running in
foreground), and some custom modes set by the vendors (MIUI uses
<em>ask</em>, for example).<li><p><strong>Duration.</strong> The amount of time this application op
has been used (there can be negative durations whose use cases are
currently unknown to me).<li><p><strong>Accept Time.</strong> Last time the app op was
accepted.<li><p><strong>Reject Time.</strong> Last time the app op was
rejected.</ul><div class="amalert tip"><p><strong><em>Info.</em></strong><p>Contents of this tab are visible to no-root users if
<code>android.permission.GET_APP_OPS_STATS</code> is granted via
ADB.</div><p>There is a toggle button next to each app op item which can be used
to allow or deny (ignore) it. Other supported modes can also be set by
long clicking on the toggle button. If the desired app op is not listed
in the tab, <em>Set custom app op</em> option in the menu can be used
instead. It is also possible to reset the changes using the <em>Reset to
default</em> option, or deny all the dangerous app ops using the
corresponding option in the menu. Due to the nature how app ops work,
the system may take some time to apply them.<div class="amalert tip"><p><strong><em>Tip.</em></strong><p>Denying certain app ops may cause the application to misbehave. If
all attempts fail, <em>reset to default</em> option can be used as the
last resort.</div><p>It is possible to sort the list in ascending order by app op names
and the associated unique numbers (or values), or list the denied app
ops first using the corresponding sorting options.<div class=seealso-inline><p><em>See also: <span><a href=#ch:app-ops>Appendix: App
Ops</a></span></em></div></section><section id=使用权限 class=level4 data-number=2.2.4.2><h4 data-number=2.2.4.2><span class=header-section-number>2.2.4.2</span> 使用权限<a href=#使用权限 class=anchor aria-hidden=true></a></h4><p><strong>Uses Permissions</strong> are the permissions used by the
application. This is named so because they are specified in the manifest
using <code>uses-permission</code> tags. Information such as
<em>flags</em>, <em>permission name</em>, <em>permission
description</em>, <em>package name</em>, <em>group</em> are taken from
the associated <a href=#subsubsec:permissions>permission</a>.<p>Privileged users can grant or revoke the <em>dangerous</em> and
<em>development</em> permissions via the toggle button on the right side
of each permission item. It is also possible revoke dangerous
permissions all at once using the corresponding option in the menu. Only
these two types of permissions can be revoked because Android does not
allow the modification of <em>normal</em> permissions (which most of
them are). It might still be possible to revoke them by editing
<code>runtime-permissions.xml</code> itself, but whether this is a
possibility is still being investigated.<div class="amalert tip"><p><strong><em>Info.</em></strong><p>Since dangerous permissions are revoked by default by the system,
revoking all dangerous permissions is the same as resetting all the
permissions.</div><p>It is possible to sort the permissions by their name (in ascending
order) or choose to display denied or dangerous permissions at first
using the corresponding options in the menu.</section><section id=subsubsec:permissions class=level4 data-number=2.2.4.3><h4 data-number=2.2.4.3><span class=header-section-number>2.2.4.3</span> 权限<a href=#subsubsec:permissions class=anchor aria-hidden=true></a></h4><p><strong>Permissions</strong> are usually custom permissions defined
by the application itself. These type of permissions are marked as
<em>Internal</em> permissions. It also contains permissions declared in
other applications which are marked as <em>External</em> permissions.
External permissions are specified in the application components as the
dependencies i.e. an application may invoke the component only if holds
the specified permission. Here’s a complete description of each item
that is displayed there:<ul class=incremental><li><p><strong>Name.</strong> Each permission has a unique name like
<code>android.permission.INTERNET</code> but multiple applications can
request the same permission.<li><p><strong>Icon.</strong> Each permission can have a custom icon.
The other permission tabs do not have any icon because they do not
contain any icon in the application manifest.<li><p><strong>Description.</strong> This optional field describes the
permission. If there isn’t any description associated with the
permission, the field is not displayed.<li><p><strong>Flags.</strong> (Uses the flag symbol or
<strong>Protection Level</strong> name) This describes various
permission flags such as <em>normal</em>, <em>development</em>,
<em>dangerous</em>, <em>instant</em>, <em>granted</em>,
<em>revoked</em>, <em>signature</em>, <em>privileged</em>, etc.<li><p><strong>Package Name.</strong> Denotes the package name
associated with the permission, i.e. the package that defined the
permission.<li><p><strong>Group.</strong> The group name associated with the
permission (if any). Several related permissions can often be grouped
together.</ul></section></section><section id=subsec:signatures-tab class=level3 data-number=2.2.5><h3 data-number=2.2.5><span class=header-section-number>2.2.5</span>
<a href=#toc:subsec:signatures-tab>签名选项卡</a><a href=#subsec:signatures-tab class=anchor aria-hidden=true></a></h3><p><strong>Signatures</strong> are actually called signing information.
An application is signed using one or more signing certificates by the
application developers before publishing it. The integrity of an
application i.e. whether the application is from the actual developer
and isn’t modified by other people can be checked using the signing
information; because when an application is modified by an unauthorised
entity, the application cannot be signed using the original certificates
again because the signing information are kept private by the actual
developer. Signing information can be verified using checksums.
Checksums are generated from the certificates themselves. If the
developer supplies the checksums for the signing certificates, they can
be matched against the checksums generated in the
<strong>Signatures</strong> tab to verify the application. For example,
if you have downloaded App Manager from GitHub or Telegram Channel, you
can verify whether the application is actually released by me by simply
matching the following <em>SHA256</em> checksum with the one displayed
in this tab:<pre><code>320c0c0fe8cef873f2b554cb88c837f1512589dcced50c5b25c43c04596760ab</code></pre><p>Several hashing algorithms are used to generate checksums in this
tab. They include <em>MD5</em>, <em>SHA1</em>, <em>SHA256</em> and
<em>SHA512</em>.<div class="amalert danger"><p><strong><em>Caution.</em></strong><p>Signing information should be verified using a reliable hashing
algorithm such as <em>SHA256</em>. DO NOT rely on <em>MD5</em> or
<em>SHA1</em> checksums as they are known to generate the same checksums
for multiple certificates.</div></section><section id=subsec:shared-libs-tab class=level3 data-number=2.2.6><h3 data-number=2.2.6><span class=header-section-number>2.2.6</span>
<a href=#toc:subsec:shared-libs-tab>共享库选项卡</a><a href=#subsec:shared-libs-tab class=anchor aria-hidden=true></a></h3><p><strong>Shared libraries</strong> tab lists all the legacy JAR
dependencies as well as JNI (Java native interface) libraries. For JNI
libraries, it specifies platform (x86/x86_64/ARM/AArch64), architecture
(32/64 bit), object type (shared object or executable), etc.</section><section id=subsec:other-tabs class=level3 data-number=2.2.7><h3 data-number=2.2.7><span class=header-section-number>2.2.7</span>
<a href=#toc:subsec:other-tabs>其他选项卡</a><a href=#subsec:other-tabs class=anchor aria-hidden=true></a></h3><p>Other tabs list android manifest components such as features and
configurations. A complete description about these tabs will be
available soon.</section></section><section id=sec:1-click-ops-page class=level2 data-number=2.3><h2 data-number=2.3><span class=header-section-number>2.3</span> <a href=#toc:sec:1-click-ops-page>一键操作页</a><a href=#sec:1-click-ops-page class=anchor aria-hidden=true></a></h2><p>This page appears after clicking on the <a href=#subsubsec:main:1-click-ops>1-Click Ops option</a> in the <a href=#subsec:main-page-options-menu>main menu</a>.<section id=subsec:block-unblock-trackers class=level3 data-number=2.3.1><h3 data-number=2.3.1><span class=header-section-number>2.3.1</span>
<a href=#toc:subsec:block-unblock-trackers>Block/Unblock
Trackers</a><a href=#subsec:block-unblock-trackers class=anchor aria-hidden=true></a></h3><p>This option can be used to block or unblock the ad/tracker components
from the installed apps. After you click on this option, you will be
asked to select if AM will list trackers from all apps or only from the
user apps. Novice users should avoid blocking trackers from the system
apps in order to avoid consequences. After that, a multi-choice dialog
box will appear where you can deselect the apps you want to exclude from
this operation. Clicking <em>block</em> or <em>unblock</em> applies the
changes immediately.<div class="amalert warning"><p><strong><em>Notice.</em></strong><p>Certain apps may not function as expected after applying the
blocking. If that is the case, remove blocking rules all at once or one
by one in the component tabs of the corresponding <a href=#sec:app-details-page>App Details page</a>.</div><div class=seealso><p><em>See also:</em><ul class=incremental><li><p><a href=#subsec:faq:how-to-unblock-tracker-components>How to
unblock the tracker components blocked using 1-Click Ops or Batch
Ops?</a><li><p><a href=#par:appdetails:blocking-trackers>App Details Page:
Blocking Trackers</a></ul></div></section><section id=subsec:block-components-dots class=level3 data-number=2.3.2><h3 data-number=2.3.2><span class=header-section-number>2.3.2</span>
<a href=#toc:subsec:block-components-dots>Block Components…</a><a href=#subsec:block-components-dots class=anchor aria-hidden=true></a></h3><p>This option can be used to block certain app components denoted by
the signatures. App signature is the full name or partial name of the
components. For safety, it is recommended that you should add a
<code>.</code> (dot) at the end of each partial signature name as the
algorithm used here chooses all matched components in a greedy manner.
You can insert more than one signature in which case all signatures have
to be separated by spaces. Similar to the option above, there is an
option to apply blocking to system apps as well.<div class="amalert danger"><p><strong><em>Caution.</em></strong><p>If you are not aware of the consequences of blocking app components
by signature(s), you should avoid using this setting as it may result in
boot loop or soft brick, and you may have to apply factory reset in
order to use your OS.</div></section><section id=subsec:set-mode-for-app-ops-dots class=level3 data-number=2.3.3><h3 data-number=2.3.3><span class=header-section-number>2.3.3</span>
<a href=#toc:subsec:set-mode-for-app-ops-dots>Set Mode for App
Ops…</a><a href=#subsec:set-mode-for-app-ops-dots class=anchor aria-hidden=true></a></h3><p>This option can be used to configure certain <a href=#ch:app-ops>app operations</a> of all or selected apps. You can
insert more than one app op constants separated by spaces. It is not
always possible to know in advance about all the app op constants as
they vary from device to device and from OS to OS. To find the desired
app op constant, browse the <em>App Ops</em> tab in the <a href=#sec:app-details-page>App Details page</a>. The constants are
integers closed inside brackets next to each app op name. You can also
use the app op names. You also have to select one of the <a href=#subsec:mode-constants>modes</a> that will be applied against the
app ops.<div class="amalert danger"><p><strong><em>Caution.</em></strong><p>Unless you are well-informed about app ops and the consequences of
blocking them, you should avoid using this feature as it may result in
boot loop or soft brick, and you may have to apply factory reset in
order to use your OS.</div></section><section id=subsec:1-click-back-up class=level3 data-number=2.3.4><h3 data-number=2.3.4><span class=header-section-number>2.3.4</span>
<a href=#toc:subsec:1-click-back-up>备份</a><a href=#subsec:1-click-back-up class=anchor aria-hidden=true></a></h3><p>1-Click options for back up. As a precaution, it lists the affected
backups before performing any operation.<section id=back-up-all-apps. class=level5 data-number=2.3.4.0.1><h5 data-number=2.3.4.0.1><span class=header-section-number>2.3.4.0.1</span> Back up all apps.<a href=#back-up-all-apps. class=anchor aria-hidden=true></a></h5><p>Back up all the installed apps.</section><section id=redo-existing-backups. class=level5 data-number=2.3.4.0.2><h5 data-number=2.3.4.0.2><span class=header-section-number>2.3.4.0.2</span> Redo existing backups.<a href=#redo-existing-backups. class=anchor aria-hidden=true></a></h5><p>Back up all the installed apps that have a previous backup.</section><section id=back-up-apps-without-backups. class=level5 data-number=2.3.4.0.3><h5 data-number=2.3.4.0.3><span class=header-section-number>2.3.4.0.3</span> Back up apps without
backups.<a href=#back-up-apps-without-backups. class=anchor aria-hidden=true></a></h5><p>Back up all the installed apps without a previous backup.</section><section id=verify-and-redo-backups. class=level5 data-number=2.3.4.0.4><h5 data-number=2.3.4.0.4><span class=header-section-number>2.3.4.0.4</span> Verify and redo
backups.<a href=#verify-and-redo-backups. class=anchor aria-hidden=true></a></h5><p>Verify the recently made backups of the installed apps and redo
backup if necessary.</section><section id=back-up-apps-with-changes. class=level5 data-number=2.3.4.0.5><h5 data-number=2.3.4.0.5><span class=header-section-number>2.3.4.0.5</span> Back up apps with
changes.<a href=#back-up-apps-with-changes. class=anchor aria-hidden=true></a></h5><p>If an app has changed since the last backup, redo backup for it. It
checks a number of indices including app version, last update date, last
launch date, integrity and file hashes. Directory hashes are taken
during the back up and stored in a database. On running this operation,
new hashes are taken and compared with the ones kept in the
database.</section></section><section id=subsec:1-click-restore class=level3 data-number=2.3.5><h3 data-number=2.3.5><span class=header-section-number>2.3.5</span>
<a href=#toc:subsec:1-click-restore>恢复</a><a href=#subsec:1-click-restore class=anchor aria-hidden=true></a></h3><p>1-Click options for restore. As a precaution, it lists the affected
backups before performing any operation.<section id=restore-all-apps. class=level5 data-number=2.3.5.0.1><h5 data-number=2.3.5.0.1><span class=header-section-number>2.3.5.0.1</span> Restore all apps.<a href=#restore-all-apps. class=anchor aria-hidden=true></a></h5><p>Restore <em>base backup</em> of all the backed up apps.</section><section id=restore-not-installed-apps. class=level5 data-number=2.3.5.0.2><h5 data-number=2.3.5.0.2><span class=header-section-number>2.3.5.0.2</span> Restore not installed
apps.<a href=#restore-not-installed-apps. class=anchor aria-hidden=true></a></h5><p>Restore <em>base backup</em> of all the backed up apps that are not
currently installed.</section><section id=restore-latest-backups. class=level5 data-number=2.3.5.0.3><h5 data-number=2.3.5.0.3><span class=header-section-number>2.3.5.0.3</span> Restore latest backups.<a href=#restore-latest-backups. class=anchor aria-hidden=true></a></h5><p>Restore <em>base backup</em> of already installed apps whose version
codes are higher than the installed version code.</section></section></section><section id=sec:profiles-page class=level2 data-number=2.4><h2 data-number=2.4><span class=header-section-number>2.4</span> <a href=#toc:sec:profiles-page>配置文件页面</a><a href=#sec:profiles-page class=anchor aria-hidden=true></a></h2><p>Profiles page can be accessed from the options-menu in the main page.
It displays a list of configured profiles. Profiles can be added using
the <em>plus</em> button at the bottom-right corner, imported from the
import option, created from one of the presets or even duplicated from
an already existing profile. Clicking on any profile opens the <a href=#sec:profile-page>profile page</a>.<section id=subsec:profiles-options-menu class=level3 data-number=2.4.1><h3 data-number=2.4.1><span class=header-section-number>2.4.1</span>
<a href=#toc:subsec:profiles-options-menu>选项菜单</a><a href=#subsec:profiles-options-menu class=anchor aria-hidden=true></a></h3><p>There are two options menu in this page. The three dots menu at the
top-right offers two options such as <em>presets</em> and
<em>import</em>.<ul class=incremental><li><p><strong>Presets.</strong> Presets option lists a number of
built-in profiles that can be used as a starting point. The profiles are
generated from the project <a href=https://gitlab.com/W1nst0n/universal-android-debloater>Universal
Android Debloater</a>.<br><div class=seealso-inline><p><em>See also: <span><a href=#subsec:faq:what-are-bloatware>FAQ:
What are bloatware and how to remove them?</a></span></em></div><li><p><strong>Import.</strong> This option can be used to import an
existing profile.</ul><p>Another options menu appears when you long click on any profile. They
have options such as–<ul class=incremental><li><p><strong>Apply now….</strong> This option can be used to apply the
profile directly. When clicked, a dialog will be displayed where you can
select a <a href=#subsubsec:profile-state>profile state</a>. On
selecting one of the options, the profile will be applied
immediately.<li><p><strong>Delete.</strong> Clicking on delete will remove the
profile immediately without any warning.<li><p><strong>Duplicate.</strong> This option can be used to duplicate
the profile. When clicked, an input box will be displayed where you can
set the profile name. If you click “OK”, a new profile will be created
and the <a href=#sec:profile-page>profile page</a> will be loaded. The
profile will not be saved until you save it manually.<li><p><strong>Export.</strong> Export the profile to an external
storage. Profile exported this way can be imported using the
<em>import</em> option in the three dots menu.<li><p><strong>Create shortcut.</strong> This option can be used to
create a shortcut for the profile. When clicked, there will be two
options: <em>Simple</em> and <em>Advanced</em>. The latter option allows
you to set the profile state before applying it while the former option
use the default state that was configured when the profile was last
saved.</ul></section></section><section id=sec:profile-page class=level2 data-number=2.5><h2 data-number=2.5><span class=header-section-number>2.5</span> <a href=#toc:sec:profile-page>配置页</a><a href=#sec:profile-page class=anchor aria-hidden=true></a></h2><p>Profile page displays the configurations for a profile. It also
offers editing them.<div class="amalert tip"><p><strong><em>Notice.</em></strong><p>When you apply a profile, if some packages do not match the criteria,
they will simply be ignored.</div><section id=subsec:profile-options-menu class=level3 data-number=2.5.1><h3 data-number=2.5.1><span class=header-section-number>2.5.1</span>
<a href=#toc:subsec:profile-options-menu>选项菜单</a><a href=#subsec:profile-options-menu class=anchor aria-hidden=true></a></h3><p>The three dots menu on the top-right corner opens the options-menu.
It contains several options such as–<ul class=incremental><li><p><strong>Apply.</strong> This option can be used to apply the
profile. When clicked, a dialog will be displayed where you can select a
<a href=#subsubsec:profile-state>profile state</a>. On selecting one
of the options, the profile will be applied immediately.<li><p><strong>Save.</strong> Allows you to save the profile.<div class="amalert warning"><p><strong><em>Notice.</em></strong><p>Changes are never saved automatically. You have to save them manually
from here.</div><li><p><strong>Discard.</strong> Discard any modifications made since
the last save.<li><p><strong>Delete.</strong> Clicking on delete will remove the
profile immediately without any warning.<li><p><strong>Duplicate.</strong> This option can be used to duplicate
the profile. When clicked, an input box will be displayed where you can
set the profile name. If you click “OK”, a new profile will be created,
and the page will be reloaded. The profile will not be saved until you
save it manually.<li><p><strong>Create shortcut.</strong> This option can be used to
create a shortcut for the profile. When clicked, there will be two
options: <em>Simple</em> and <em>Advanced</em>. The latter option allows
you to set the profile state before applying it while the former option
uses the default state that was configured when the profile was last
saved.</ul></section><section id=subsec:profile-apps-tab class=level3 data-number=2.5.2><h3 data-number=2.5.2><span class=header-section-number>2.5.2</span>
<a href=#toc:subsec:profile-apps-tab>应用程序选项卡</a><a href=#subsec:profile-apps-tab class=anchor aria-hidden=true></a></h3><p>Apps tab lists the packages configured under this profile. Packages
can be added or removed using the <em>plus</em> button located near the
bottom of the screen. Packages can also be removed by long clicking on
them (in which case, a popup will be displayed with the only option
<em>delete</em>).</section><section id=subsec:profile-configurations-tab class=level3 data-number=2.5.3><h3 data-number=2.5.3><span class=header-section-number>2.5.3</span>
<a href=#toc:subsec:profile-configurations-tab>配置选项卡</a><a href=#subsec:profile-configurations-tab class=anchor aria-hidden=true></a></h3><p>Configurations tab can be used to configure the selected packages.
Description of each item is given below:<section id=备注 class=level4 data-number=2.5.3.1><h4 data-number=2.5.3.1><span class=header-section-number>2.5.3.1</span> 备注<a href=#备注 class=anchor aria-hidden=true></a></h4><p>This is the text that will be displayed in the <a href=#sec:profiles-page>profiles page</a>. If not set, the current
configurations will be displayed instead.</section><section id=subsubsec:profile-state class=level4 data-number=2.5.3.2><h4 data-number=2.5.3.2><span class=header-section-number>2.5.3.2</span> 状态<a href=#subsubsec:profile-state class=anchor aria-hidden=true></a></h4><p>Denotes how certain configured options will behave. For instance, if
<em>disable</em> option is turned on, the apps will be disabled if the
state is <em>on</em> and will be enabled if the state is <em>off</em>.
Currently state only support <em>on</em> and <em>off</em> values.</section><section id=用户 class=level4 data-number=2.5.3.3><h4 data-number=2.5.3.3><span class=header-section-number>2.5.3.3</span> 用户<a href=#用户 class=anchor aria-hidden=true></a></h4><p>Select users for which is the profile will be applied. All users are
selected by default.</section><section id=组件 class=level4 data-number=2.5.3.4><h4 data-number=2.5.3.4><span class=header-section-number>2.5.3.4</span> 组件<a href=#组件 class=anchor aria-hidden=true></a></h4><p>This behaves the same way as the <a href=#subsec:block-components-dots>Block Components…</a> option does
in the 1-Click Ops page. However, this only applies for the selected
packages. If the <a href=#subsubsec:profile-state>state</a> is
<em>on</em>, the components will be blocked, and if the state is
<em>off</em>, the components will be unblocked. The option can be
disabled (regardless of the inserted values) by clicking on the
<em>disabled</em> button on the input dialog.<div class=seealso-inline><p><em>See also: <span><a href=#subsec:faq:what-are-app-components>What are the app
components?</a></span></em></div></section><section id=appops-权限 class=level4 data-number=2.5.3.5><h4 data-number=2.5.3.5><span class=header-section-number>2.5.3.5</span> AppOps 权限<a href=#appops-权限 class=anchor aria-hidden=true></a></h4><p>This behaves the same way as the <a href=#subsec:set-mode-for-app-ops-dots>Set Mode for App Ops…</a>
option does in the 1-Click Ops page. However, this only applies for the
selected packages. If the <a href=#subsubsec:profile-state>state</a>
is <em>on</em>, the app ops will be denied (ie. ignored), and if the
state is <em>off</em>, the app ops will be allowed. The option can be
disabled (regardless of the inserted values) by clicking on the
<em>disabled</em> button on the input dialog.</section><section id=权限 class=level4 data-number=2.5.3.6><h4 data-number=2.5.3.6><span class=header-section-number>2.5.3.6</span> 权限<a href=#权限 class=anchor aria-hidden=true></a></h4><p>This option can be used to grant or revoke certain permissions from
the selected packages. Like others above, permissions must be separated
by spaces. If the <a href=#subsubsec:profile-state>state</a> is
<em>on</em>, the permissions will be revoked, and if the state is
<em>off</em>, the permissions will be allowed. The option can be
disabled (regardless of the inserted values) by clicking on the
<em>disabled</em> button on the input dialog.</section><section id=备份恢复 class=level4 data-number=2.5.3.7><h4 data-number=2.5.3.7><span class=header-section-number>2.5.3.7</span> 备份/恢复<a href=#备份恢复 class=anchor aria-hidden=true></a></h4><p>This option can be used to take a backup of the selected apps and its
data or restore them. There two options available there: <em>Backup
options</em> and <em>backup name</em>.<ul class=incremental><li><p><strong>Backup options.</strong> Same as the <a href=#subsec:backup-restore-backup-options>backup options</a> of the
backup/restore feature. If not set, the default options will be
used.<li><p><strong>Backup name.</strong> Set a custom name for the backup.
If the backup name is set, each time a backup is made, it will be given
a unique name with backup-name as the suffix. This behaviour will be
fixed in a future release. Leave this field empty for regular or “base”
backup (also, make sure not to enable <em>backup multiple</em> in the
backup options).</ul><p>If the <a href=#subsubsec:profile-state>state</a> is <em>on</em>,
the packages will be backed up, and if the state is <em>off</em>, the
packages will be restored. The option can be disabled by clicking on the
<em>disabled</em> button on the input dialog.</section><section id=导出屏蔽规则 class=level4 data-number=2.5.3.8><h4 data-number=2.5.3.8><span class=header-section-number>2.5.3.8</span> 导出屏蔽规则<a href=#导出屏蔽规则 class=anchor aria-hidden=true></a></h4><p>This option allows you to export blocking rules.<div class="amalert danger"><p><strong><em>Danger.</em></strong><p>This option is not yet implemented.</div></section><section id=禁用 class=level4 data-number=2.5.3.9><h4 data-number=2.5.3.9><span class=header-section-number>2.5.3.9</span> 禁用<a href=#禁用 class=anchor aria-hidden=true></a></h4><p>Enables/disables the selected packages depending on the <a href=#subsubsec:profile-state>state</a>. If the state is <em>on</em>,
the packages will be disabled, and if the state is <em>off</em>, the
packages will be enabled.</section><section id=强制停止 class=level4 data-number=2.5.3.10><h4 data-number=2.5.3.10><span class=header-section-number>2.5.3.10</span> 强制停止<a href=#强制停止 class=anchor aria-hidden=true></a></h4><p>Allows the selected packages to be force-stopped.</section><section id=清除缓存 class=level4 data-number=2.5.3.11><h4 data-number=2.5.3.11><span class=header-section-number>2.5.3.11</span> 清除缓存<a href=#清除缓存 class=anchor aria-hidden=true></a></h4><p>Enables clearing cache for the selected packages.</section><section id=清除数据 class=level4 data-number=2.5.3.12><h4 data-number=2.5.3.12><span class=header-section-number>2.5.3.12</span> 清除数据<a href=#清除数据 class=anchor aria-hidden=true></a></h4><p>Enables clearing data for the selected packages.</section><section id=block-trackers class=level4 data-number=2.5.3.13><h4 data-number=2.5.3.13><span class=header-section-number>2.5.3.13</span> Block Trackers<a href=#block-trackers class=anchor aria-hidden=true></a></h4><p>Enables blocking/unblocking of the tracker components from the
selected packages depending on the <a href=#subsubsec:profile-state>state</a>. If the state is <em>on</em>,
the trackers will be blocked, and if the state is <em>off</em>, the
trackers will be unblocked.</section><section id=保存apk class=level4 data-number=2.5.3.14><h4 data-number=2.5.3.14><span class=header-section-number>2.5.3.14</span> 保存APK<a href=#保存apk class=anchor aria-hidden=true></a></h4><p>Enables saving APK files at <code>AppManager/apks</code> for the
selected packages.</section></section></section><section id=sec:settings-page class=level2 data-number=2.6><h2 data-number=2.6><span class=header-section-number>2.6</span> <a href=#toc:sec:settings-page>设置页面</a><a href=#sec:settings-page class=anchor aria-hidden=true></a></h2><p>Settings can be used to customise the behaviour of the app.<section id=subsec:language class=level3 data-number=2.6.1><h3 data-number=2.6.1><span class=header-section-number>2.6.1</span>
<a href=#toc:subsec:language>界面语言</a><a href=#subsec:language class=anchor aria-hidden=true></a></h3><p>Configure in-app language. App Manager currently supports 19
(nineteen) languages.</section><section id=subsec:app-theme class=level3 data-number=2.6.2><h3 data-number=2.6.2><span class=header-section-number>2.6.2</span>
<a href=#toc:subsec:app-theme>应用主题</a><a href=#subsec:app-theme class=anchor aria-hidden=true></a></h3><p>配置应用内主题</section><section id=subsec:screen-lock class=level3 data-number=2.6.3><h3 data-number=2.6.3><span class=header-section-number>2.6.3</span>
<a href=#toc:subsec:screen-lock>屏幕锁定</a><a href=#subsec:screen-lock class=anchor aria-hidden=true></a></h3><p>Lock App Manager using Android screen lock provided a screen lock is
configured.</section><section id=subsec:mode-of-operation class=level3 data-number=2.6.4><h3 data-number=2.6.4><span class=header-section-number>2.6.4</span>
<a href=#toc:subsec:mode-of-operation>操作模式</a><a href=#subsec:mode-of-operation class=anchor aria-hidden=true></a></h3><p>You can select one of the four options:<ul class=incremental><li><p><strong>Auto.</strong> Let AM decide the suitable option for you.
Although this is the default option, it may cause problems in some
devices.<li><p><strong>Root.</strong> Select root mode. By default, AM requests
root permission if root is detected but hasn’t been granted. If this
option is selected, AM will run in root mode even if root is unavailable
or denied. This may cause crashes or freezing issues, therefore,
shouldn’t be enabled if root is unavailable.<li><p><strong>ADB over TCP.</strong> Enable <a href=#sec:adb-over-tcp>ADB over TCP</a> mode. AM may hang indefinitely
if ADB over TCP is not enabled.<li><p><strong>No-root.</strong> AM runs in no-root mode. AM performs
better if this is enabled but all the root/ADB features will be
disabled.</ul></section><section id=subsec:enable/disable-features class=level3 data-number=2.6.5><h3 data-number=2.6.5><span class=header-section-number>2.6.5</span>
<a href=#toc:subsec:enable/disable-features>启用/禁用功能</a><a href=#subsec:enable/disable-features class=anchor aria-hidden=true></a></h3><p>启用或禁用应用 App Manager 中的某些功能，如<ul class=incremental><li><p>拦截器(Interceptor)<li><p>应用清单文件浏览器(Manifest viewer)<li><p>扫描器(Scanner)<li><p>包安装器(Package installer)<li><p>使用情况(Usage access): 关闭此选项后，App Manager 将永远不会请求
<em>Usage Access</em> 权限.<li><p>日志浏览器(Log viewer)</ul></section><section id=subsec:apk-signing class=level3 data-number=2.6.6><h3 data-number=2.6.6><span class=header-section-number>2.6.6</span>
<a href=#toc:subsec:apk-signing>APK 签名</a><a href=#subsec:apk-signing class=anchor aria-hidden=true></a></h3><section id=签名方案 class=level4 data-number=2.6.6.1><h4 data-number=2.6.6.1><span class=header-section-number>2.6.6.1</span> 签名方案<a href=#签名方案 class=anchor aria-hidden=true></a></h4><p>Select the <a href=https://source.android.com/security/apksigning>signature
schemes</a> to use. It is recommended that you use at least v1 and v2
signature schemes. Use the <em>Reset to Default</em> button in case
you’re confused.</section><section id=签名密钥 class=level4 data-number=2.6.6.2><h4 data-number=2.6.6.2><span class=header-section-number>2.6.6.2</span> 签名密钥<a href=#签名密钥 class=anchor aria-hidden=true></a></h4><p>Configure custom signing key for signing APK files. Keys from an
existing KeyStore can be imported to App Manager, or a new key can be
generated.<div class="amalert warning"><p><strong><em>Notice.</em></strong><p>App Manager maintains a KeyStore where the keys used within the app
are stored. The password for the keystore will be asked when necessary.
Be sure to store the password in a safe place, otherwise the KeyStore
cannot be recovered when necessary.</div></section></section><section id=subsec:installer class=level3 data-number=2.6.7><h3 data-number=2.6.7><span class=header-section-number>2.6.7</span>
<a href=#toc:subsec:installer>安装器</a><a href=#subsec:installer class=anchor aria-hidden=true></a></h3><section id=在安装器中显示用户 class=level4 data-number=2.6.7.1><h4 data-number=2.6.7.1><span class=header-section-number>2.6.7.1</span> 在安装器中显示用户<a href=#在安装器中显示用户 class=anchor aria-hidden=true></a></h4><p>对于 root/AD B用户，在安装应用之前将显示一个用户列表.
该应用将只对指定的用户（或者如果选择了所有用户）安装.</section><section id=签名-apk class=level4 data-number=2.6.7.2><h4 data-number=2.6.7.2><span class=header-section-number>2.6.7.2</span> 签名 APK<a href=#签名-apk class=anchor aria-hidden=true></a></h4><p>安装应用前是否对 APK 文件进行签名. 转至 <a href=#subsec:apk-signing>APK 签名</a> 部分来配置签名.</section><section id=安装位置 class=level4 data-number=2.6.7.3><h4 data-number=2.6.7.3><span class=header-section-number>2.6.7.3</span> 安装位置<a href=#安装位置 class=anchor aria-hidden=true></a></h4><p>选择APK安装位置，可以为 <em>自动</em>、<em>仅内部</em>
和<em>倾向外部</em>.
在较新的Android版本中，最后一个选项可能并不总是能如期在外部存储中安装应用.</section><section id=安装来源 class=level4 data-number=2.6.7.4><h4 data-number=2.6.7.4><span class=header-section-number>2.6.7.4</span> 安装来源<a href=#安装来源 class=anchor aria-hidden=true></a></h4><p>选择安装程序，对一些明确检查其安装程序的应用很有用 (只适用于 root/ADB
用户).</section></section><section id=subsec:backup/restore class=level3 data-number=2.6.8><h3 data-number=2.6.8><span class=header-section-number>2.6.8</span>
<a href=#toc:subsec:backup/restore>备份/恢复</a><a href=#subsec:backup/restore class=anchor aria-hidden=true></a></h3><p>与 <a href=#sec:backup-restore>备份恢复</a> 相关的设置.<section id=压缩方法 class=level4 data-number=2.6.8.1><h4 data-number=2.6.8.1><span class=header-section-number>2.6.8.1</span> 压缩方法<a href=#压缩方法 class=anchor aria-hidden=true></a></h4><p>Set which compression method to be used during backups. App Manager
supports GZip and BZip2 compression methods, GZip being the default
compression method. It doesn’t affect the restore of an existing
backup.</section><section id=subsubsec:settings-backup-options class=level4 data-number=2.6.8.2><h4 data-number=2.6.8.2><span class=header-section-number>2.6.8.2</span> 备份选项<a href=#subsubsec:settings-backup-options class=anchor aria-hidden=true></a></h4><p>Customise the back up/restore dialog.</section><section id=备份带-android-密钥库的应用程序 class=level4 data-number=2.6.8.3><h4 data-number=2.6.8.3><span class=header-section-number>2.6.8.3</span> 备份带 Android
密钥库的应用程序<a href=#备份带-android-密钥库的应用程序 class=anchor aria-hidden=true></a></h4><p>Allow backup of apps that has entries in the Android KeyStore
(disabled by default). Some apps (such as Signal) may crash if restored.
KeyStore backup also doesn’t work from Android 9 but still kept as many
apps having KeyStore can be restored without problem.</section><section id=subsubsec:settings-encryption class=level4 data-number=2.6.8.4><h4 data-number=2.6.8.4><span class=header-section-number>2.6.8.4</span> 加密<a href=#subsubsec:settings-encryption class=anchor aria-hidden=true></a></h4><p>Set an encryption method for the backups. App Manager currently
supports OpenPGP (via <a href=https://f-droid.org/packages/org.sufficientlysecure.keychain/>OpenKeyChain</a>),
AES and RSA (hybrid encryption with AES). Like <a href=#subsec:apk-signing>APK signing</a>, The AES and RSA keys are
stored in the KeyStore and can be imported from other KeyStores.</section><section id=subsubsec:backup-volume class=level4 data-number=2.6.8.5><h4 data-number=2.6.8.5><span class=header-section-number>2.6.8.5</span> 备份位置<a href=#subsubsec:backup-volume class=anchor aria-hidden=true></a></h4><p>Lets you select the storage where the backups will be stored.<div class="amalert tip"><p><strong><em>Notice.</em></strong><p>The backup volume only specifies the storage, not the path. Backups
are stored in <code>AppManager</code> folder inside the storage path.
This is also where logs and exported APK files are saved.</div></section></section><section id=subsec:rules class=level3 data-number=2.6.9><h3 data-number=2.6.9><span class=header-section-number>2.6.9</span>
<a href=#toc:subsec:rules>规则</a><a href=#subsec:rules class=anchor aria-hidden=true></a></h3><section id=subsubsec:instant-component-blocking class=level4 data-number=2.6.9.1><h4 data-number=2.6.9.1><span class=header-section-number>2.6.9.1</span> 即时组件拦截<a href=#subsubsec:instant-component-blocking class=anchor aria-hidden=true></a></h4><p>By default, blocking rules are not applied unless they are applied
explicitly in <a href=#sec:app-details-page>the App Details page</a>
for any package. Upon enabling this option, all (old and new) rules are
applied immediately for all apps without explicitly enabling blocking
for an app.<div class="amalert warning"><p><strong><em>Notice.</em></strong><p>Enabling this setting may have some unintended consequences. For
instance, the rules that are not completely removed will be applied
again. So, proceed with caution. This option should be kept disabled if
not required for some reasons.</div><div class=seealso-inline><p><em>See also: <span><a href=#subsec:faq:what-is-instant-component-blocking>FAQ: What is
instant component blocking?</a></span></em></div></section><section id=导入导出阻止规则 class=level4 data-number=2.6.9.2><h4 data-number=2.6.9.2><span class=header-section-number>2.6.9.2</span> 导入/导出阻止规则<a href=#导入导出阻止规则 class=anchor aria-hidden=true></a></h4><p>It is possible to import or export blocking rules within App Manager
for all apps. There is a choice to export or import only certain rules
(components, app ops or permissions) instead of all of them. It is also
possible to import blocking rules from <a href=https://github.com/lihenggui/blocker>Blocker</a> and <a href=https://github.com/tuyafeng/Watt>Watt</a>. If it is necessary to
export blocking rules for a single app, use the corresponding <a href=#sec:app-details-page>App Details page</a> to export rules, or
for multiple apps, use <a href=#subsec:batch-operations>batch
operations</a>.<div class=seealso-inline><p><em>See also: <span><a href=#sec:rules-specification>Rules
Specification</a></span></em></div><section id=export class=level5 data-number=2.6.9.2.1><h5 data-number=2.6.9.2.1><span class=header-section-number>2.6.9.2.1</span> Export<a href=#export class=anchor aria-hidden=true></a></h5><p>Export blocking rules for all apps configured within App Manager.
This may include <a href=#subsec:faq:what-are-app-components>app
components</a>, app ops and permissions based on the options selected in
the multi-choice options.</section><section id=import class=level5 data-number=2.6.9.2.2><h5 data-number=2.6.9.2.2><span class=header-section-number>2.6.9.2.2</span> Import<a href=#import class=anchor aria-hidden=true></a></h5><p>Import previously exported blocking rules from App Manager. Similar
to export, this may include <a href=#subsec:faq:what-are-app-components>app components</a>, app ops
and permissions based on the options selected in the multi-choice
options.</section><section id=par:import-existing-rules class=level5 data-number=2.6.9.2.3><h5 data-number=2.6.9.2.3><span class=header-section-number>2.6.9.2.3</span> Import Existing Rules<a href=#par:import-existing-rules class=anchor aria-hidden=true></a></h5><p>Add components disabled by other apps to App Manager. App Manager
only keeps track of component disabled within App Manager. If you use
other tools to block app components, you can use this tools to import
these disabled components. Clicking on this option triggers a search for
disabled components and will list apps with components disabled by user.
For safety, all the apps are unselected by default. You can manually
select the apps in the list and re-apply the blocking through App
Manager.<div class="amalert danger"><p><strong><em>Caution.</em></strong><p>Be careful when using this tool as there can be many false positives.
Choose only the apps that you are certain about.</div></section><section id=import-from-watt class=level5 data-number=2.6.9.2.4><h5 data-number=2.6.9.2.4><span class=header-section-number>2.6.9.2.4</span> Import from Watt<a href=#import-from-watt class=anchor aria-hidden=true></a></h5><p>Import configuration files from <a href=https://github.com/tuyafeng/Watt>Watt</a>, each file containing
rules for a single package and file name being the name of the package
with <code>.xml</code> extension.<div class="amalert tip"><p><strong><em>Tip.</em></strong><p>Location of configuration files in Watt:
<code>/sdcard/Android/data/com.tuyafeng.watt/files/ifw</code></div></section><section id=import-from-blocker class=level5 data-number=2.6.9.2.5><h5 data-number=2.6.9.2.5><span class=header-section-number>2.6.9.2.5</span> Import from Blocker<a href=#import-from-blocker class=anchor aria-hidden=true></a></h5><p>Import blocking rules from <a href=https://github.com/lihenggui/blocker>Blocker</a>, each file
containing rules for a single package. These files have a
<code>.json</code> extension.</section></section><section id=删除所有规则 class=level4 data-number=2.6.9.3><h4 data-number=2.6.9.3><span class=header-section-number>2.6.9.3</span> 删除所有规则<a href=#删除所有规则 class=anchor aria-hidden=true></a></h4><p>One-click option to remove all rules configured within App Manager.
This will enable all blocked components, app ops will be set to their
default values and permissions will be granted.</section></section><section id=subsec:import/export-keystore class=level3 data-number=2.6.10><h3 data-number=2.6.10><span class=header-section-number>2.6.10</span> <a href=#toc:subsec:import/export-keystore>导入/导出密钥库</a><a href=#subsec:import/export-keystore class=anchor aria-hidden=true></a></h3><p>Import or export the KeyStore used by App Manager. This is a Bouncy
Castle KeyStore with <code>bks</code> extension. Therefore, other
KeyStore such as Java KeyStore (JKS) or PKCS #12 are not supported. If
you need to import a key from these KeyStores, use the relevant options
outlined above.</section><section id=subsec:device-info class=level3 data-number=2.6.11><h3 data-number=2.6.11><span class=header-section-number>2.6.11</span> <a href=#toc:subsec:device-info>关于设备</a><a href=#subsec:device-info class=anchor aria-hidden=true></a></h3><p>Display Android version, security, CPU, GPU, battery, memory, screen,
languages, user info, etc.</section></section><section id=sec:scanner-page class=level2 data-number=2.7><h2 data-number=2.7><span class=header-section-number>2.7</span> <a href=#toc:sec:scanner-page>扫描器页面</a><a href=#sec:scanner-page class=anchor aria-hidden=true></a></h2><p><strong>Scanner page</strong> appears after clicking on the
<em>scanner</em> button in the <a href=#subsec:app-info-tab>App Info
tab</a>. External APK files can also be opened for scanning from file
managers, web browsers, etc.<p>It scans for trackers and libraries, and displays the number of
trackers and libraries as a summary. It also displays checksums of the
APK file as well as the signing certificate(s).<div class="amalert danger"><p><strong><em>Disclaimer.</em></strong><p>AM only scans an app statically without prejudice. The app may
provide the options for opting out, or in some cases, certain features
of the tracker may not be used at all by the app (e.g. F-Droid), or some
apps may simply use them as placeholders to prevent the breaking of
certain features (e.g. Fennec F-Droid). <strong>The intention of the
scanner is to give you an idea about what the APK might contain. It
should be taken as an initial step for further
investigations.</strong></div><p>Clicking on the first item (i.e. number of classes) opens a new page
containing a list of tracker classes for the app. All classes can also
be viewed by clicking on the <em>Toggle Class Listing</em> menu. A
sneak-peek of each class can be viewed by simply clicking on any class
item.<div class="amalert tip"><p><strong><em>Notice.</em></strong><p>Due to various limitations, it is not possible to scan all the
components of an APK file. This is especially true if an APK is highly
obfuscated. The scanner also does not check strings (or website
signatures).</div><p>The second item lists the number of trackers along with their names.
Clicking on the item displays a dialog containing the name of trackers,
matched signatures, and the number of classes against each signature.
Some tracker names may have <span class="math inline"><sup>2</sup></span> prefix which indicates that the
trackers are in the <a href=https://etip.exodus-privacy.eu.org>ETIP</a> stand-by list
i.e. whether they are actual trackers is still being investigated.<p>The third item lists the number of libraries along with their names.
The information are mostly taken from <a href=https://gitlab.com/IzzyOnDroid/repo>IzzyOnDroid repo</a>.<div class=seealso-inline><p><em>See also: <span><a href=#subsec:tracker-classes-versus-tracker-components>FAQ: Tracker
classes vs tracker components</a></span></em></div><section id=subsec:missing-signatures class=level3 data-number=2.7.1><h3 data-number=2.7.1><span class=header-section-number>2.7.1</span>
<a href=#toc:subsec:missing-signatures>缺少签名</a><a href=#subsec:missing-signatures class=anchor aria-hidden=true></a></h3><p>At the bottom of the page, there is a special item denoting the
number of missing signatures (i.e. missing classes). The missing
signatures are the ones that AM has failed to match against any known
libraries. The number itself has no particular meaning as many libraries
contain hundreds of classes, but clicking on the item will bring up a
dialog containing the signatures which is helpful in inspecting the
missing signatures. <strong>This feature is only intended for people who
know what a missing signature is and what to do with it, average users
should just ignore it.</strong></section></section><section id=sec:interceptor-page class=level2 data-number=2.8><h2 data-number=2.8><span class=header-section-number>2.8</span> <a href=#toc:sec:interceptor-page>拦截器页面</a><a href=#sec:interceptor-page class=anchor aria-hidden=true></a></h2><p>Interceptor can be used to intercept communication between apps using
<code>Intent</code>. It works as a man-in-the-middle between the source
and the destination apps. It offers a feature-complete user interface
for editing <code>Intent</code>s.<div class="amalert tip"><p><strong><em>Info.</em></strong><p>Development of interceptor is still in progress. It can only
intercept activities for now.</div><div class="amalert warning"><p><strong><em>Warning.</em></strong><p>Interceptor only works for <em>implicit</em> intents where the <a href=#subsec:faq:what-are-app-components>app component</a> isn’t
specified.</div><div class=seealso><p><em>See also:</em><ul class=incremental><li><p><a href=https://developer.android.com/guide/components/intents-common>Common
Intents</a><li><p><a href=https://developer.android.com/guide/components/intents-filters>Intents
and Intent Filters</a></ul></div><section id=subsec:intent-filters class=level3 data-number=2.8.1><h3 data-number=2.8.1><span class=header-section-number>2.8.1</span>
<a href=#toc:subsec:intent-filters>意图(Intent)过滤器</a><a href=#subsec:intent-filters class=anchor aria-hidden=true></a></h3><p>Intent filters are used by the apps to specify which tasks they are
able to perform or which tasks they are going to perform using other
apps. For example, when you’re opening a PDF file using a file manager,
the file manager will try to find which apps to open the PDF with. To
find the right applications, the file manager will create an Intent with
filters such as MIME type and ask the system to retrieve the matched
applications that is able to open this filter. The system will search
through the Manifest of the installed applications to match the filter
and list the app components that are able to open this filter (in our
case the PDF). At this, either the file manager will open the desired
app component itself or use a system provided option to open it. If
multiple app components are able to open it and no default is set, you
may get a prompt where you have to choose the right app component.<section id=subsubsec:action class=level4 data-number=2.8.1.1><h4 data-number=2.8.1.1><span class=header-section-number>2.8.1.1</span> 动作(Action)<a href=#subsubsec:action class=anchor aria-hidden=true></a></h4><p>Action specifies the generic action to perform such as
<code>android.intent.action.VIEW</code>. Applications often declare the
relevant actions in the Manifest file to catch the desired Intents. The
action is particularly useful for broadcast Intent where it plays a
vital rule. In other cases, it works as an initial way to filter out
relevant app components. Generic actions such as
<code>android.intent.action.VIEW</code> and
<code>android.intent.action.SEND</code> are widely used by apps. So,
setting this alone may match many app components.</section><section id=subsubsec:data class=level4 data-number=2.8.1.2><h4 data-number=2.8.1.2><span class=header-section-number>2.8.1.2</span> 数据(Data)<a href=#subsubsec:data class=anchor aria-hidden=true></a></h4><p>Data is originally known as URI (Uniform Resource Identifier) defined
in <a href=http://www.faqs.org/rfcs/rfc2396.html>RFC 2396</a>. It can
be web links, file location, or a special feature called
<em>content</em>. Contents are an Android feature managed by the <a href=#appdetails:providers>content providers</a>. Data are often
associated with a <a href=#subsubsec:mime-type>MIME type</a>.<p>Examples:<pre><code>http://search.disroot.org/?q=URI%20in%20Android%20scheme&amp;categories=general&amp;language=en-US
https://developer.android.com/reference/android/net/Uri
file:///sdcard/AppManager.apk
mailto:email@example.com
content://io.github.muntashirakon.AppManager.provider/23485af89b08d87e898a90c7e/AppManager.apk</code></pre></section><section id=subsubsec:mime-type class=level4 data-number=2.8.1.3><h4 data-number=2.8.1.3><span class=header-section-number>2.8.1.3</span> MIME 类型<a href=#subsubsec:mime-type class=anchor aria-hidden=true></a></h4><p>MIME type of the <a href=#subsubsec:data>data</a>. For example, if
the data field is set to <code>file:///sdcard/AppManager.apk</code>, the
associated MIME type can be
<code>application/vnd.android.package-archive</code>.</section><section id=类别categories class=level4 data-number=2.8.1.4><h4 data-number=2.8.1.4><span class=header-section-number>2.8.1.4</span> 类别(Categories)<a href=#类别categories class=anchor aria-hidden=true></a></h4><p>This is similar to <a href=#subsubsec:action>action</a> in the
sense that it is also used by the system to filter app components. This
has no further benefits. Unlike <em>action</em>, there can be more than
one category. Clicking on the <em>plus</em> button next to the title
allows adding more categories.</section><section id=标志位flags class=level4 data-number=2.8.1.5><h4 data-number=2.8.1.5><span class=header-section-number>2.8.1.5</span> 标志位(Flags)<a href=#标志位flags class=anchor aria-hidden=true></a></h4><p>Flags are useful in determining how system should behave during the
launch or after the launch of an activity. An average user should avoid
this as it requires some technical background. The <em>plus</em> button
next to the title can be used to add one or more flags.</section><section id=附加数据extras class=level4 data-number=2.8.1.6><h4 data-number=2.8.1.6><span class=header-section-number>2.8.1.6</span> 附加数据(Extras)<a href=#附加数据extras class=anchor aria-hidden=true></a></h4><p>Extras are the key-value pairs used for supplying additional
information to the destination component. You can add extras using the
<em>plus</em> button next to the title.</section><section id=uri class=level4 data-number=2.8.1.7><h4 data-number=2.8.1.7><span class=header-section-number>2.8.1.7</span> URI<a href=#uri class=anchor aria-hidden=true></a></h4><p>Represents the entire Intent as a URI (e.g. <code>intent://…</code>).
Some data cannot be converted to string, and as a result, they might not
appear here.</section></section><section id=subsec:matching-activities class=level3 data-number=2.8.2><h3 data-number=2.8.2><span class=header-section-number>2.8.2</span>
<a href=#toc:subsec:matching-activities>匹配的活动(Activity)</a><a href=#subsec:matching-activities class=anchor aria-hidden=true></a></h3><p>List all the activity components that matches the Intent. This is
internally determined by the system (rather than AM). The launch button
next to each component can be used to launch them directly from AM.</section><section id=subsec:interceptor-reset-to-default class=level3 data-number=2.8.3><h3 data-number=2.8.3><span class=header-section-number>2.8.3</span>
<a href=#toc:subsec:interceptor-reset-to-default>重置为默认</a><a href=#subsec:interceptor-reset-to-default class=anchor aria-hidden=true></a></h3><p>Reset the Intent to its initial state. This may not always work as
expected.</section><section id=subsec:interceptor-send-edited-intent class=level3 data-number=2.8.4><h3 data-number=2.8.4><span class=header-section-number>2.8.4</span>
<a href=#toc:subsec:interceptor-send-edited-intent>发送编辑过的意图(Intent)</a><a href=#subsec:interceptor-send-edited-intent class=anchor aria-hidden=true></a></h3><p>Resend the edited Intent to the destination app. This may open a list
of apps where you have to select the desired app. The result received
from the target app will be sent to the source app. As a result the
source app will not know if there was a man-in-the-middle.</section></section><section id=sec:shared-preferences-editor-page class=level2 data-number=2.9><h2 data-number=2.9><span class=header-section-number>2.9</span> <a href=#toc:sec:shared-preferences-editor-page>共享首选项(Shared
Preferences)编辑页</a><a href=#sec:shared-preferences-editor-page class=anchor aria-hidden=true></a></h2><p>Shared preferences can be edited in this page. Clicking any item on
the list opens the edit dialog where the item can be edited. The
floating action button on the bottom-right corner can be used to add a
new item. To save or delete the file, or to discard current changes, the
respective options in the menu can be used.</section></section><section id=ch:guides class=level1 data-number=3><h1 data-number=3><span class=header-section-number>3</span> <a href=#toc:ch:guides>指南</a><a href=#ch:guides class=anchor aria-hidden=true></a></h1><section id=sec:adb-over-tcp class=level2 data-number=3.1><h2 data-number=3.1><span class=header-section-number>3.1</span> <a href=#toc:sec:adb-over-tcp>经由TCP的ADB</a><a href=#sec:adb-over-tcp class=anchor aria-hidden=true></a></h2><p>Many root-only features can still be used by enabling ADB over TCP.
To do that, a PC or Mac is required with Android platform-tools
installed, and an Android phone with developer options & USB
debugging enabled.<div class="amalert tip"><p><strong><em>Root users.</em></strong><p>If superuser permission has been granted to App Manager, it can
already execute privileged code without any problem. <strong>Therefore,
root users don’t need to enable ADB over TCP.</strong> If you still want
to use ADB over TCP, you must revoke superuser permission for App
Manager and restart your device. You may see <em>working on ADB
mode</em> message without restarting but this isn’t entirely true. The
server (used as an interface between system and App Manager) is still
running in root mode. This is a known issue and will be fixed in a
future version of App Manager.</div><div class=seealso-inline><p><em>See also: <span><a href=#sec:faq:adb-over-tcp>FAQ: ADB over
TCP</a></span></em></div><section id=subsec:enable-developer-options class=level3 data-number=3.1.1><h3 data-number=3.1.1><span class=header-section-number>3.1.1</span>
<a href=#toc:subsec:enable-developer-options>启用开发者选项</a><a href=#subsec:enable-developer-options class=anchor aria-hidden=true></a></h3><section id=subsubsec:location-of-developer-options class=level4 data-number=3.1.1.1><h4 data-number=3.1.1.1><span class=header-section-number>3.1.1.1</span> 开发人员选项的位置<a href=#subsubsec:location-of-developer-options class=anchor aria-hidden=true></a></h4><p><strong>Developer options</strong> is located in Android
<strong>Settings</strong>, either directly near the bottom of the page
(in most ROMs) or under some other settings such as
<strong>System</strong> (Lineage OS, Asus Zenfone 8.0+),
<strong>System</strong> > <strong>Advanced</strong> (Google Pixel),
<strong>Additional Settings</strong> (Xiaomi MIUI, Oppo ColorOS),
<strong>More Settings</strong> (Vivo FuntouchOS), <strong>More</strong>
(ZTE Nubia). Unlike other options, it is not visible until explicitly
enabled by the user. If developer options is enabled, you can use the
search box in Android <strong>Settings</strong> to locate it as
well.</section><section id=如何启用开发者选项 class=level4 data-number=3.1.1.2><h4 data-number=3.1.1.2><span class=header-section-number>3.1.1.2</span> 如何启用开发者选项<a href=#如何启用开发者选项 class=anchor aria-hidden=true></a></h4><p>This option is available within Android <strong>Settings</strong> as
well but like the location of the developer options, it also differs
from device to device. But in general, you have to find <strong>Build
number</strong> (or <strong>MIUI version</strong> for MIUI ROMs and
<strong>Software version</strong> for Vivo FuntouchOS,
<strong>Version</strong> for Oppo ColorOS) and tap it at least 7 (seven)
times until you finally get a message saying <em>You are now a
developer</em> (you may be prompted to insert pin/password/pattern or
solve captchas at this point). In most devices, it is located at the
bottom of the settings page, inside <strong>About Phone</strong>. But
the best way to find it is to use the search box.</section></section><section id=subsec:enable-usb-debugging class=level3 data-number=3.1.2><h3 data-number=3.1.2><span class=header-section-number>3.1.2</span>
<a href=#toc:subsec:enable-usb-debugging>启用USB调试</a><a href=#subsec:enable-usb-debugging class=anchor aria-hidden=true></a></h3><p>After <a href=#subsubsec:location-of-developer-options>locating the
developer options</a>, enable <strong>Developer option</strong> (if not
already). After that, scroll down a bit until you will find the option
<strong>USB debugging</strong>. Use the toggle button on the right hand
side to enable it. At this point, you may get an alert prompt where you
may have to click <em>OK</em> to actually enable it. You may also have
to enable some other options depending on device vendor and ROM. Here
are some examples:<section id=小米-miui class=level4 data-number=3.1.2.1><h4 data-number=3.1.2.1><span class=header-section-number>3.1.2.1</span> 小米 (MIUI)<a href=#小米-miui class=anchor aria-hidden=true></a></h4><p>Enable <strong>USB debugging (security settings)</strong> as
well.</section><section id=华为-emui class=level4 data-number=3.1.2.2><h4 data-number=3.1.2.2><span class=header-section-number>3.1.2.2</span> 华为 (EMUI)<a href=#华为-emui class=anchor aria-hidden=true></a></h4><p>Enable <strong>Allow ADB debugging in charge only mode</strong> as
well. When connecting to your PC or Mac, you may get a prompt saying
<strong>Allow access to device data?</strong> in which case click
<strong>YES, ALLOW ACCESS</strong>.<div class="amalert tip"><p><strong><em>Notice.</em></strong><p>Often the <strong>USB debugging</strong> mode could be disabled
automatically by the system. If that’s the case, repeat the above
procedure.</div></section><section id=lg class=level4 data-number=3.1.2.3><h4 data-number=3.1.2.3><span class=header-section-number>3.1.2.3</span> LG<a href=#lg class=anchor aria-hidden=true></a></h4><p>Make sure you have <strong>USB tethering</strong> enabled.</section><section id=故障排除 class=level4 data-number=3.1.2.4><h4 data-number=3.1.2.4><span class=header-section-number>3.1.2.4</span> 故障排除<a href=#故障排除 class=anchor aria-hidden=true></a></h4><p>In case <strong>USB Debugging</strong> is greyed out, you can do the
following:<ol class=incremental><li><p>Make sure you enabled USB debugging before connecting your phone
to the PC or Mac via USB cable<li><p>Enable USB tethering after connecting to PC or Mac via USB
cable<li><p>(For Samsung) If your device is running KNOX, you may have to
follow some additional steps. See official documentations or consult
support for further assistant</ol></section></section><section id=subsec:setup-adb-on-pc-or-mac class=level3 data-number=3.1.3><h3 data-number=3.1.3><span class=header-section-number>3.1.3</span>
<a href=#toc:subsec:setup-adb-on-pc-or-mac>在PC或Mac上配置ADB</a><a href=#subsec:setup-adb-on-pc-or-mac class=anchor aria-hidden=true></a></h3><p>In order to enable ADB over TCP, you have to set up ADB in your PC or
Mac. <strong><em>Lineage OS users can skip to §<a href=#subsubsec:lineage-os data-reference-type=ref data-reference=subsubsec:lineage-os>3.1.4.1</a>.</em></strong><section id=windows class=level4 data-number=3.1.3.1><h4 data-number=3.1.3.1><span class=header-section-number>3.1.3.1</span> Windows<a href=#windows class=anchor aria-hidden=true></a></h4><ol class=incremental><li><p>Download the latest version of <a href=https://dl.google.com/android/repository/platform-tools-latest-windows.zip>Android
SDK Platform-Tools</a> for Windows<li><p>Extract the contents of the zip file into any directory (such as
<code>C:\adb</code>) and navigate to that directory using
<em>Explorer</em><li><p>Open <strong>Command Prompt</strong> or
<strong>PowerShell</strong> from this directory. You can do it manually
from the start menu or by holding <code>Shift</code> and Right clicking
within the directory in <em>File Explorer</em> and then clicking either
on <em>Open command window here</em> or on <em>Open PowerShell window
here</em> (depending on what you have installed). You can now access ADB
by typing <code>adb</code> (Command Prompt) or <code>./adb</code>
(PowerShell). Do not close this window yet</ol></section><section id=macos class=level4 data-number=3.1.3.2><h4 data-number=3.1.3.2><span class=header-section-number>3.1.3.2</span> macOS<a href=#macos class=anchor aria-hidden=true></a></h4><ol class=incremental><li><p>Download the latest version of <a href=https://dl.google.com/android/repository/platform-tools-latest-darwin.zip>Android
SDK Platform-Tools</a> for macOS<li><p>Extract the contents of the zip file into a directory by clicking
on it. After that, navigate to that directory using <em>Finder</em> and
locate <code>adb</code><li><p>Open <strong>Terminal</strong> using <em>Launchpad</em> or
<em>Spotlight</em> and drag-and-drop <code>adb</code> from the
<em>Finder</em> window into the <em>Terminal</em> window. Do not close
the <em>Terminal</em> window yet</ol><div class="amalert tip"><p><strong><em>Tip.</em></strong><p>If you are not afraid to use command line, here’s a one liner:<div class=sourceCode id=cb3 data-frame=lines><pre class="sourceCode bash"><code class="sourceCode bash"><span id=cb3-1><a href=#cb3-1 aria-hidden=true tabindex=-1></a><span class=bu>cd</span> ~/Downloads <span class=kw>&amp;&amp;</span> <span class=ex>curl</span> <span class=at>-o</span> platform-tools.zip <span class=at>-L</span> <span class=dt>\</span></span>
<span id=cb3-2><a href=#cb3-2 aria-hidden=true tabindex=-1></a>https://dl.google.com/android/repository/platform-tools-latest-darwin.zip <span class=kw>&amp;&amp;</span> <span class=dt>\</span></span>
<span id=cb3-3><a href=#cb3-3 aria-hidden=true tabindex=-1></a><span class=fu>unzip</span> platform-tools.zip <span class=kw>&amp;&amp;</span> <span class=fu>rm</span> platform-tools.zip <span class=kw>&amp;&amp;</span> <span class=bu>cd</span> platform-tools</span></code></pre></div><p>After that, you can simply type <code>./adb</code> in the in same
<em>Terminal</em> window to access ADB.</div></section><section id=linux class=level4 data-number=3.1.3.3><h4 data-number=3.1.3.3><span class=header-section-number>3.1.3.3</span> Linux<a href=#linux class=anchor aria-hidden=true></a></h4><ol class=incremental><li><p>Open your favourite terminal emulator. In most GUI-distros, you
can open it by holding <code>Control</code>, <code>Alter</code> and
<code>T</code> at the same time<li><p>Run the following command:<div class=sourceCode id=cb4 data-frame=lines data-autogobble><pre class="sourceCode bash"><code class="sourceCode bash"><span id=cb4-1><a href=#cb4-1 aria-hidden=true tabindex=-1></a><span class=bu>cd</span> ~/Downloads <span class=kw>&amp;&amp;</span> <span class=ex>curl</span> <span class=at>-o</span> platform-tools.zip <span class=at>-L</span> <span class=dt>\</span></span>
<span id=cb4-2><a href=#cb4-2 aria-hidden=true tabindex=-1></a>https://dl.google.com/android/repository/platform-tools-latest-linux.zip <span class=kw>&amp;&amp;</span> <span class=dt>\</span></span>
<span id=cb4-3><a href=#cb4-3 aria-hidden=true tabindex=-1></a><span class=fu>unzip</span> platform-tools.zip <span class=kw>&amp;&amp;</span> <span class=fu>rm</span> platform-tools.zip <span class=kw>&amp;&amp;</span> <span class=bu>cd</span> platform-tools</span></code></pre></div><li><p>If it is successful, you can simply type <code>./adb</code> in
the in <em>same</em> terminal emulator window or type
<code>~/Downloads/platform-tools/adb</code> in any terminal emulator to
access ADB.</ol></section></section><section id=subsec:configure-adb-over-tcp class=level3 data-number=3.1.4><h3 data-number=3.1.4><span class=header-section-number>3.1.4</span>
<a href=#toc:subsec:configure-adb-over-tcp>配置经由TCP的ADB</a><a href=#subsec:configure-adb-over-tcp class=anchor aria-hidden=true></a></h3><section id=subsubsec:lineage-os class=level4 data-number=3.1.4.1><h4 data-number=3.1.4.1><span class=header-section-number>3.1.4.1</span> Lineage OS<a href=#subsubsec:lineage-os class=anchor aria-hidden=true></a></h4><p>Lineage OS (or its derivatives) users can directly enable ADB over
TCP using the developer options. To enable that, go to the
<strong>Developer options</strong>, scroll down until you find
<strong>ADB over Network</strong>. Now, use the toggle button on the
right-hand side to enable it and skip to §<a href=#subsubsec:adb-mode-on-app-manager data-reference-type=ref data-reference=subsubsec:adb-mode-on-app-manager>3.1.4.3</a>.</section><section id=subsubsec:enable-adb-over-tcp-via-pc-or-mac class=level4 data-number=3.1.4.2><h4 data-number=3.1.4.2><span class=header-section-number>3.1.4.2</span> 在 PC 或 Mac 上启用
经由TCP的ADB<a href=#subsubsec:enable-adb-over-tcp-via-pc-or-mac class=anchor aria-hidden=true></a></h4><p>For other ROMs, you can do this using the command
prompt/PowerShell/terminal emulator that you’ve opened in the step 3 of
the previous section. In this section, I will use <code>adb</code> to
denote <code>./adb</code>, <code>adb</code> or any other command that
you needed to use based on your platform and software in the previous
section.<ol class=incremental><li><p>Connect your device to your PC or Mac using a USB cable. For some
devices, it is necessary to turn on <em>File transfer mode (MTP)</em> as
well<li><p>To confirm that everything is working as expected, type
<code>adb devices</code> in your terminal. If your device is connected
successfully, you will see something like this:<pre><code>List of devices attached
xxxxxxxx  device</code></pre><div class="amalert tip"><p><strong><em>Notice.</em></strong><p>In some Android phones, an alert prompt will be appeared with a
message <strong>Allow USB Debugging</strong> in which case, check
<em>Always allow from this computer</em> and click
<strong>Allow</strong>.</div><li><p>Finally, run the following command to enable ADB over TCP:<div class=sourceCode id=cb6 data-frame=lines data-autogobble><pre class="sourceCode bash"><code class="sourceCode bash"><span id=cb6-1><a href=#cb6-1 aria-hidden=true tabindex=-1></a><span class=ex>adb</span> tcpip 5555</span></code></pre></div></ol><div class="amalert danger"><p><strong><em>Danger.</em></strong><p>You cannot disable developer options or USB debugging after enabling
ADB over TCP.</div></section><section id=subsubsec:adb-mode-on-app-manager class=level4 data-number=3.1.4.3><h4 data-number=3.1.4.3><span class=header-section-number>3.1.4.3</span> 在App
Manager上启用ADB模式<a href=#subsubsec:adb-mode-on-app-manager class=anchor aria-hidden=true></a></h4><p>After enabling ADB over TCP (in the previous subsections), open App
Manager (AM). You should see <strong>working on ADB mode</strong> toast
message at the bottom. If not, remove AM from the recents and open AM
again from the launcher.<div class="amalert tip"><p><strong><em>Notice.</em></strong><p>In some Android phones, the USB cable is needed to be disconnected
from the PC in order for it to work.</div><div class="amalert warning"><p><strong><em>Warning.</em></strong><p>ADB over TCP will be disabled after a restart. In that case, you have
to follow §<a href=#subsubsec:enable-adb-over-tcp-via-pc-or-mac data-reference-type=ref data-reference=subsubsec:enable-adb-over-tcp-via-pc-or-mac>3.1.4.2</a>
again.</div><div class="amalert warning"><p><strong><em>Lineage OS users.</em></strong><p>You can turn off <strong>ADB over Network</strong> in developer
options, but turning off this option will also stop App Manager’s remote
server. So, turn it off only when you’re not going to use App Manager in
ADB over TCP mode.</div></section></section><section id=subsec:references class=level3 data-number=3.1.5><h3 data-number=3.1.5><span class=header-section-number>3.1.5</span>
<a href=#toc:subsec:references>参考</a><a href=#subsec:references class=anchor aria-hidden=true></a></h3><ol class=incremental><li><p><a href=https://www.xda-developers.com/install-adb-windows-macos-linux>How
to Install ADB on Windows, macOS, and Linux</a><li><p><a href=https://developer.android.com/studio/command-line/adb>Android
Debug Bridge (adb)</a><li><p><a href=https://www.syncios.com/android/fix-usb-debugging-grey-out.html>How
to fix USB debugging greyed out?</a></ol></section></section><section id=sec:backup-restore class=level2 data-number=3.2><h2 data-number=3.2><span class=header-section-number>3.2</span> <a href=#toc:sec:backup-restore>备份/恢复</a><a href=#sec:backup-restore class=anchor aria-hidden=true></a></h2><p>App Manager has a modern, advanced and easy-to-use backup/restore
system implemented from the scratch. This is probably the only app that
has the ability to restore not only the app or its data but also
permissions and rules that you’ve configured within App Manager. You can
also choose to back up an app multiple times (with custom names) or for
all users.<div class=seealso><p><em>See also:</em><ul class=incremental><li><p><a href=#subsec:1-click-back-up>1-Click Ops: Back
up</a><li><p><a href=#subsec:1-click-restore>1-Click Ops:
Restore</a></ul></div><section id=subsec:backup-location class=level3 data-number=3.2.1><h3 data-number=3.2.1><span class=header-section-number>3.2.1</span>
<a href=#toc:subsec:backup-location>位置</a><a href=#subsec:backup-location class=anchor aria-hidden=true></a></h3><p>Back up/restore is a part of <a href=#subsec:batch-operations>batch
operations</a>. It is also located inside the <a href=#subsubsec:app-info-options-menu>options menu</a> in the <a href=#subsec:app-info-tab>App Info tab</a>. Clicking on
<strong>Backup/Restore</strong> opens the <strong>Backup
Options</strong>. Backups are located at
<code>/storage/emulated/0/AppManager</code> by default. You can
configure custom backup location in the <a href=#subsubsec:backup-volume>settings page</a> in which case the
backups will be located at the <code>AppManager</code> folder in the
selected volume.<div class="amalert tip"><p><strong><em>Note.</em></strong><p>If one or more selected apps do not have any backup, the
<strong>Restore</strong> and <strong>Delete Backup</strong> options will
not be displayed.</div></section><section id=subsec:backup-restore-backup-options class=level3 data-number=3.2.2><h3 data-number=3.2.2><span class=header-section-number>3.2.2</span>
<a href=#toc:subsec:backup-restore-backup-options>备份选项</a><a href=#subsec:backup-restore-backup-options class=anchor aria-hidden=true></a></h3><p>Backup options (internally known as backup flags) let you customise
the backups on the fly. However, the customisations will not be
remembered for the future backups. If you want to customise this dialog,
use <a href=#subsubsec:settings-backup-options>Backup Options</a> in
the <a href=#sec:settings-page>Settings page</a>.<p>A complete description of the backup options is given below:<ul class=incremental><li><p><strong>APK files.</strong> Whether to back up the APK files.
This includes the <em>base APK</em> file along with the
<code>split APK</code> files if they exist.<li><p><strong>Internal data.</strong> Whether to back up the internal
data directories. These directories are located at
<code>/data/user/&lt;user_id></code> and (for Android N or later)
<code>/data/user_de/&lt;user_id></code>.<li><p><strong>External data.</strong> Whether to back up data
directories located in the internal memory as well as SD Card (if
exists). External data directories often contain non-essential app data
or media files (instead of using the dedicated media folder) and may
increase the backup size. However, it might be essential for some apps.
Although it isn’t checked by default (as it might dramatically increase
the size of the backups), you may have to check it in order to ensure a
smooth restore of your backups.<div class="amalert warning"><p><strong><em>Caution.</em></strong><p>Internal data folders should always be backed up if you are going to
back up the external data folders. However, it could be useful to back
up only the external folders if the app in question downloads a lot of
assets from the Internet.</div><li><p><strong>OBB and media.</strong> Whether to back up or restore the
OBB and the media directories located in the external storage or the SD
Card. This is useful for games and the graphical software which actually
use these folders.<li><p><strong>Cache.</strong> Android apps have multiple cache
directories located at every data directories (both internal and
external). There are two types of cache: <strong>cache</strong> and
<strong>code cache</strong>. Enabling this option excludes both cache
directories from all the data directories. It is generally advised to
exclude cache directories since most apps do not clear the cache
regularly (for some reason, the only way an app can clear its cache is
by deleting the entire cache directory) and usually handled by the OS
itself. Apps such as Telegram may use a very large cache (depending on
the storage space) which may dramatically increase the backup size. When
it is disabled, AM also ignores the <strong>no_backup</strong>
directories.<li><p><strong>Extras.</strong> Backup/restore app permissions, net
policy, battery optimization, SSAID, etc., enabled by default. Note
that, blocking rules are applied <em>after</em> applying the extras. So,
if an item is present in both places, it will be overwritten (i.e., the
one from the blocking rules will be used).<li><p><strong>Rules.</strong> This option lets you back up blocking
rules configured within App Manager. This might come in handy if you
have customised permissions or block some components using App Manager
as they will also be backed up or restored when you enable this
option.<li><p><strong>Backup Multiple.</strong> Whether this is a multiple
backup. By default, backups are saved using their user ID. Enabling this
option allows you to create additional backups. These backups use the
current date-time as the default backup name, but you can also specify
custom backup name using the input field displayed when you click on the
<strong>Backup</strong> button.<li><p><strong>Custom users.</strong> Backup or restore for the selected
users instead of only the current user. This option is only displayed if
the system has more than one user.<li><p><strong>Skip signature checks.</strong> When taking a backup,
checksum of every file (as well as the signing certificate(s) of the
base APK file) is generated and stored in the <code>checksums.txt</code>
file. When you restore the backup, the checksums are generated again and
are matched with the checksums stored in the said file. Enabling this
option will disable the signature checks. This option is applied only
when you restore a backup. During backup, the checksums are generated
regardless of this option.<div class="amalert warning"><p><strong><em>Caution.</em></strong><p>You should always disable this option to ensure that your backups are
not modified by any third-party applications. However, this would only
work if you enabled encryption.</div></ul><div class=seealso-inline><p><em>See also: <span><a href=#subsubsec:settings-encryption>Settings:
Encryption</a></span></em></div></section><section id=subsec:backup-restore-backup class=level3 data-number=3.2.3><h3 data-number=3.2.3><span class=header-section-number>3.2.3</span>
<a href=#toc:subsec:backup-restore-backup>备份</a><a href=#subsec:backup-restore-backup class=anchor aria-hidden=true></a></h3><p>Backup respects all the backup options except <strong>Skip signature
checks</strong>. If base backups (i.e., backups that don’t have the
<strong>Backup Multiple</strong> option) already exist, you will get a
warning as the backups will be overwritten. If <strong>Backup
Multiple</strong> is set, you have an option to input the backup name,
or you can leave it blank to use the current date-time.</section><section id=subsec:backup-restore-restore class=level3 data-number=3.2.4><h3 data-number=3.2.4><span class=header-section-number>3.2.4</span>
<a href=#toc:subsec:backup-restore-restore>恢复</a><a href=#subsec:backup-restore-restore class=anchor aria-hidden=true></a></h3><p>Restore respects all the backup options and will fail if <strong>APK
files</strong> option is set, but the backup doesn’t contain such
backups or in other cases, if the app isn’t installed. When restoring
backups for multiple packages, you can only restore the base backups
(see <a href=#subsec:backup-restore-backup>backup</a> section for an
explanation). However, when restoring backups for a single package, you
have the option to select which backup to restore. If <strong>All
users</strong> option is set, AM will restore the selected backup for
all users in the latter case but in the former case, it will restore
base backups for the respective users.<div class="amalert tip"><p><strong><em>Notice.</em></strong><p>Apps that use storage access framework (SAF), SSAID or Android
KeyStore works properly only after an immediate restart.</div></section><section id=subsec:backup-restore-delete-backup class=level3 data-number=3.2.5><h3 data-number=3.2.5><span class=header-section-number>3.2.5</span>
<a href=#toc:subsec:backup-restore-delete-backup>删除备份</a><a href=#subsec:backup-restore-delete-backup class=anchor aria-hidden=true></a></h3><p>Delete backup only respects <strong>All users</strong> option and
when it is selected, only the base backups for all users will be deleted
with a prompt. When deleting backups for a single package, another
dialog will be displayed where you can select the backups to delete.</section></section><section id=sec:net-policy class=level2 data-number=3.3><h2 data-number=3.3><span class=header-section-number>3.3</span> <a href=#toc:sec:net-policy>连网策略</a><a href=#sec:net-policy class=anchor aria-hidden=true></a></h2><p>Short for <strong>Network policy</strong> or network policies. It is
usually located in the Android settings under <strong>Mobile data &
Wifi</strong> section in the app info page of an app. Not all policies
are guaranteed to be included in this page (e.g. Samsung), and not all
settings are well-understood due to lack of documentation. App Manager
can display all the net policies declared in the <a href=https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/net/NetworkPolicyManager.java>NetworkPolicyManager</a>.
Policies unknown to App Manager will have a <em>Unknown</em> prefix
along with the policy constant name and number in the hexadecimal
format. Unknown policies should be reported to App Manager for
inclusion.<p>Net policy allows a user to configure certain networking behaviour of
an app without modifying the ip tables directly and/or running a
firewall app. However, the features it offers largely depend on Android
version and ROM. A list of known net policies are listed below:<ol class=incremental><li><p><strong>None</strong> or
<strong><code>POLICY_NONE</code></strong>: (AOSP) No specific network
policy is set. System can still assign rules depending on the nature of
the app.<li><p><strong>Reject background data</strong> or
<strong><code>POLICY_REJECT_METERED_BACKGROUND</code></strong>: (AOSP)
Reject network usage on metered networks when the application is in
background.<li><p><strong>Allow background data when Data Saver is on</strong> or
<strong><code>POLICY_ALLOW_METERED_BACKGROUND</code></strong>: (AOSP)
Allow metered network use in the background even when data saving mode
is enabled.<li><p><strong>Reject cellular data</strong> or
<strong><code>POLICY_REJECT_CELLULAR</code></strong> (Android 11+) or
<strong><code>POLICY_REJECT_ON_DATA</code></strong> (up to Android 10):
(Lineage OS) Reject mobile/cellular data. Signals network unavailable to
the configured app as if the mobile data is inactive.<li><p><strong>Reject VPN data</strong> or
<strong><code>POLICY_REJECT_VPN</code></strong> (Android 11+) or
<strong><code>POLICY_REJECT_ON_VPN</code></strong> (up to Android 10):
(Lineage OS) Reject VPN data. Signals network unavailable to the
configured app as if the VPN is inactive.<li><p><strong>Reject Wi-Fi data</strong> or
<strong><code>POLICY_REJECT_WIFI</code></strong> (Android 11+) or
<strong><code>POLICY_REJECT_ON_WLAN</code></strong> (up to Android 10):
(Lineage OS) Reject Wi-Fi data. Signals network unavailable to the
configured app as if the device is not connected to a Wi-Fi
network.<li><p><strong>Disable network access</strong> or
<strong><code>POLICY_REJECT_ALL</code></strong> (Android 11+) or
<strong><code>POLICY_NETWORK_ISOLATED</code></strong> (up to Android
10): (Lineage OS) Reject network access in all circumstances. This is
not the same as enforcing the other three policies above, and is the
recommended policy for dodgy apps. If this policy is enforced, there is
no need to enforce the other policies.<li><p><strong><code>POLICY_ALLOW_METERED_IN_ROAMING</code></strong>:
(Samsung) Possibly allow metered network use during roaming. Exact
meaning is currently unknown.<li><p><strong><code>POLICY_ALLOW_WHITELIST_IN_ROAMING</code></strong>:
(Samsung) Possibly allow network use during roaming. Exact meaning is
currently unknown.</ol><div class="amalert tip"><p><strong><em>Note.</em></strong><p>Corresponding Lineage OS patches are as follows:<ol class=incremental><li><p><a href=https://github.com/LineageOS/android_frameworks_base/commit/a04932bafbbf7d99efd18276152cc2c9c9b2073e>fw/b:
Squash of app fw restriction commits</a><li><p><a href=https://github.com/LineageOS/android_frameworks_base/commit/02c8c82854348f52afe2199f310f44b5f578b5b8>fw/b:
Add support for per app network isolation</a></ol></div></section></section><section id=ch:faq class=level1 data-number=4><h1 data-number=4><span class=header-section-number>4</span> <a href=#toc:ch:faq>常见问题</a><a href=#ch:faq class=anchor aria-hidden=true></a></h1><section id=sec:faq:app-components class=level2 data-number=4.1><h2 data-number=4.1><span class=header-section-number>4.1</span> <a href=#toc:sec:faq:app-components>应用组件</a><a href=#sec:faq:app-components class=anchor aria-hidden=true></a></h2><section id=subsec:faq:what-are-app-components class=level3 data-number=4.1.1><h3 data-number=4.1.1><span class=header-section-number>4.1.1</span>
<a href=#toc:subsec:faq:what-are-app-components>什么是应用组件？</a><a href=#subsec:faq:what-are-app-components class=anchor aria-hidden=true></a></h3><p>Activities, services, broadcast receivers (also known as receivers)
and content providers (also known as providers) are jointly called app
components. More technically, they all inherit the <a href=https://developer.android.com/reference/android/content/pm/ComponentInfo>ComponentInfo</a>
class.</section><section id=追踪器或其他组件在app-manager中是如何被禁用的其局限性是什么 class=level3 data-number=4.1.2><h3 data-number=4.1.2><span class=header-section-number>4.1.2</span>
<a href=#toc:追踪器或其他组件在app-manager中是如何被禁用的其局限性是什么>追踪器或其他组件在App
Manager中是如何被禁用的？其局限性是什么？</a><a href=#追踪器或其他组件在app-manager中是如何被禁用的其局限性是什么 class=anchor aria-hidden=true></a></h3><p>AM blocks application components (or tracker components) using a
method called <a href=https://carteryagemann.com/pages/android-intent-firewall.html>Intent
Firewall (IFW)</a>, it is very superior to other methods such as
<em>pm</em> (PackageManager), <a href=https://github.com/RikkaApps/Shizuku>Shizuku</a> or any other
method that uses the package manager to enable or disable the
components. If a component is disabled by the latter methods, the app
itself can detect that the component is being blocked and can re-enable
it as it has full access to its own components. (Many deceptive apps
actually exploit this in order to keep the tracker components
unblocked.) On the other hand, IFW is a true firewall and the app cannot
detect if the blocking is present. It also cannot re-enable it by any
means. AM uses the term <em>block</em> rather than <em>disable</em> for
this reason.<p>Even IFW has some limitations which are primarily applicable for the
system apps:<ul class=incremental><li><p>The app in question is whitelisted by the system i.e. the system
cannot function properly without these apps and may cause random
crashes. These apps include but not limited to Android System, System
UI, Phone Services. They will run even if you disable them or block
their components via IFW.<li><p>Another system app or system process is calling a specific
component of the app in question via interprocess communication (IPC).
In this case, the component will be activated regardless of its presence
in the IFW rules or even if the entire app is disabled. If you have such
system apps, the only way to prevent them from running is to get rid of
them.</ul></section><section id=为什么被app-manager禁用的组件没有被其他相关应用程序检测到 class=level3 data-number=4.1.3><h3 data-number=4.1.3><span class=header-section-number>4.1.3</span>
<a href=#toc:为什么被app-manager禁用的组件没有被其他相关应用程序检测到>为什么被App
Manager禁用的组件没有被其他相关应用程序检测到？</a><a href=#为什么被app-manager禁用的组件没有被其他相关应用程序检测到 class=anchor aria-hidden=true></a></h3><p>It is because of the blocking method I’m using. This method is called
<a href=https://carteryagemann.com/pages/android-intent-firewall.html>Intent
Firewall (IFW)</a> and is compatible with <a href=https://github.com/tuyafeng/Watt>Watt</a> and <a href=https://github.com/lihenggui/blocker>Blocker</a>. <a href=https://www.myandroidtools.com>MyAndroidTool (MAT)</a> supports
IFW, but it uses a different format. Therefore, Watt can detect blocked
components by default but Blocker can only detect them if you enable IFW
in its settings page. MAT cannot detect AM’s blocking rules since the
format is different. AM cannot detect MAT’s rules if IFW is enabled in
MAT. In that case, you can still import them from the <a href=#sec:settings-page>settings page</a>. MAT has an export option,
but it’s not supported due to its non-free nature.</section><section id=被其他工具禁用的应用程序组件是否保留在app-manager中 class=level3 data-number=4.1.4><h3 data-number=4.1.4><span class=header-section-number>4.1.4</span>
<a href=#toc:被其他工具禁用的应用程序组件是否保留在app-manager中>被其他工具禁用的应用程序组件是否保留在App
Manager中？</a><a href=#被其他工具禁用的应用程序组件是否保留在app-manager中 class=anchor aria-hidden=true></a></h3><p><strong>No.</strong> But components blocked by the Android System or
any other tools are displayed in the <a href=#sec:app-details-page>App
Details page</a> (within the component tabs). In v2.5.12 and onwards,
you can import these rules in <a href=#par:import-existing-rules>Settings</a>. But since there is no
way to distinguish between components blocked by third-party apps and
components blocked by the System, you should be very careful when
choosing app.</section><section id=被-app-manager-禁用但同时也被其他工具禁用的组件会发生什么 class=level3 data-number=4.1.5><h3 data-number=4.1.5><span class=header-section-number>4.1.5</span>
<a href=#toc:被-app-manager-禁用但同时也被其他工具禁用的组件会发生什么>被
App Manager 禁用但同时也被其他工具禁用的组件会发生什么？</a><a href=#被-app-manager-禁用但同时也被其他工具禁用的组件会发生什么 class=anchor aria-hidden=true></a></h3><p>AM blocks the components again using <a href=https://carteryagemann.com/pages/android-intent-firewall.html>Intent
Firewall (IFW)</a>. They are not unblocked (if blocked using <em>pm</em>
or <a href=https://github.com/RikkaApps/Shizuku>Shizuku</a> method)
and blocked again. But if you unblock a component in the <a href=#sec:app-details-page>App Details page</a>, it will be reverted
back to default state —- blocked or unblocked as described in the
corresponding app manifest —- using both IFW and <em>pm</em> method.
However, components blocked by <a href=https://www.myandroidtools.com>MyAndroidTools (MAT)</a> with IFW
method will not be unblocked by AM. To solve this issue, you can first
import the corresponding configuration to AM in <a href=#par:import-existing-rules>Settings</a> in which case MAT’s
configurations will be removed. But this option is only available from
v2.5.12.</section><section id=subsec:faq:what-is-instant-component-blocking class=level3 data-number=4.1.6><h3 data-number=4.1.6><span class=header-section-number>4.1.6</span>
<a href=#toc:subsec:faq:what-is-instant-component-blocking>什么是即时组件禁用？</a><a href=#subsec:faq:what-is-instant-component-blocking class=anchor aria-hidden=true></a></h3><p>When you block a component in the <a href=#sec:app-details-page>App
Details page</a>, the blocking is not applied by default. It is only
applied when you apply blocking using the <em>Apply rules</em> option in
the top-right menu. If you enable <a href=#subsubsec:instant-component-blocking>instant component
blocking</a>, blocking will be applied as soon as you block a component.
If you choose to block tracker components, however, blocking is applied
automatically regardless of this setting. You can also remove blocking
for an app by simply clicking on <em>Remove rules</em> in the same menu
in the <strong>App Details page</strong>. Since the default behaviour
gives you more control over apps, it is better to keep <em>instant
component blocking</em> option disabled.</section><section id=subsec:tracker-classes-versus-tracker-components class=level3 data-number=4.1.7><h3 data-number=4.1.7><span class=header-section-number>4.1.7</span>
<a href=#toc:subsec:tracker-classes-versus-tracker-components>跟踪器类与跟踪器组件</a><a href=#subsec:tracker-classes-versus-tracker-components class=anchor aria-hidden=true></a></h3><p>All app components are classes but not all classes are components. In
fact, only a few of the classes are components. That being said, <a href=#sec:scanner-page>scanner page</a> displays a list of trackers
along with the number of classes, not just the components. In all other
pages, trackers and tracker components are used synonymously to denote
tracker components, i.e. blocking tracker means blocking tracker
components, not tracker classes.<div class="amalert tip"><p><strong><em>Info.</em></strong><p>Tracker classes cannot be blocked. They can only be removed by
editing the app itself.</div></section><section id=subsec:faq:how-to-unblock-tracker-components class=level3 data-number=4.1.8><h3 data-number=4.1.8><span class=header-section-number>4.1.8</span>
<a href=#toc:subsec:faq:how-to-unblock-tracker-components>如何使用
"一键操作 "或 "批量操作 "解禁的追踪器组件？</a><a href=#subsec:faq:how-to-unblock-tracker-components class=anchor aria-hidden=true></a></h3><p>Some apps may misbehave due to their dependency to tracker components
blocked by AM. From v2.5.12, there is an option to unblock tracker
components in the <a href=#sec:1-click-ops-page>1-Click Ops page</a>.
However, in previous versions, there is no such options. To unblock
these tracker components, first go to the <a href=#sec:app-details-page>App Details page</a> of the misbehaving
app. Then, switching to the <em>Activities</em> tab, click on the
<em>Remove rules</em> options in the top-right menu. All the blocking
rules related to the components of the app will be removed immediately.
Alternatively, if you have found the component that is causing the
issue, you can unblock the component by clicking on the <em>unblock</em>
button next to the component name. If you have enabled <a href=#subsubsec:instant-component-blocking>instant component
blocking</a> in Settings, disable it first as <em>Remove rules</em>
option will not be visible when it is enabled.<p>If you have <strong>Google Play Services</strong>
(<code>com.google.android.gms</code>) installed, unblocking the
following <a href=#subsubsec:details:servcies>services</a> may fix
certain crashes:<ol class=incremental><li><p>Ad Request Broker Service
<span><code>.ads.AdRequestBrokerService</code></span><li><p>Cache Broker Service
<span><code>.ads.cache.CacheBrokerService</code></span><li><p>Gservices Value Broker Service
<span><code>.ads.GservicesValueBrokerService</code></span><li><p>Advertising Id Notification Service
<span><code>.ads.identifier.service.AdvertisingIdNotificationService</code></span><li><p>Advertising Id Service
<span><code>.ads.identifier.service.AdvertisingIdService</code></span></ol></section></section><section id=sec:faq:adb-over-tcp class=level2 data-number=4.2><h2 data-number=4.2><span class=header-section-number>4.2</span> <a href=#toc:sec:faq:adb-over-tcp>ADB over TCP (经由TCP的ADB)</a><a href=#sec:faq:adb-over-tcp class=anchor aria-hidden=true></a></h2><section id=我必须在每次重启后启用adb-over-tcp吗 class=level3 data-number=4.2.1><h3 data-number=4.2.1><span class=header-section-number>4.2.1</span>
<a href=#toc:我必须在每次重启后启用adb-over-tcp吗>我必须在每次重启后启用ADB
over TCP吗？</a><a href=#我必须在每次重启后启用adb-over-tcp吗 class=anchor aria-hidden=true></a></h3><p>Unfortunately, yes. However, as of v2.5.13, you don’t need to keep
AoT enabled all the time as it now uses a server-client mechanism to
interact with the system, but you do have to keep the <strong>Developer
options</strong> as well as <strong>USB debugging</strong> enabled. To
do that, enable <a href=#sec:adb-over-tcp>ADB over TCP</a> and open
App Manager. You should see <em>working on ADB mode</em> toast message
in the bottom. If you see it, you can safely stop the server. For
Lineage OS or its derivative OS, you can toggle AoT without any PC or
Mac by simply toggling the <strong>ADB over network</strong> option
located just below the <strong>USB debugging</strong>, but the server
can’t be stopped for the latter case.</section><section id=无法启用-usb-调试怎么办 class=level3 data-number=4.2.2><h3 data-number=4.2.2><span class=header-section-number>4.2.2</span>
<a href=#toc:无法启用-usb-调试怎么办>无法启用 USB 调试，怎么办？</a><a href=#无法启用-usb-调试怎么办 class=anchor aria-hidden=true></a></h3><p>See §<a href=#subsec:enable-usb-debugging data-reference-type=ref data-reference=subsec:enable-usb-debugging>3.1.2</a> in Chapter <a href=#ch:guides data-reference-type=ref data-reference=ch:guides>3</a>.</section><section id=我可以使用-adb-over-tcp-来禁用跟踪器或任何其他应用程序组件吗 class=level3 data-number=4.2.3><h3 data-number=4.2.3><span class=header-section-number>4.2.3</span>
<a href=#toc:我可以使用-adb-over-tcp-来禁用跟踪器或任何其他应用程序组件吗>我可以使用
ADB over TCP 来禁用跟踪器或任何其他应用程序组件吗？</a><a href=#我可以使用-adb-over-tcp-来禁用跟踪器或任何其他应用程序组件吗 class=anchor aria-hidden=true></a></h3><p>Sadly, no. ADB has limited <a href=https://github.com/aosp-mirror/platform_frameworks_base/blob/master/packages/Shell/AndroidManifest.xml>permissions</a>
and controlling application components is not one of them.</section><section id=哪些功能可以在adb模式下使用 class=level3 data-number=4.2.4><h3 data-number=4.2.4><span class=header-section-number>4.2.4</span>
<a href=#toc:哪些功能可以在adb模式下使用>哪些功能可以在ADB模式下使用？</a><a href=#哪些功能可以在adb模式下使用 class=anchor aria-hidden=true></a></h3><p>Most of the features supported by ADB mode are enabled by default
once ADB support is detected by AM. These include disable, force-stop,
clear data, grant/revoke app ops and permissions. You can also install
applications without any prompt and view <a href=#subsubsec:main:running-apps>running apps/processes</a>.</section></section><section id=sec:faq:miscellanea class=level2 data-number=4.3><h2 data-number=4.3><span class=header-section-number>4.3</span> <a href=#toc:sec:faq:miscellanea>杂项</a><a href=#sec:faq:miscellanea class=anchor aria-hidden=true></a></h2><section id=我不使用rootadb是否完全安全 class=level3 data-number=4.3.1><h3 data-number=4.3.1><span class=header-section-number>4.3.1</span>
<a href=#toc:我不使用rootadb是否完全安全>我不使用root/ADB，是否完全安全？</a><a href=#我不使用rootadb是否完全安全 class=anchor aria-hidden=true></a></h3><p>Yes. AM cannot modify any system settings without root or ADB over
TCP.</section><section id=为什么-app-manager-有联网的权限而它却没有连接到互联网 class=level3 data-number=4.3.2><h3 data-number=4.3.2><span class=header-section-number>4.3.2</span>
<a href=#toc:为什么-app-manager-有联网的权限而它却没有连接到互联网>为什么
App Manager 有联网的权限，而它却没有连接到互联网？</a><a href=#为什么-app-manager-有联网的权限而它却没有连接到互联网 class=anchor aria-hidden=true></a></h3><p>AM uses the INTERNET permission for the following reasons:<ol class=incremental><li><p><strong>To provide ADB over TCP support for the non-root
users.</strong> ADB over TCP is a custom network protocol that usually
runs on port <code>5555</code>. Therefore, to connect to this port via
localhost, AM needs this permission.<li><p><strong>To execute privileged code both on root and ADB
mode.</strong> AM, being a user app, cannot execute privileged code nor
can it access any hidden APIs. Consequently, AM runs a server in the
privileged environment using <code>app_process</code> at port
<code>60001</code> and on the user side, AM connects to this server and
execute privileged code remotely from the app. Now, there are
alternative ways to communicate with a remote service. Currently, they
are under consideration.</ol></section><section id=跟踪器和库是如何更新的 class=level3 data-number=4.3.3><h3 data-number=4.3.3><span class=header-section-number>4.3.3</span>
<a href=#toc:跟踪器和库是如何更新的>跟踪器和库是如何更新的？</a><a href=#跟踪器和库是如何更新的 class=anchor aria-hidden=true></a></h3><p>Trackers and libraries are updated manually before making a new
release.</section><section id=对于-shizuku-有何计划 class=level3 data-number=4.3.4><h3 data-number=4.3.4><span class=header-section-number>4.3.4</span>
<a href=#toc:对于-shizuku-有何计划>对于 Shizuku 有何计划？</a><a href=#对于-shizuku-有何计划 class=anchor aria-hidden=true></a></h3><p>App Manager’s use of hidden API and privileged code execution is now
much more complex and cannot be integrated with other third party apps
such as <a href=https://shizuku.rikka.app>Shizuku</a>. Here are some
reasons for not considering Shizuku (which now has Apache 2.0 license)
for App Manager:<ol class=incremental><li><p>Shizuku was initially non-free which led me to use a similar
approach for App Manager to support both root and ADB<li><p>App Manager already supports both ADB and root which in some
cases is more capable than Shizuku<li><p>Relying on a third-party app for the major functionalities is not
a good design choice<li><p>Integration of Shizuku will increase the complexity of App
Manager.</ol></section><section id=subsec:faq:what-are-bloatware class=level3 data-number=4.3.5><h3 data-number=4.3.5><span class=header-section-number>4.3.5</span>
<a href=#toc:subsec:faq:what-are-bloatware>什么是预装(bloatware)软件以及如何删除？</a><a href=#subsec:faq:what-are-bloatware class=anchor aria-hidden=true></a></h3><p>Bloatware are the unnecessary apps supplied by the vendor or OEM and
are usually system apps. These apps are often used to track users and
collect user data which they might sell for profits. System apps do not
need to request any permission in order to access device info, contacts
and messaging data, and other usage info such as your phone usage habits
and everything you store on your shared storage(s).<p>The bloatware may also include Google apps (such as Google Play
Services, Google Play Store, Gmail, Google, Messages, Dialer, Contacts),
Facebook apps (the Facebook app consists of four or five apps), Facebook
Messenger, Instagram, Twitter and many other apps which can also track
users and/or collect user data without consent given that they all are
system apps. You can disable a few permissions from the Android settings
but be aware that Android settings hides almost every permission any
security specialist would call potentially <em>dangerous</em>.<p>If the bloatware were user apps, you could easily uninstall them
either from Android settings or AM. Uninstalling system apps is not
possible without root permission. You can also uninstall system apps
using ADB, but it may not work for all apps. AM can uninstall system
apps with root or ADB (the latter with certain limitations, of course),
but these methods cannot <em>remove</em> the system apps completely as
they are located in the <em>system</em> partition which is a read-only
partition. If you have root, you can remount this partition to manually
<em>purge</em> these apps but this will break Over the Air (OTA) updates
since data in the system partition has been modified. There are two kind
of updates, delta (small-size, consisting of only the changes between
two versions) and full updates. You can still apply full updates, but
the bloatware will be installed again, and consequently, you have to
delete them all over again. Besides, not all vendors provide full
updates.<p>Another solution is to disable these apps either from Android
settings (no-root) or AM, but certain services can still run in the
background as they can be started by other system apps using
Inter-process Communication (IPC). One possible solution is to disable
all bloatware until the service has finally stopped (after a restart).
However, due to heavy modifications of the Android frameworks by the
vendors, removing or disabling certain bloatware may cause the System UI
to crash or even cause bootloop, thus, (soft) bricking your device. You
may search the web or consult the fellow users to find out more about
how to debloat your device.<p>From v2.5.19, AM has a new feature called <a href=#sec:profile-page>profiles</a>. The <a href=#sec:profiles-page>profiles page</a> has an option to create new
profiles from one of the presets. The presets consist of debloating
profiles which can be used as a starting point to monitor, disable, and
remove the bloatware from a proprietary Android operating system.<div class="amalert warning"><p><strong><em>Note.</em></strong><p>In most cases, you cannot completely debloat your device. Therefore,
it is recommended that you use a custom ROM free from bloatware such as
Graphene OS, Lineage OS or their derivatives.</div></section></section></section><section id=ch:specifications class=level1 data-number=5><h1 data-number=5><span class=header-section-number>5</span> <a href=#toc:ch:specifications>语法</a><a href=#ch:specifications class=anchor aria-hidden=true></a></h1><section id=sec:rules-specification class=level2 data-number=5.1><h2 data-number=5.1><span class=header-section-number>5.1</span> <a href=#toc:sec:rules-specification>规则语法</a><a href=#sec:rules-specification class=anchor aria-hidden=true></a></h2><section id=背景介绍 class=level3 data-number=5.1.1><h3 data-number=5.1.1><span class=header-section-number>5.1.1</span>
<a href=#toc:背景介绍>背景介绍</a><a href=#背景介绍 class=anchor aria-hidden=true></a></h3><p>AM currently supports blocking activities, broadcast receivers,
content providers, services, app ops and permissions, and in future I
may add more blocking options. In order to add more portability, it is
necessary to import/export all these data.<p>Maintaining a database should be the best choice when it comes to
storing data. For now, several <code>tsv</code> files with each file
having the name of the package and a <code>.tsv</code> extension. The
file/database will be queried/processed by the
<code>RulesStorageManager</code> class. Due to this abstraction, it
should be easier to switch to database or encrypted database systems in
future without changing the design of the entire project. Currently, All
configuration files are stored at
<code>/data/data/io.github.muntashirakon.AppManager/Files/conf</code>.</section><section id=规则文件格式 class=level3 data-number=5.1.2><h3 data-number=5.1.2><span class=header-section-number>5.1.2</span>
<a href=#toc:规则文件格式>规则文件格式</a><a href=#规则文件格式 class=anchor aria-hidden=true></a></h3><section id=内部 class=level4 data-number=5.1.2.1><h4 data-number=5.1.2.1><span class=header-section-number>5.1.2.1</span> 内部<a href=#内部 class=anchor aria-hidden=true></a></h4><p>The format below is used internally within App Manager and is <em>not
compatible with the external format.</em><pre><code>    &lt;name&gt; &lt;type&gt; &lt;mode&gt;|&lt;component_status&gt;|&lt;is_granted&gt;</code></pre><p>Here:<ul class=incremental><li><p><code>&lt;name></code> – Component/permission/app op name (in
case of app op, it could be string or integer)<li><p><code>&lt;type></code> – One of the <code>ACTIVITY</code>,
<code>RECEIVER</code>, <code>PROVIDER</code>, <code>SERVICE</code>,
<code>APP_OP</code>, <code>PERMISSION</code><li><p><code>&lt;mode></code> – (For app ops) The associated <a href=#subsec:mode-constants>mode constant</a><li><p><code>&lt;component_status></code> – (For components)
Component status<ul class=incremental><li><p><code>true</code> – Component has been applied (<code>true</code>
value is kept for compatibility)<li><p><code>false</code> – Component hasn’t been applied yet, but will
be applied in future (<code>false</code> value is kept for
compatibility)<li><p><code>unblocked</code> – Component is scheduled to be
unblocked</ul><li><p><code>&lt;is_granted></code> – (For permissions) Whether the
permission is granted or revoked</ul></section><section id=外部 class=level4 data-number=5.1.2.2><h4 data-number=5.1.2.2><span class=header-section-number>5.1.2.2</span> 外部<a href=#外部 class=anchor aria-hidden=true></a></h4><p>External format is used for importing or exporting rules in App
Manager.<pre><code>    &lt;package_name&gt; &lt;component_name&gt; &lt;type&gt; &lt;mode&gt;|&lt;component_status&gt;|&lt;is_granted&gt;</code></pre><p>This the format is essentially the same as above except for the first
item which is the name of the package.<div class="amalert danger"><p><strong><em>Caution.</em></strong><p>The exported rules have a different format than the internal one and
should not be copied directly to the <strong>conf</strong> folder.</div></section></section></section></section><section id=ch:changelogs class=level1 data-number=6><h1 data-number=6><span class=header-section-number>6</span> <a href=#toc:ch:changelogs>更新日志</a><a href=#ch:changelogs class=anchor aria-hidden=true></a></h1><section id=sec:v2.6.0-(385) class=level2 data-number=6.1><h2 data-number=6.1><span class=header-section-number>6.1</span> <a href=#toc:sec:v2.6.0-(385)>v2.6.0 (385)</a><a href=#sec:v2.6.0-(385) class=anchor aria-hidden=true></a></h2><section id=introducing-backups class=level3 data-number=6.1.1><h3 data-number=6.1.1><span class=header-section-number>6.1.1</span>
<a href=#toc:introducing-backups>Introducing Backups</a><a href=#introducing-backups class=anchor aria-hidden=true></a></h3><p>Back up/restore feature is now finally out of beta! Read <a href=#sec:backup-restore>the corresponding guide</a> to understand how
it works.</section><section id=introducing-log-viewer class=level3 data-number=6.1.2><h3 data-number=6.1.2><span class=header-section-number>6.1.2</span>
<a href=#toc:introducing-log-viewer>Introducing Log Viewer</a><a href=#introducing-log-viewer class=anchor aria-hidden=true></a></h3><p><a href=#subsubsec:log-viewer>Log viewer</a> is essentially a
front-end for <code>logcat</code>. It can be used to filter logs by
<em>tag</em> or <em>pid</em> (process ID), or even by custom filters.
Log levels AKA verbosity can also be configured. You can also save,
share and manage logs.</section><section id=lock-app-manager class=level3 data-number=6.1.3><h3 data-number=6.1.3><span class=header-section-number>6.1.3</span>
<a href=#toc:lock-app-manager>Lock App Manager</a><a href=#lock-app-manager class=anchor aria-hidden=true></a></h3><p><a href=#subsec:screen-lock>Lock App Manager</a> with the screen
lock configured for your device.</section><section id=extended-modes-for-app-ops class=level3 data-number=6.1.4><h3 data-number=6.1.4><span class=header-section-number>6.1.4</span>
<a href=#toc:extended-modes-for-app-ops>Extended Modes for App
Ops</a><a href=#extended-modes-for-app-ops class=anchor aria-hidden=true></a></h3><p>You can set any mode for any app ops that your device supports,
either from the <a href=#subsec:set-mode-for-app-ops-dots>1-click ops
page</a> or from the <a href=#subsubsec:app-ops>app ops tab</a>.</section><section id=new-batch-ops-add-to-profile class=level3 data-number=6.1.5><h3 data-number=6.1.5><span class=header-section-number>6.1.5</span>
<a href=#toc:new-batch-ops-add-to-profile>New Batch Ops: Add to
Profile</a><a href=#new-batch-ops-add-to-profile class=anchor aria-hidden=true></a></h3><p>You can now easily add selected apps to an existing profile using the
batch operations.</section><section id=app-info-improved class=level3 data-number=6.1.6><h3 data-number=6.1.6><span class=header-section-number>6.1.6</span>
<a href=#toc:app-info-improved>App Info: Improved</a><a href=#app-info-improved class=anchor aria-hidden=true></a></h3><p>App info tab now has many options, including the ability to change <a href=#sec:terminologies>SSAID</a>, network policy (i.e. background
network usage), battery optimization, etc. Most of the tags used in this
tab are also clickable, and if you click on them, you will be able to
look at the current state or configure them right away.</section><section id=advanced-sort-and-filtering-options-in-the-main-page class=level3 data-number=6.1.7><h3 data-number=6.1.7><span class=header-section-number>6.1.7</span>
<a href=#toc:advanced-sort-and-filtering-options-in-the-main-page>Advanced
Sort and Filtering Options in the Main Page</a><a href=#advanced-sort-and-filtering-options-in-the-main-page class=anchor aria-hidden=true></a></h3><p>Sort and filter options are now replaced by <a href=#subsubsec:main-list-options>List Options</a> which is highly
configurable, including the ability to filter using profiles.</section><section id=about-this-device class=level3 data-number=6.1.8><h3 data-number=6.1.8><span class=header-section-number>6.1.8</span>
<a href=#toc:about-this-device>About This Device</a><a href=#about-this-device class=anchor aria-hidden=true></a></h3><p>Interested in knowing about your device in just one page? Go to the
bottom of the <a href=#subsec:device-info>settings page</a>.</section><section id=enabledisable-features class=level3 data-number=6.1.9><h3 data-number=6.1.9><span class=header-section-number>6.1.9</span>
<a href=#toc:enabledisable-features>Enable/disable Features</a><a href=#enabledisable-features class=anchor aria-hidden=true></a></h3><p>Not interested in all the features that AM offers? You can disable
some features in <a href=#subsec:enable/disable-features>settings</a>.</section><section id=new-languages class=level3 data-number=6.1.10><h3 data-number=6.1.10><span class=header-section-number>6.1.10</span> <a href=#toc:new-languages>New Languages</a><a href=#new-languages class=anchor aria-hidden=true></a></h3><p>AM now has more than 19 languages! New languages include Farsi,
Japanese and Traditional Chinese.</section><section id=signing-the-apk-files class=level3 data-number=6.1.11><h3 data-number=6.1.11><span class=header-section-number>6.1.11</span> <a href=#toc:signing-the-apk-files>Signing the APK Files</a><a href=#signing-the-apk-files class=anchor aria-hidden=true></a></h3><p>You can now import external signing keys in AM! For security, App
Manager has its own encrypted KeyStore which can also be <a href=#subsec:import/export-keystore>imported or exported</a>.</section><section id=new-extension-unapkm class=level3 data-number=6.1.12><h3 data-number=6.1.12><span class=header-section-number>6.1.12</span> <a href=#toc:new-extension-unapkm>New Extension: UnAPKM</a><a href=#new-extension-unapkm class=anchor aria-hidden=true></a></h3><p>Since APKMirror has removed encryption from their APKM files, it’s no
longer necessary to decrypt them. As a result, the option to decrypt
APKM files has been removed. Instead, this option is now provided by the
UnAPKM extension which you can grab from <a href=https://f-droid.org/packages/io.github.muntashirakon.unapkm/>F-Droid</a>.
So, if you have an encrypted APKM file and have this extension
installed, you can open the file directly in AM.</section></section><section id=sec:v2.5.20-(375) class=level2 data-number=6.2><h2 data-number=6.2><span class=header-section-number>6.2</span> <a href=#toc:sec:v2.5.20-(375)>v2.5.20 (375)</a><a href=#sec:v2.5.20-(375) class=anchor aria-hidden=true></a></h2><section id=subsec:introducing-profiles class=level3 data-number=6.2.1><h3 data-number=6.2.1><span class=header-section-number>6.2.1</span>
<a href=#toc:subsec:introducing-profiles>Introducing Profiles</a><a href=#subsec:introducing-profiles class=anchor aria-hidden=true></a></h3><p><a href=#sec:profile-page>Profiles</a> finally closes the <a href=https://github.com/MuntashirAkon/AppManager/issues/72>related
issue</a>. Profiles can be used to execute certain tasks repeatedly
without doing everything manually. A profile can be applied (or invoked)
either from the <a href=#sec:profiles-page>Profiles page</a> or from
the home screen by creating shortcuts. There are also some presets which
consist of debloating profiles taken from <a href=https://gitlab.com/W1nst0n/universal-android-debloater>Universal
Android Debloater</a>.<section id=known-limitations class=level5 data-number=6.2.1.0.1><h5 data-number=6.2.1.0.1><span class=header-section-number>6.2.1.0.1</span> Known limitations<a href=#known-limitations class=anchor aria-hidden=true></a></h5><ul class=incremental><li><p>Exporting rules and applying permissions are not currently
working.<li><p>Profiles are applied for all users.</ul></section></section><section id=subsec:the-interceptor class=level3 data-number=6.2.2><h3 data-number=6.2.2><span class=header-section-number>6.2.2</span>
<a href=#toc:subsec:the-interceptor>The Interceptor</a><a href=#subsec:the-interceptor class=anchor aria-hidden=true></a></h3><p><a href=https://github.com/MuntashirAkon/intent-intercept>Intent
Intercept</a> works as a man-in-the-middle between source and
destination, that is, when you open a file or URL with another app, you
can see what is being shared by opening it with Interceptor first. You
can also add or modify the intents before sending them to the
destination. Additionally, you can double-click on any exportable
activities in the Activities tab in the App Details page to open them in
the Interceptor to add more configurations.<section id=known-limitation class=level5 data-number=6.2.2.0.1><h5 data-number=6.2.2.0.1><span class=header-section-number>6.2.2.0.1</span> Known limitation<a href=#known-limitation class=anchor aria-hidden=true></a></h5><p>Editing extras is not currently possible.</section></section><section id=subsec:unapkm:-dedrm-the-apkm-files class=level3 data-number=6.2.3><h3 data-number=6.2.3><span class=header-section-number>6.2.3</span>
<a href=#toc:subsec:unapkm:-dedrm-the-apkm-files>UnAPKM: DeDRM the
APKM files</a><a href=#subsec:unapkm:-dedrm-the-apkm-files class=anchor aria-hidden=true></a></h3><p>When I released a small tool called <a href=https://f-droid.org/en/packages/io.github.muntashirakon.unapkm>UnAPKM</a>,
I promised that similar feature will be available in App Manager. I am
proud to announce that you can open APKM files directly in the App Info
page or convert them to APKS or install them directly.</section><section id=subsec:multiple-user class=level3 data-number=6.2.4><h3 data-number=6.2.4><span class=header-section-number>6.2.4</span>
<a href=#toc:subsec:multiple-user>Multiple user</a><a href=#subsec:multiple-user class=anchor aria-hidden=true></a></h3><p>App manager now supports multiple users! For now, this requires root
or ADB. But no-root support is also being considered. If you have
multiple users enabled and click on an app installed in multiple
profiles, an alert prompt will be displayed where you can select the
user.</section><section id=vive-la-france class=level3 data-number=6.2.5><h3 data-number=6.2.5><span class=header-section-number>6.2.5</span>
<a href=#toc:vive-la-france>Vive la France!</a><a href=#vive-la-france class=anchor aria-hidden=true></a></h3><p>Thanks to the contributors, we have one more addition to the language
club: French. You can add more languages or improve existing
translations at <a href=https://hosted.weblate.org/engage/app-manager>Weblate</a>.</section><section id=report-crashes class=level3 data-number=6.2.6><h3 data-number=6.2.6><span class=header-section-number>6.2.6</span>
<a href=#toc:report-crashes>Report crashes</a><a href=#report-crashes class=anchor aria-hidden=true></a></h3><p>If App Manager crashes, you can now easily report the crash from the
notifications which opens the share options. Crashes are not reported by
App Manager, it only redirects you to your favourite Email client.</section><section id=android-11 class=level3 data-number=6.2.7><h3 data-number=6.2.7><span class=header-section-number>6.2.7</span>
<a href=#toc:android-11>Android 11</a><a href=#android-11 class=anchor aria-hidden=true></a></h3><p>Added support for Android 11. Not everything may work as expected
though.</section><section id=app-installer-improvements class=level3 data-number=6.2.8><h3 data-number=6.2.8><span class=header-section-number>6.2.8</span>
<a href=#toc:app-installer-improvements>App Installer
Improvements</a><a href=#app-installer-improvements class=anchor aria-hidden=true></a></h3><section id=set-installation-locations class=level4 data-number=6.2.8.1><h4 data-number=6.2.8.1><span class=header-section-number>6.2.8.1</span> Set installation
locations<a href=#set-installation-locations class=anchor aria-hidden=true></a></h4><p>In settings page, you can set install locations such as auto
(default), internal only and prefer external.</section><section id=set-apk-installer class=level4 data-number=6.2.8.2><h4 data-number=6.2.8.2><span class=header-section-number>6.2.8.2</span> Set APK installer<a href=#set-apk-installer class=anchor aria-hidden=true></a></h4><p>In settings page, you can also set default APK installer (root/ADB
only) instead of App Manager.</section><section id=multiple-users class=level4 data-number=6.2.8.3><h4 data-number=6.2.8.3><span class=header-section-number>6.2.8.3</span> Multiple users<a href=#multiple-users class=anchor aria-hidden=true></a></h4><p>In settings page, you can allow App Manager to display multiple users
during APK installation.</section><section id=signing-apk-files class=level4 data-number=6.2.8.4><h4 data-number=6.2.8.4><span class=header-section-number>6.2.8.4</span> Signing APK files<a href=#signing-apk-files class=anchor aria-hidden=true></a></h4><p>In settings page, you can choose to sign APK files before installing
them. You can also select which signature scheme to use in the <em>APK
signing</em> option in settings.<section id=known-limitation-1 class=level5 data-number=6.2.8.4.1><h5 data-number=6.2.8.4.1><span class=header-section-number>6.2.8.4.1</span> Known limitation<a href=#known-limitation-1 class=anchor aria-hidden=true></a></h5><p>Currently, only a generic key is used to sign APK files</section></section></section></section><section id=v2.5.17-368 class=level2 data-number=6.3><h2 data-number=6.3><span class=header-section-number>6.3</span> <a href=#toc:v2.5.17-368>v2.5.17 (368)</a><a href=#v2.5.17-368 class=anchor aria-hidden=true></a></h2><section id=app-installer class=level3 data-number=6.3.1><h3 data-number=6.3.1><span class=header-section-number>6.3.1</span>
<a href=#toc:app-installer>App Installer</a><a href=#app-installer class=anchor aria-hidden=true></a></h3><p>As promised, it is now possible to select splits. AM also provides
recommendations based on device configurations. If the app is already
installed, recommendations are provided based on the installed app. It
is also possible to downgrade to a lower version without data loss if
the device has root or ADB. But it should be noted that not all app can
be downgraded. Installer is also improved to speed up the installation
process, especially, for root users. If the app has already been
installed and the new (x)apk(s) is newer or older or the same version
with a different signature, AM will display a list of changes similar to
<strong>What’s New</strong> before prompting the user to install the
app. This is useful if the app has introduced tracker components, new
permissions, etc.<section id=known-limitations-1 class=level5 data-number=6.3.1.0.1><h5 data-number=6.3.1.0.1><span class=header-section-number>6.3.1.0.1</span> Known Limitations<a href=#known-limitations-1 class=anchor aria-hidden=true></a></h5><ul class=incremental><li><p>Large app can take a long time to fetch app info and therefore it
may take a long time display the installation prompt.<li><p>If the apk is not located in the internal storage, the app has to
be cached first which might also take a long time depending on the size
of the apk.</ul></section></section><section id=scanner-replacement-for-exodus-page class=level3 data-number=6.3.2><h3 data-number=6.3.2><span class=header-section-number>6.3.2</span>
<a href=#toc:scanner-replacement-for-exodus-page>Scanner: Replacement
for Exodus Page</a><a href=#scanner-replacement-for-exodus-page class=anchor aria-hidden=true></a></h3><p>Exodus page is now replaced with scanner page. <a href=#sec:scanner-page>Scanner page</a> contains not only a list of
trackers but also a list of used libraries. This is just a start. In the
future, this page will contain more in depth analysis of the app.</section><section id=introducing-system-config class=level3 data-number=6.3.3><h3 data-number=6.3.3><span class=header-section-number>6.3.3</span>
<a href=#toc:introducing-system-config>Introducing System Config</a><a href=#introducing-system-config class=anchor aria-hidden=true></a></h3><p>System Config lists various system configurations and
whitelists/blacklists included in Android by either OEM/vendor, AOSP or
even some Magisk modules. Root users can access this option from the
overflow menu in the main page. There isn’t any official documentation
for these options therefore it’s difficult to write a complete
documentation for this page. I will gradually add documentations using
my own knowledge. However, some functions should be understandable by
their name.</section><section id=more-languages class=level3 data-number=6.3.4><h3 data-number=6.3.4><span class=header-section-number>6.3.4</span>
<a href=#toc:more-languages>More Languages</a><a href=#more-languages class=anchor aria-hidden=true></a></h3><p>Thanks to the contributors, AM now has more than 12 languages. New
languages include Bengali, Hindi, Norwegian, Polish, Russian, Simplified
Chinese, Turkish and Ukrainian.</section><section id=app-info-tab class=level3 data-number=6.3.5><h3 data-number=6.3.5><span class=header-section-number>6.3.5</span>
<a href=#toc:app-info-tab>App Info Tab</a><a href=#app-info-tab class=anchor aria-hidden=true></a></h3><p>More tags are added in the <a href=#subsec:app-info-tab>app info
tab</a> such as <strong>KeyStore</strong> (apps with KeyStore items),
<strong>Systemless app</strong> (apps installed via Magisk),
<strong>Running</strong> (apps that are running). For external apk, two
more options are added namely <strong>Reinstall</strong> and
<strong>Downgrade</strong>. Now it is possible to share an apk via
Bluetooth. For system apps, it is possible to uninstall updates for
root/ADB users. But like the similar option in the system settings, this
operation will clear all app data. As stated above, exodus has been
replaced with scanner.</section><section id=navigation-improvements class=level3 data-number=6.3.6><h3 data-number=6.3.6><span class=header-section-number>6.3.6</span>
<a href=#toc:navigation-improvements>Navigation Improvements</a><a href=#navigation-improvements class=anchor aria-hidden=true></a></h3><p>It’s now relatively easy to navigate to various UI components using
keyboard. You can use up/down button to navigate between list items and
tab button to navigate to UI components inside an item.</section><section id=running-apps-page class=level3 data-number=6.3.7><h3 data-number=6.3.7><span class=header-section-number>6.3.7</span>
<a href=#toc:running-apps-page>Running Apps Page</a><a href=#running-apps-page class=anchor aria-hidden=true></a></h3><p>It is now possible to sort and filter processes in this tab. Also,
the three big buttons are replaced with an easy-to-use three dot menu.
Previously the memory usage was wrong which is fixed in this
version.</section><section id=built-in-toybox class=level3 data-number=6.3.8><h3 data-number=6.3.8><span class=header-section-number>6.3.8</span>
<a href=#toc:built-in-toybox>Built-in Toybox</a><a href=#built-in-toybox class=anchor aria-hidden=true></a></h3><p>Toybox (an alternative to busybox) is bundled with AM. Although
Android has this utility built-in from API 23, toybox is bundled in
order to prevent buggy implementations and to support API &lt; 23.</section><section id=component-blocker-improvements class=level3 data-number=6.3.9><h3 data-number=6.3.9><span class=header-section-number>6.3.9</span>
<a href=#toc:component-blocker-improvements>Component Blocker
Improvements</a><a href=#component-blocker-improvements class=anchor aria-hidden=true></a></h3><p>Component blocker seemed to be problematic in the previous version,
especially when global component blocking is enabled. The issues are
mostly fixed now.<div class="amalert warning"><p><strong><em>Caution.</em></strong><p>The component blocking mechanism is no longer compatible with v2.5.6
due to various security issues. If you have this version, upgrade to
v2.5.13 or earlier versions first. After that, enable <a href=#subsubsec:instant-component-blocking>global component
blocking</a> and disable it again.</div></section><section id=improvements-in-the-app-details-page class=level3 data-number=6.3.10><h3 data-number=6.3.10><span class=header-section-number>6.3.10</span> <a href=#toc:improvements-in-the-app-details-page>Improvements in the App
Details Page</a><a href=#improvements-in-the-app-details-page class=anchor aria-hidden=true></a></h3><p>Value of various app ops depend on their parent app ops. Therefore,
when you allow/deny an app op, the parent of the app op gets modified.
This fixes the issues some users have been complaining regarding some
app ops that couldn’t be changed.<p>If an app has the target API 23 or less, its permissions cannot be
modified using the <code>pm grant …</code> command. Therefore, for such
apps, option to toggle permission has been disabled.<p>The signature tab is improved to support localization. It also
displays multiple checksums for a signature.</section><section id=app-manifest class=level3 data-number=6.3.11><h3 data-number=6.3.11><span class=header-section-number>6.3.11</span> <a href=#toc:app-manifest>App Manifest</a><a href=#app-manifest class=anchor aria-hidden=true></a></h3><p>Manifest no longer crashes if the size of the manifest is too long.
Generated manifest are now more accurate than before.</section></section><section id=v2.5.13-348 class=level2 data-number=6.4><h2 data-number=6.4><span class=header-section-number>6.4</span> <a href=#toc:v2.5.13-348>v2.5.13 (348)</a><a href=#v2.5.13-348 class=anchor aria-hidden=true></a></h2><section id=bundled-app-split-apk class=level3 data-number=6.4.1><h3 data-number=6.4.1><span class=header-section-number>6.4.1</span>
<a href=#toc:bundled-app-split-apk>Bundled App (Split APK)</a><a href=#bundled-app-split-apk class=anchor aria-hidden=true></a></h3><p>Bundled app formats such as <strong>apks</strong> and
<strong>xapk</strong> are now supported. You can install these apps
using the regular installation buttons. For root and adb users, apps are
installed using shell, and for non-root users, the platform default
method is used.<section id=known-limitations-2 class=level5 data-number=6.4.1.0.1><h5 data-number=6.4.1.0.1><span class=header-section-number>6.4.1.0.1</span> Known Limitations<a href=#known-limitations-2 class=anchor aria-hidden=true></a></h5><ul class=incremental><li><p>Currently <em>all</em> splits apks are installed. But this
behaviour is going to change in the next release. If you only need a few
splits instead of all, extract the <strong>APKS</strong> or
<strong>XAPK</strong> file, and then, create a new zip file with your
desired split apks and replace the <strong>ZIP</strong> extension with
<strong>APKS</strong>. Now, open it with AM.<li><p>There is no progress dialog to display the installation
progress.</ul></section></section><section id=direct-install-support class=level3 data-number=6.4.2><h3 data-number=6.4.2><span class=header-section-number>6.4.2</span>
<a href=#toc:direct-install-support>Direct Install Support</a><a href=#direct-install-support class=anchor aria-hidden=true></a></h3><p>You can now install <strong>APK</strong>, <strong>APKS</strong> or
<strong>XAPK</strong> directly from your favourite browser or file
manager. For apps that need updates, a <strong>What’s New</strong>
dialog is displayed showing the changes in the new version.<section id=known-limitations-3 class=level5 data-number=6.4.2.0.1><h5 data-number=6.4.2.0.1><span class=header-section-number>6.4.2.0.1</span> Known Limitations<a href=#known-limitations-3 class=anchor aria-hidden=true></a></h5><ul class=incremental><li><p>Downgrade is not yet possible.<li><p>There is no progress dialog to display the installation progress.
If you cannot interact with the current page, wait until the
installation is finished.</ul></section></section><section id=remove-all-blocking-rules class=level3 data-number=6.4.3><h3 data-number=6.4.3><span class=header-section-number>6.4.3</span>
<a href=#toc:remove-all-blocking-rules>Remove All Blocking Rules</a><a href=#remove-all-blocking-rules class=anchor aria-hidden=true></a></h3><p>In the Settings page, a new option is added which can be used to
remove all blocking rules configured within App Manager.</section><section id=app-ops class=level3 data-number=6.4.4><h3 data-number=6.4.4><span class=header-section-number>6.4.4</span>
<a href=#toc:app-ops>App Ops</a><a href=#app-ops class=anchor aria-hidden=true></a></h3><ul class=incremental><li><p>App Ops are now generated using a technique similar to AppOpsX.
This should decrease the loading time significantly in the App Ops
tab.<li><p>In the App Ops tab, a menu item is added which can be used to
list only active app ops without including the default app ops. The
preference is saved in the shared preferences.</ul><section id=known-limitation-2 class=level5 data-number=6.4.4.0.1><h5 data-number=6.4.4.0.1><span class=header-section-number>6.4.4.0.1</span> Known Limitation<a href=#known-limitation-2 class=anchor aria-hidden=true></a></h5><p>Often the App Ops tab may not be responsive. If that’s the case,
restart App Manager.</section></section><section id=enhanced-adb-support class=level3 data-number=6.4.5><h3 data-number=6.4.5><span class=header-section-number>6.4.5</span>
<a href=#toc:enhanced-adb-support>Enhanced ADB Support</a><a href=#enhanced-adb-support class=anchor aria-hidden=true></a></h3><p>ADB shell commands are now executed using a technique similar to
AppOpsX (This is the <em>free</em> alternative of AppOps by Rikka.).
This should dramatically increase the execution time.<section id=known-limitation-3 class=level5 data-number=6.4.5.0.1><h5 data-number=6.4.5.0.1><span class=header-section-number>6.4.5.0.1</span> Known Limitation<a href=#known-limitation-3 class=anchor aria-hidden=true></a></h5><p>AM can often crash or become not responsive. If that’s the case,
restart App Manager.</section></section><section id=filtering-in-main-page class=level3 data-number=6.4.6><h3 data-number=6.4.6><span class=header-section-number>6.4.6</span>
<a href=#toc:filtering-in-main-page>Filtering in Main Page</a><a href=#filtering-in-main-page class=anchor aria-hidden=true></a></h3><p>Add an option to filter apps that has at least one activity.</section><section id=apk-backupsharing class=level3 data-number=6.4.7><h3 data-number=6.4.7><span class=header-section-number>6.4.7</span>
<a href=#toc:apk-backupsharing>Apk Backup/Sharing</a><a href=#apk-backupsharing class=anchor aria-hidden=true></a></h3><p>Apk files are now saved as <code>app name_version.extension</code>
instead of <code>package.name.extension</code>.</section><section id=batch-ops class=level3 data-number=6.4.8><h3 data-number=6.4.8><span class=header-section-number>6.4.8</span>
<a href=#toc:batch-ops>Batch Ops</a><a href=#batch-ops class=anchor aria-hidden=true></a></h3><ul class=incremental><li><p>Added a foreground service to run batch operations. The result of
the operation is displayed in a notification. If an operation has failed
for some packages, clicking on the notification will open a dialog box
listing the failed packages. There is also a <strong>Try Again</strong>
button on the bottom which can be used to perform the operation again
for the failed packages.<li><p>Replaced Linux <em>kill</em> with
<strong>force-stop</strong>.</ul></section><section id=translations class=level3 data-number=6.4.9><h3 data-number=6.4.9><span class=header-section-number>6.4.9</span>
<a href=#toc:translations>Translations</a><a href=#translations class=anchor aria-hidden=true></a></h3><p>Added German and Portuguese (Brazilian) translations.<section id=known-limitation-4 class=level5 data-number=6.4.9.0.1><h5 data-number=6.4.9.0.1><span class=header-section-number>6.4.9.0.1</span> Known Limitation<a href=#known-limitation-4 class=anchor aria-hidden=true></a></h5><p>Not all translations are verified yet.</section></section><section id=app-data-backup class=level3 data-number=6.4.10><h3 data-number=6.4.10><span class=header-section-number>6.4.10</span> <a href=#toc:app-data-backup>App Data Backup</a><a href=#app-data-backup class=anchor aria-hidden=true></a></h3><p>Install app only for the current user at the time of restoring
backups. Support for split apks is also added.<p><em>Data backup feature is now considered unstable. If you encounter
any problem, please report to me without hesitation.</em></section></section></section><section id=ch:app-ops class=level1 data-number=7><h1 data-number=7><span class=header-section-number>7</span> <a href=#toc:ch:app-ops>App Ops</a><a href=#ch:app-ops class=anchor aria-hidden=true></a></h1><section id=sec:app-ops-background class=level2 data-number=7.1><h2 data-number=7.1><span class=header-section-number>7.1</span> <a href=#toc:sec:app-ops-background>Background</a><a href=#sec:app-ops-background class=anchor aria-hidden=true></a></h2><p><strong>App Ops</strong> (short hand for <strong>Application
Operations</strong>) are used by Android system (since Android 4.3) to
control application permissions. The user <em>can</em> control some
permissions, but only the permissions that are considered dangerous (and
Google thinks knowing your phone number isn’t a dangerous thing). So,
app ops seems to be the one we need if we want to install apps like
Facebook and it’s Messenger (the latter literary records everything if
you live outside the EU) and still want <em>some</em> privacy and/or
security. Although certain features of app ops were available in
Settings and later in hidden settings in older version of Android, it’s
completely hidden in newer versions of Android and is continued to be
kept hidden. Now, any app with
<strong>android.Manifest.permission.GET_APP_OPS_STATS</strong>
permission can get the app ops information for other applications but
this permission is hidden from users and can only be enabled using ADB
or root. Still, the app with this permission cannot grant or revoke
permissions (actually mode of operation) for apps other than itself
(with limited capacity, of course). To modify the ops of other app, the
app needs
<strong>android.Manifest.permission.UPDATE_APP_OPS_STATS</strong>
permissions which isn’t accessible via <code>pm</code> command. So, you
cannot grant it via root or ADB, the permission is only granted to the
system apps. There are very few apps who support disabling permissions
via app ops. The best one to my knowledge is <a href=https://github.com/8enet/AppOpsX>AppOpsX</a>. The main (visible)
difference between my app (AppManager) and this app is that the latter
also provides you the ability to revoke internet permissions (by writing
ip tables). One crucial problem that I faced during the development of
the app ops API is the lack of documentation in English language.</section><section id=sec:introduction-to-app-ops class=level2 data-number=7.2><h2 data-number=7.2><span class=header-section-number>7.2</span> <a href=#toc:sec:introduction-to-app-ops>Introduction to App Ops</a><a href=#sec:introduction-to-app-ops class=anchor aria-hidden=true></a></h2><p><figure><object data=../images/appops.svg type=image/svg+xml id=fig:appops></object></figure><p>Figure <a href=#fig:appops>1</a> describes the process of changing
and processing permission. <a href=#sec:appopsmanager>AppOpsManager</a> can be used to manage
permissions in Settings app. <strong>AppOpsManager</strong> is also
useful in determining if a certain permission (or operation) is granted
to the application. Most of the methods of
<strong>AppOpsManager</strong> are accessible to the user app but unlike
a system app, it can only be used to check permissions for any app or
for the app itself and start or terminating certain operations.
Moreover, not all operations are actually accessible from this Java
class. <strong>AppOpsManager</strong> holds all the necessary constants
such as <a href=#subsec:op-constants><code>OP_*</code></a>,
<code>OPSTR_*</code>, <a href=#subsec:mode-constants><code>MODE_*</code></a> which describes
operation code, operation string and mode of operations respectively. It
also holds necessary data structures such as <a href=#subsec:package-ops>PackageOps</a> and <strong>OpEntry</strong>.
<strong>PackageOps</strong> holds <strong>OpEntry</strong> for a
package, and <strong>OpEntry</strong>, as the name suggests, describes
each operation.<p><code>AppOpService</code> is completely hidden from a user
application but accessible to the system applications. As it can be seen
in Figure <a href=#fig:appops>1</a>, this is the class that does the
actual management stuff. It contains data structures such as
<strong>Ops</strong> to store basic package info and <strong>Op</strong>
which is similar to <strong>OpEntry</strong> of
<strong>AppOpsManager</strong>. It also has <strong>Shell</strong> which
is actually the source code of the <a href=#sec:appops-cli><em>appops</em> command line tool</a>. It writes
configurations to or read configurations from <a href=#sec:appops-xml><code>/data/system/appops.xml</code></a>. System
services calls <strong>AppOpsService</strong> to find out what an
application is allowed and what is not allowed to perform, and
<strong>AppOpsService</strong> determines these permissions by parsing
<code>/data/system/appops.xml</code>. If no custom values are present in
<em>appops.xml</em>, it returns the default mode available in
<strong>AppOpsManager</strong>.</section><section id=sec:appopsmanager class=level2 data-number=7.3><h2 data-number=7.3><span class=header-section-number>7.3</span> <a href=#toc:sec:appopsmanager>AppOpsManager</a><a href=#sec:appopsmanager class=anchor aria-hidden=true></a></h2><p><a href=https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/app/AppOpsManager.java>AppOpsManager</a>
stands for application operations manager. It consists of various
constants and classes to modify app operations.<div class=seealso-inline><p><em>See also: <span><a href=https://developer.android.com/reference/android/app/AppOpsManager>AppOpsManager
documentation</a></span></em></div><section id=subsec:op-constants class=level3 data-number=7.3.1><h3 data-number=7.3.1><span class=header-section-number>7.3.1</span>
<a href=#toc:subsec:op-constants><code>OP_*</code> Constants</a><a href=#subsec:op-constants class=anchor aria-hidden=true></a></h3><p><code>OP_*</code> are the integer constants starting from
<code>0</code>. <code>OP_NONE</code> implies that no operations are
specified whereas <code>_NUM_OP</code> denotes the number of operations
defined in <code>OP_*</code> prefix. While they denote each operation,
the operations are not necessarily unique. In fact, there are many
operations that are actually a single operation denoted by multiple
<code>OP_*</code> constant (possibly for future use). Vendors may define
their own op based on their requirements. MIUI is one of the vendors who
are known to do that.<div class=listing><div class=sourceCode id=cb9 data-frame=lines><pre class="sourceCode java"><code class="sourceCode java"><span id=cb9-1><a href=#cb9-1 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_NONE <span class=op>=</span> <span class=op>-</span><span class=dv>1</span><span class=op>;</span></span>
<span id=cb9-2><a href=#cb9-2 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_COARSE_LOCATION <span class=op>=</span> <span class=dv>0</span><span class=op>;</span></span>
<span id=cb9-3><a href=#cb9-3 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_FINE_LOCATION <span class=op>=</span> <span class=dv>1</span><span class=op>;</span></span>
<span id=cb9-4><a href=#cb9-4 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_GPS <span class=op>=</span> <span class=dv>2</span><span class=op>;</span></span>
<span id=cb9-5><a href=#cb9-5 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_VIBRATE <span class=op>=</span> <span class=dv>3</span><span class=op>;</span></span>
<span id=cb9-6><a href=#cb9-6 aria-hidden=true tabindex=-1></a><span class=kw>...</span></span>
<span id=cb9-7><a href=#cb9-7 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_READ_DEVICE_IDENTIFIERS <span class=op>=</span> <span class=dv>89</span><span class=op>;</span></span>
<span id=cb9-8><a href=#cb9-8 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_ACCESS_MEDIA_LOCATION <span class=op>=</span> <span class=dv>90</span><span class=op>;</span></span>
<span id=cb9-9><a href=#cb9-9 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> OP_ACTIVATE_PLATFORM_VPN <span class=op>=</span> <span class=dv>91</span><span class=op>;</span></span>
<span id=cb9-10><a href=#cb9-10 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=dt>int</span> _NUM_OP <span class=op>=</span> <span class=dv>92</span><span class=op>;</span></span></code></pre></div></div><p>Whether an operation is unique is defined by
<code>sOpToSwitch</code>. It maps each operation to another operation or
to itself (if it’s a unique operation). For instance,
<code>OP_FINE_LOCATION</code> and <code>OP_GPS</code> are mapped to
<code>OP_COARSE_LOCATION</code>.<p>Each operation has a private name which are described by
<code>sOpNames</code>. These names are usually the same names as the
constants without the <code>OP_</code> prefix. Some operations have
public names as well which are described by <code>sOpToString</code>.
For instance, <code>OP_COARSE_LOCATION</code> has the public name
<strong>android:coarse_location</strong>.<p>As a gradual process of moving permissions to app ops, there are
already many permissions that are defined under some operations. These
permissions are mapped in <code>sOpPerms</code>. For example, the
permission
<strong>android.Manifest.permission.ACCESS_COARSE_LOCATION</strong> is
mapped to <code>OP_COARSE_LOCATION</code>. Some operations may not have
any associated permissions which have <code>null</code> values.<p>As described in the previous section, operations that are configured
for an app are stored at <a href=#sec:appops-xml><code>/data/system/appops.xml</code></a>. If an
operation is not configured, then whether system will allow that
operation is determined from <code>sOpDefaultMode</code>. It lists the
<em>default mode</em> for each operation.</section><section id=subsec:mode-constants class=level3 data-number=7.3.2><h3 data-number=7.3.2><span class=header-section-number>7.3.2</span>
<a href=#toc:subsec:mode-constants><code>MODE_*</code> Constants</a><a href=#subsec:mode-constants class=anchor aria-hidden=true></a></h3><p><code>MODE_*</code> constants also integer constants starting from
<code>0</code>. These constants are assigned to each operation
describing whether an app is authorised to perform that operation. These
modes usually have associated names such as <strong>allow</strong> for
<code>MODE_ALLOWED</code>, <strong>ignore</strong> for
<code>MODE_IGNORED</code>, <strong>deny</strong> for
<code>MODE_ERRORED</code> (a rather misnomer), <strong>default</strong>
for <code>MODE_DEFAULT</code> and <strong>foreground</strong> for
<code>MODE_FOREGROUND</code>.<ol class=incremental><li><p><strong><code>MODE_ALLOWED</code>.</strong> The app is allowed to
perform the given operation<li><p><strong><code>MODE_IGNORED</code>.</strong> The app is not
allowed to perform the given operation, and any attempt to perform the
operation should <em>silently fail</em>, i.e. it should not cause the
app to crash<li><p><strong><code>MODE_ERRORED</code>.</strong> The app is not
allowed to perform the given operation, and this attempt should cause it
to have a fatal error, typically a
<code>SecurityException</code><li><p><strong><code>MODE_DEFAULT</code>.</strong> The app should use
its default security check, specified in
<code>AppOpsManager</code><li><p><strong><code>MODE_FOREGROUND</code>.</strong> Special mode that
means “allow only when app is in foreground.” This mode was added in
Android 10<li><p><strong><code>MODE_ASK</code>.</strong> This is a custom mode
used by MIUI whose uses are unknown.</ol></section><section id=subsec:package-ops class=level3 data-number=7.3.3><h3 data-number=7.3.3><span class=header-section-number>7.3.3</span>
<a href=#toc:subsec:package-ops>PackageOps</a><a href=#subsec:package-ops class=anchor aria-hidden=true></a></h3><p><strong>AppOpsManager.PackageOps</strong> is a data structure to
store all the <strong>OpEntry</strong> for a package. In simple terms,
it stores all the customised operations for a package.<div class=listing><div class=sourceCode id=cb10 data-frame=lines><pre class="sourceCode java"><code class="sourceCode java"><span id=cb10-1><a href=#cb10-1 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=kw>class</span> PackageOps <span class=kw>implements</span> Parcelable <span class=op>{</span></span>
<span id=cb10-2><a href=#cb10-2 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=bu>String</span> mPackageName<span class=op>;</span></span>
<span id=cb10-3><a href=#cb10-3 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=dt>int</span> mUid<span class=op>;</span></span>
<span id=cb10-4><a href=#cb10-4 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=bu>List</span><span class=op>&lt;</span>OpEntry<span class=op>&gt;</span> mEntries<span class=op>;</span></span>
<span id=cb10-5><a href=#cb10-5 aria-hidden=true tabindex=-1></a>    <span class=kw>...</span></span>
<span id=cb10-6><a href=#cb10-6 aria-hidden=true tabindex=-1></a><span class=op>}</span></span></code></pre></div></div><p>As can be seen in Listing <a href=#cb12>2</a>, it stores all
<strong>OpEntry</strong> for a package as well as the corresponding
package name and its kernel user ID.</section><section id=subsec:opentry class=level3 data-number=7.3.4><h3 data-number=7.3.4><span class=header-section-number>7.3.4</span>
<a href=#toc:subsec:opentry>OpEntry</a><a href=#subsec:opentry class=anchor aria-hidden=true></a></h3><p><strong>AppOpsManager.OpEntry</strong> is a data structure that
stores a single operation for any package.<div class=listing><div class=sourceCode id=cb11 data-frame=lines><pre class="sourceCode java"><code class="sourceCode java"><span id=cb11-1><a href=#cb11-1 aria-hidden=true tabindex=-1></a><span class=kw>public</span> <span class=dt>static</span> <span class=dt>final</span> <span class=kw>class</span> OpEntry <span class=kw>implements</span> Parcelable <span class=op>{</span></span>
<span id=cb11-2><a href=#cb11-2 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=dt>int</span> mOp<span class=op>;</span></span>
<span id=cb11-3><a href=#cb11-3 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=dt>boolean</span> mRunning<span class=op>;</span></span>
<span id=cb11-4><a href=#cb11-4 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=at>@Mode</span> <span class=dt>int</span> mMode<span class=op>;</span></span>
<span id=cb11-5><a href=#cb11-5 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=at>@Nullable</span> LongSparseLongArray mAccessTimes<span class=op>;</span></span>
<span id=cb11-6><a href=#cb11-6 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=at>@Nullable</span> LongSparseLongArray mRejectTimes<span class=op>;</span></span>
<span id=cb11-7><a href=#cb11-7 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=at>@Nullable</span> LongSparseLongArray mDurations<span class=op>;</span></span>
<span id=cb11-8><a href=#cb11-8 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=at>@Nullable</span> LongSparseLongArray mProxyUids<span class=op>;</span></span>
<span id=cb11-9><a href=#cb11-9 aria-hidden=true tabindex=-1></a>    <span class=kw>private</span> <span class=dt>final</span> <span class=at>@Nullable</span> LongSparseArray<span class=op>&lt;</span><span class=bu>String</span><span class=op>&gt;</span> mProxyPackageNames<span class=op>;</span></span>
<span id=cb11-10><a href=#cb11-10 aria-hidden=true tabindex=-1></a>    <span class=kw>...</span></span>
<span id=cb11-11><a href=#cb11-11 aria-hidden=true tabindex=-1></a><span class=op>}</span></span></code></pre></div></div><p>Here:<ul class=incremental><li><p><code>mOp</code>: Denotes one of the <a href=#subsec:op-constants><code>OP_*</code> constants</a><li><p><code>mRunning</code>: Whether the operation is in progress
(i.e. the operation has started but not finished yet). Not all
operations can be started or finished this way<li><p><code>mMOde</code>: One of the <a href=#subsec:mode-constants><code>MODE_*</code> constants</a><li><p><code>mAccessTimes</code>: Stores all the available access
times<li><p><code>mRejectTimes</code>: Stores all the available reject
times<li><p><code>mDurations</code>: All available access durations, checking
this with <code>mRunning</code> will tell you for how long the app is
performing a certain app operation<li><p><code>mProxyUids</code>: No documentation found<li><p><code>mProxyPackageNames:</code> No documentation found</ul></section><section id=subsec:usage class=level3 data-number=7.3.5><h3 data-number=7.3.5><span class=header-section-number>7.3.5</span>
<a href=#toc:subsec:usage>Usage</a><a href=#subsec:usage class=anchor aria-hidden=true></a></h3><p>TODO</section></section><section id=sec:appopsservice class=level2 data-number=7.4><h2 data-number=7.4><span class=header-section-number>7.4</span> <a href=#toc:sec:appopsservice>AppOpsService</a><a href=#sec:appopsservice class=anchor aria-hidden=true></a></h2><p>TODO</section><section id=sec:appops-xml class=level2 data-number=7.5><h2 data-number=7.5><span class=header-section-number>7.5</span> <a href=#toc:sec:appops-xml>appops.xml</a><a href=#sec:appops-xml class=anchor aria-hidden=true></a></h2><p>Latest <code>appops.xml</code> has the following format: (This DTD is
made by me and by no means perfect, has compatibility issues.)<pre><code>&lt;!DOCTYPE app-ops [

&lt;!ELEMENT app-ops (uid|pkg)*&gt;
&lt;!ATTLIST app-ops v CDATA #IMPLIED&gt;

&lt;!ELEMENT uid (op)*&gt;
&lt;!ATTLIST uid n CDATA #REQUIRED&gt;

&lt;!ELEMENT pkg (uid)*&gt;
&lt;!ATTLIST pkg n CDATA #REQUIRED&gt;

&lt;!ELEMENT uid (op)*&gt;
&lt;!ATTLIST uid
n CDATA #REQUIRED
p CDATA #IMPLIED&gt;

&lt;!ELEMENT op (st)*&gt;
&lt;!ATTLIST op
n CDATA #REQUIRED
m CDATA #REQUIRED&gt;

&lt;!ELEMENT st EMPTY&gt;
&lt;!ATTLIST st
n CDATA #REQUIRED
t CDATA #IMPLIED
r CDATA #IMPLIED
d CDATA #IMPLIED
pp CDATA #IMPLIED
pu CDATA #IMPLIED&gt;

]&gt;</code></pre><p>The instruction below follows the exact order given above:<ul class=incremental><li><p><code>app-ops</code>: The root element. It can contain any number
of <code>pkg</code> or package <code>uid</code><ul class=incremental><li><p><code>v</code>: (optional, integer) The version number (default:
<code>NO_VERSION</code> or <code>-1</code>)</ul><li><p><code>pkg</code>: Stores package info. It can contain any number
of <code>uid</code><ul class=incremental><li><p><code>n</code>: (required, string) Name of the package</ul><li><p>Package <code>uid</code>: Stores package or packages info<ul class=incremental><li><p><code>n</code>: (required, integer) The user ID</ul><li><p><code>uid</code>: The package user ID. It can contain any number
of <code>op</code><ul class=incremental><li><p><code>n</code>: (required, integer) The user ID<li><p><code>p</code>: (optional, boolean) Is the app is a
private/system app</ul><li><p><code>op</code>: The operation, can contain <code>st</code> or
nothing at all<ul class=incremental><li><p><code>n</code>: (required, integer) The op name in integer,
i.e. AppOpsManager.OP_*<li><p><code>m</code>: (required, integer) The op mode,
i.e. AppOpsManager.MODE_*</ul><li><p><code>st</code>: State of operation: whether the operation is
accessed, rejected or running (not available on old versions)<ul class=incremental><li><p><code>n</code>: (required, long) Key containing flags and
uid<li><p><code>t</code>: (optional, long) Access time (default:
<code>0</code>)<li><p><code>r</code>: (optional, long) Reject time (default:
<code>0</code>)<li><p><code>d</code>: (optional, long) Access duration (default:
<code>0</code>)<li><p><code>pp</code>: (optional, string) Proxy package name<li><p><code>pu</code>: (optional, integer) Proxy package uid</ul></ul><p>This definition can be found at <a href=https://android.googlesource.com/platform/frameworks/base/+/master/services/core/java/com/android/server/appop/AppOpsService.java>AppOpsService</a>.</section><section id=sec:appops-cli class=level2 data-number=7.6><h2 data-number=7.6><span class=header-section-number>7.6</span> <a href=#toc:sec:appops-cli>Command Line Interface</a><a href=#sec:appops-cli class=anchor aria-hidden=true></a></h2><p><code>appops</code> or <code>cmd appops</code> (on latest versions)
can be accessible via ADB or root. This is an easier method to get or
update any operation for a package (provided the package name is known).
The help page of this command is self-explanatory:<pre><code>AppOps service (appops) commands:
help
Print this help text.
start [--user &lt;USER_ID&gt;] &lt;PACKAGE | UID&gt; &lt;OP&gt;
Starts a given operation for a particular application.
stop [--user &lt;USER_ID&gt;] &lt;PACKAGE | UID&gt; &lt;OP&gt;
Stops a given operation for a particular application.
set [--user &lt;USER_ID&gt;] &lt;[--uid] PACKAGE | UID&gt; &lt;OP&gt; &lt;MODE&gt;
Set the mode for a particular application and operation.
get [--user &lt;USER_ID&gt;] &lt;PACKAGE | UID&gt; [&lt;OP&gt;]
Return the mode for a particular application and optional operation.
query-op [--user &lt;USER_ID&gt;] &lt;OP&gt; [&lt;MODE&gt;]
Print all packages that currently have the given op in the given mode.
reset [--user &lt;USER_ID&gt;] [&lt;PACKAGE&gt;]
Reset the given application or all applications to default modes.
write-settings
Immediately write pending changes to storage.
read-settings
Read the last written settings, replacing current state in RAM.
options:
&lt;PACKAGE&gt; an Android package name or its UID if prefixed by --uid
&lt;OP&gt;      an AppOps operation.
&lt;MODE&gt;    one of allow, ignore, deny, or default
&lt;USER_ID&gt; the user id under which the package is installed. If --user is not
specified, the current user is assumed.</code></pre></section></section><section class="footnotes footnotes-end-of-document" role=doc-endnotes><hr><ol><li id=fn1 role=doc-endnote><p>For distributing normal releases
only<a href=#fnref1 class=footnote-back role=doc-backlink>↩︎</a><li id=fn2 role=doc-endnote><p>GitHub 的 PR 将使用 git patch
进行手动合并, 因此, GitHub 可能会错误地将它们标记为closed而不是merged.<a href=#fnref2 class=footnote-back role=doc-backlink>↩︎</a><li id=fn3 role=doc-endnote><p>可称“Muntashir Akon”<a href=#fnref3 class=footnote-back role=doc-backlink>↩︎</a></ol></section>